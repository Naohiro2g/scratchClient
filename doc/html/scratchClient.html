<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>ScratchClient</title>
<link href="style.css" type="text/css" rel="stylesheet">
<meta content="DocBook XSL Stylesheets V1.78.1" name="generator">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="book">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="N10001"></a>ScratchClient</h1>
</div>
<div>
<h2 class="subtitle">

			
<span class="inlinemediaobject"><img src="images/building_blocks.png" width="535"></span>
		
</h2>
</div>
<div>
<div class="author">
<h3 class="author">
<span class="firstname">Gerhard</span> <span class="surname">Hepp</span>
</h3>
</div>
</div>
<div>
<p class="pubdate">2016-12-20</p>
</div>
<div>
<a href="scratch.client.historie.html">Revision History</a>
</div>
</div>
<hr>
</div>
<div class="toc">
<dl class="toc">
<dt>
<span class="chapter"><a href="#scratch.client.summary">1. Summary</a></span>
</dt>
<dt>
<span class="chapter"><a href="#scratch.client.introduction">2. Introduction</a></span>
</dt>
<dt>
<span class="chapter"><a href="#scratch.client.architecture">3. Architecture</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#scratch.client.decisions">3.1.  Architectural Decisions</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="chapter"><a href="#scratch.remote.sensor.protocol">4. 
			Scratch remote sensor protocol
		</a></span>
</dt>
<dt>
<span class="chapter"><a href="#scratchClient.configuration">5. Configuration</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#configfilesyntax">5.1. Config file Syntax</a></span>
</dt>
<dt>
<span class="section"><a href="#gpiooutput">5.2. 
				 GPIO Output
			</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchnames">5.3. Inputs, outputs and scratch names.</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#other_parameters">5.3.1. 
                    Other features: parameters
                </a></span>
</dt>
<dt>
<span class="section"><a href="#other_webserver">5.3.2. 
                    Other features: webserver websocket plugin, html plugin
                </a></span>
</dt>
<dt>
<span class="section"><a href="#lifecycle">5.3.3. 
					Adapter lifecycle
				</a></span>
</dt>
<dt>
<span class="section"><a href="#N102E9">5.3.4. 
					Simulation mode
				</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dt>
<span class="chapter"><a href="#scratchClient.adapters">6. 
            Adapter Types
        </a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#adapter.GPIO">6.1. GPIO Adapter</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#adapter.GPIO.input">6.1.1. GPIO Adapter, input</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.GPIO.output">6.1.2. GPIO Adapter, output</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.GPIO.output.servo">6.1.3. GPIO Adapter, output for Servo motors</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.GPIO.output.stepper">6.1.4. GPIO Adapter, output for Stepper motors</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.GPIO.output.motor">6.1.5. GPIO Adapter, output for PWM controlled Motor</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.GPIO.complex.various">6.1.6. GPIO Adapter, various</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#SPI">6.2. SPI based Adaper</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N103ED">6.2.1. WS2801 LED Stripe</a></span>
</dt>
<dt>
<span class="section"><a href="#N10425">6.2.2. ADC MCP3202</a></span>
</dt>
<dt>
<span class="section"><a href="#N1043C">6.2.3. ADC MCP3008</a></span>
</dt>
<dt>
<span class="section"><a href="#N10452">6.2.4. MAX31855 Thermocouple</a></span>
</dt>
<dt>
<span class="section"><a href="#N10476">6.2.5. MCP23S17 16-Bit IO Expander; PIFACE board</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N1048A">6.2.5.1. Setup on a breadboard</a></span>
</dt>
<dt>
<span class="section"><a href="#N1049B">6.2.5.2. PiFace board</a></span>
</dt>
<dt>
<span class="section"><a href="#N104A6">6.2.5.3. Configuration details</a></span>
</dt>
<dt>
<span class="section"><a href="#N104BF">6.2.5.4. Start scratchClient</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dt>
<span class="section"><a href="#i2c">6.3.  I2C-Adapters</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N104CC">6.3.1.  ADS1015 ADC Converter</a></span>
</dt>
<dt>
<span class="section"><a href="#N104DD">6.3.2.  BH1750 Luminosity Sensor</a></span>
</dt>
<dt>
<span class="section"><a href="#N104EE">6.3.3.  BMP085 barometric pressure sensor</a></span>
</dt>
<dt>
<span class="section"><a href="#N104FF">6.3.4.  PCA9685 16-channel, 12-bit PWM LED controller</a></span>
</dt>
<dt>
<span class="section"><a href="#N10516">6.3.5.  SN3218 LED controller, piGlow board</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#w1-gpio">6.4. GPIO Wire adapter, w1-gpio, DS1820</a></span>
</dt>
<dt>
<span class="section"><a href="#remote_communication">6.5. Remote Communications Adapter</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N1059A">6.5.1. How to setup configuration files.</a></span>
</dt>
<dt>
<span class="section"><a href="#N105BF">6.5.2. Sample Application 'railway control'</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N105CD">6.5.2.1. Context Diagram</a></span>
</dt>
<dt>
<span class="section"><a href="#N105DE">6.5.2.2.  Computer A</a></span>
</dt>
<dt>
<span class="section"><a href="#N105F8">6.5.2.3. Computer B</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dt>
<span class="section"><a href="#os_adapter">6.6. Operation System Adapters</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#tts">6.6.1. Text To Speech Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#broadcast_adapter">6.6.2. Broadcast Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#time_adapter">6.6.3. System Time Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#command_line">6.6.4. Operating system commands</a></span>
</dt>
<dt>
<span class="section"><a href="#command_line_aplay">6.6.5. Linux 'aplay' adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#command_line_arecord">6.6.6. Linux 'arecord' adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#command_line_speechrecognition">6.6.7. Linux speech recognition adapter</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#complex">6.7. Telephone Dial Plate Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#special">6.8. Adapters for special purpose Devices</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#special.328.adc">6.8.1. Atmel atmega328 with custom firmware as ADC</a></span>
</dt>
<dt>
<span class="section"><a href="#special.328.frequency">6.8.2. Atmel atmega328 with custom firmware as frequency counter</a></span>
</dt>
<dt>
<span class="section"><a href="#special.328.dht22">6.8.3. Atmel atmega328 with custom firmware for DHT22, DHT11</a></span>
</dt>
<dt>
<span class="section"><a href="#special.serial.sim800">6.8.4. Adapter for SIM800 GSM Modem, SMS support</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.test">6.8.5. Test Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.servoblaster">6.8.6. Servoblaster</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.senseHat">6.8.7. Raspberry Pi SenseHat</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.pianoHat">6.8.8. Pimoroni PianoHat</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.websocket.positionalsensor">6.9. Smartphone positional sensor for scratch</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N1085C">6.9.1. Overview</a></span>
</dt>
<dt>
<span class="section"><a href="#N10874">6.9.2. Start scratchClient</a></span>
</dt>
<dt>
<span class="section"><a href="#N1087B">6.9.3. Smartphone</a></span>
</dt>
<dt>
<span class="section"><a href="#N10886">6.9.4. Scratch</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.usbBarcodeScanner">6.10. USB barcode scanner</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.usbBarcodeScanner.install">6.10.1. Install pyusb</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.usbBarcodeScanner.setup">6.10.2. Setup Scanner for USB and CR-suffix</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.usbBarcodeScanner.configure">6.10.3. Configure idVendor and idProduct</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.usbBarcodeScanner.configure.start">6.10.4. 
                Start scratchClient
            </a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.usbBlink">6.11. USB blink(1)</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#scratchClient.adapter.special.usbBlink.configure.start">6.11.1. 
                Start scratchClient
            </a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#rfid">6.12. RFID Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#picoBoard">6.13. ScratchBoard, PicoBoard Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO">6.14. Arduino UNO Adapter</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#arduinoUNO.step1">6.14.1. Step 1, program the firmware to arduino UNO</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO.step2">6.14.2. 
			Step 2, Sample hardware setup.
		</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO.step3">6.14.3. 
			Step 3, connect arduino with USB-Line to RaspberryPi or windows computer.
		</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO.step4">6.14.4. Step 4, start scratchClient with configuration</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO.step5">6.14.5. Step 5, start scratch with sample program</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO.constraints">6.14.6. Constraints</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO.advanced">6.14.7. Advanced Features</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUno.configuration">6.14.8. Configuration Remarks</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#arduinoNeopixel">6.15. Arduino UNO Adapter for Neopixel</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#arduinoNeopixel.step4">6.15.1. start scratchClient with configuration</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoNeopixel.step5">6.15.2. start scratch with sample program</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#arduinoUNO_POWERFUNCTIONS">6.16. Arduino UNO_POWERFUNCTIONS_Adapter</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#arduinoUNO_POWERFUNCTIONS.step1">6.16.1. Step 1, program the firmware to arduino UNO</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO_POWERFUNCTIONS.step2">6.16.2. 
                Step 2, Hardware setup.</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO_POWERFUNCTIONS.step3">6.16.3. 
                Step 3, connect arduino with USB-Line to RaspberryPi or windows computer.</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO_POWERFUNCTIONS.step4">6.16.4. Step 4, start scratchClient with configuration</a></span>
</dt>
<dt>
<span class="section"><a href="#arduinoUNO_POWERFUNCTIONS.step5">6.16.5. Step 5, start scratch and create scratch Program</a></span>
</dt>
<dt>
<span class="section"><a href="#N10B4D">6.16.6. Constraints</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#Twitter_Adapter">6.17. Twitter_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#Openweathermap_Adapter">6.18. Openweathermap_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2_Adapter">6.19. LEGO WeDo 2.0 Adapter</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#legowedo2.hub">6.19.1. Hub features</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.motor">6.19.2. Motor Features</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.motion">6.19.3. Motion sensor Features</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.tilt">6.19.4. Tilt Sensor Features</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.installation">6.19.5. Installation</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.connection_options">6.19.6. Connection Options</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.connection_sequence">6.19.7. Connection Sequence</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.basic">6.19.8. Basic setup</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.advanced">6.19.9. Advanced setup</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.complete">6.19.10. Complete setup</a></span>
</dt>
<dt>
<span class="section"><a href="#legowedo2.scratch">6.19.11. Sample scratch Program</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#pigpiod_adapter">6.20. Adapters using pigpiod-Daemon</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#scratch.client.pigpiod.hcsr04_Adapter">6.20.1. Ultrasonic Distance Sensor HC-SR04 by pigpiod-Daemon</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dt>
<span class="chapter"><a href="#scratchClient.monitoring">7.  GUI, Web Interface for Monitoring</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N10D83">7.1. GUI Functions</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N10D99">7.1.1. Monitoring, Controlling</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#N10DB0">7.2. Compatibility</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="chapter"><a href="#scratchClient.install_operation">8. Installation, Operation</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#scratchClient.operation.installation.quick">8.1. Quick Installation</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.operation.installation.steps">8.2. Step by Step Installation</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#install.base">8.2.1. Base Packages Installation</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.operation.installation.scratchClient">8.2.2. ScratchClient Software Installation</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.operation.installation.spi">8.2.3. SPI install</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.operation.installation.i2c">8.2.4. I2C install</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.operation.installation.text2speech">8.2.5. Text to speech install</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.operation.installation.dma">8.2.6. DMA library support (RPIO2)</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#scratchClient.operation.start">8.3. Start scratchClient</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.operation.stop">8.4. Stop scratchClient</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.operation.debug">8.5. Problems running scratchClient</a></span>
</dt>
<dt>
<span class="section"><a href="#scratch.autostart">8.6. Scratch Autostart</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N10EF0">8.6.1. Start scratch into presentation mode</a></span>
</dt>
<dt>
<span class="section"><a href="#remote_connection">8.6.2.  Enable remote connection (without user interaction)</a></span>
</dt>
<dt>
<span class="section"><a href="#green_flag">8.6.3. Green Flag Event</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="section"><a href="#context">8.7. scratchClient usage scenario</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#sceanario.local">8.7.1. Local setup</a></span>
</dt>
<dt>
<span class="section"><a href="#sceanario.distributedA">8.7.2. Distributed setup A</a></span>
</dt>
<dt>
<span class="section"><a href="#sceanario.distributedB">8.7.3. Distributed setup B</a></span>
</dt>
</dl>
</dd>
</dl>
</dd>
<dt>
<span class="chapter"><a href="#scratchClient.extending">9. Extending Functionality</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#N1100D">9.1. Hacking the code</a></span>
</dt>
<dt>
<span class="section"><a href="#scratchClient.configuration.gpioNames">9.2. GPIO Names</a></span>
</dt>
<dt>
<span class="section"><a href="#N11027">9.3. Python Compatibility</a></span>
</dt>
<dt>
<span class="section"><a href="#N11045">9.4. License</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="chapter"><a href="#adapter.doku">10. Adapter Documentation</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="section"><a href="#adapter.detail.adapter.i2cAdapter.ADC_ADS1015_Input">10.1. ADC_ADS1015_Input</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.adc_zone.ADC_MCP3008_10_Input">10.2. ADC_MCP3008_10_Input</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.adc.ADC_MCP3202_10_Input">10.3. ADC_MCP3202_10_Input</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.adc_zone.ADC_MCP3202_10_Zone_Input">10.4. ADC_MCP3202_10_Zone_Input</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.adc.ADC_MCP3202_12_Input">10.5. ADC_MCP3202_12_Input</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.stepper.BipolarStepper">10.6. BipolarStepper</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.usbAdapter.Blink_Adapter">10.7. Blink_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.remote.CommunicationAdapter">10.8. CommunicationAdapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.dma_pwm.DMA_PWM">10.9. DMA_PWM</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.dma_pwm.DMA_PWM_ON_OFF">10.10. DMA_PWM_ON_OFF</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.dma_pwm.DMA_PWMServo">10.11. DMA_PWMServo</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.textToSpeech.Festival_Adapter">10.12. Festival_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.adapters.Gpio7segment">10.13. Gpio7segment</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioButtonInput">10.14. GpioButtonInput</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.encoder.GPIODialPlateEncoder">10.15. GPIODialPlateEncoder</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.encoder.GPIOEncoder">10.16. GPIOEncoder</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioEventInput">10.17. GpioEventInput</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioInput">10.18. GpioInput</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioOutput">10.19. GpioOutput</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioOutputPWM">10.20. GpioOutputPWM</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioOutputPWM_ON_OFF">10.21. GpioOutputPWM_ON_OFF</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioOutputPWMServo">10.22. GpioOutputPWMServo</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioStateOutput">10.23. GpioStateOutput</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.gpio.GpioValueInput">10.24. GpioValueInput</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.pigpiod.HC_SR04_Adapter">10.25. HC_SR04_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.usbAdapter.HIDScanner_Adapter">10.26. HIDScanner_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.adc.IRDistanceInput">10.27. IRDistanceInput</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.linux.Linux_Adapter">10.28. Linux_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.linux.Linux_APLAY_Adapter">10.29. Linux_APLAY_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.linux.Linux_ARECORD_Adapter">10.30. Linux_ARECORD_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.linux.Linux_ASR_Adapter">10.31. Linux_ASR_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.i2cAdapter.Luminosity_BH1750_Input">10.32. Luminosity_BH1750_Input</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.spiAdapter.MAX31855_Adapter">10.33. MAX31855_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.mcp23s17.MCP23S17_Adapter">10.34. MCP23S17_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.arduino.NEOPIXEL_Adapter">10.35. NEOPIXEL_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.openweathermapAdapter.Openweathermap_Adapter">10.36. Openweathermap_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.Cap1188Adapter.PianoHat_CAP1188_Adapter">10.37. PianoHat_CAP1188_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.textToSpeech.Pico2Wave_Adapter">10.38. Pico2Wave_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.serialAdapter.PicoBoard_Adapter">10.39. PicoBoard_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.i2cAdapter.Pressure_BMP085_Input">10.40. Pressure_BMP085_Input</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.i2cAdapter.PWM_PCA9685">10.41. PWM_PCA9685</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.i2cAdapter.PWM_SN3218">10.42. PWM_SN3218</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.serialAdapter.RFID_Reader_Adapter">10.43. RFID_Reader_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.broadcast.ScratchStartclickedAdapter">10.44. ScratchStartclickedAdapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.senseHat_adapter.SenseHat_Adapter">10.45. SenseHat_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.servoblaster.ServoBlaster">10.46. ServoBlaster</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.broadcast.TimeAdapter">10.47. TimeAdapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.twitterAdapter.Twitter_Adapter">10.48. Twitter_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.stepper.UnipolarStepperModule">10.49. UnipolarStepperModule</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.stepper.UnipolarStepperStep">10.50. UnipolarStepperStep</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.arduino.UNO_Adapter">10.51. UNO_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.arduino.UNO_POWERFUNCTIONS_Adapter">10.52. UNO_POWERFUNCTIONS_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.w1_gpio.W1_DS1820">10.53. W1_DS1820</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.websocket.WebsocketXY_Adapter">10.54. WebsocketXY_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.wire_gpio.Wire_SHTx">10.55. Wire_SHTx</a></span>
</dt>
<dt>
<span class="section"><a href="#adapter.detail.adapter.spiAdapter.WS2801_Adapter">10.56. WS2801_Adapter</a></span>
</dt>
<dt>
<span class="section"><a href="#N136C0">10.57. Adapter Data Types</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="chapter"><a href="#scratchClient.index">11. Index</a></span>
</dt>
<dd>
<dl>
<dt>
<span class="index"><a href="#N137DB">Index</a></span>
</dt>
</dl>
</dd>
<dt>
<span class="chapter"><a href="#scratchClient.references">12. References</a></span>
</dt>
</dl>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratch.client.summary"></a>Chapter&nbsp;1.&nbsp;Summary</h1>
</div>
</div>
</div>
<p>
		This document describes software connecting scratch to hardware on Raspberry Pi.
	</p>
<p>
		The goal is to have a flexible approach where hardware setup is basically configured instead
		of programmed.
	</p>
<p>

		There are ready to use adapters for basic IO capabilities, as buttons, switches, stepper driver,
		photointerrupters, PWM-driving outputs.
		SPI based devices are
		available for ADC, DAC and LED-Stripes.
	</p>
<p>
		Functionality is not only limited to hardware IO. Other examples are a Text to Speech interface or remote scratch-to-scratch-connection.
	</p>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratch.client.introduction"></a>Chapter&nbsp;2.&nbsp;Introduction</h1>
</div>
</div>
</div>
<p>

			Scratch does not allow direct interfacing to hardware.
		</p>
<p>
			For scratch version 1.4, as available on RaspberryPi raspbian, the 'Remote Sensor Protocol' allows to 
			attach external processes which then interface to hardware.
		</p>
<p>
			When activated, scratch acts as a server on socket port 42001 and clients can connect to 
			this socket.
		</p>
<div class="mediaobject">
<img src="images/protocol.png" width="486"></div>
<p>
			The 'Remote Sensor Protocol' is descibed in /rsp/. It is not limited to sensors, but can also be used for controlling actors, write to files and many more functionalities.
		</p>
<p>	Clients do not need to be located on the same computer with
			scratch, but could also be remote on a network.
		</p>
<p>
			The sensor protocol is generally usable on different computer platforms, and not limited to Raspberry Pi.
			The Raspberry Pi offers easy to be attached GPIO (general purpose Input Output), which leads to simple 
			and low cost implementations in controlling hardware.
		</p>
<p>
			The data exchange are 
			</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>broadcast events from scratch to client.            Broadcasts are used for simple commands like 'start' or 'stop'.</p>
</li>
<li class="listitem">
<p>sensor-updates from scratch to client. Sensor-updates
            are similiar to broadcasts, but carry an addititional value.</p>
</li>
<li class="listitem">
<p>sensor-updates from client to server</p>
</li>
<li class="listitem">
<p>broadcast events from client to scratch.</p>
</li>
</ul>
</div>
<p>
			

			Sensor-updates are used to carry additional values like voltage measurements, speed values, or pin state like '0' or '1'.
		</p>
<p>
			There are some client implementations available for this protocol. See /simon/ and /silent/, there are many if you search the net.
		</p>
<p>
			For an afterschool workschop for 7th class programming novices, I needed a flexible approach to have hardware attached to scratch.
			The available implementations are either too specialized or lack some flexibility in configuration.
		</p>
<p>
			The code provided here is partially based on code from /simon/, which was basically reorganized, modularized and extended.
		</p>
<p>
			The implementation has the following goals:
			</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Modularization of Software (server connection, data model, configuration, monitoring)
					</p>
</li>
<li class="listitem">
<p>
						Configuration in XML for various adapter-settings; versioning of config files.
					</p>
</li>
<li class="listitem">
<p>html based GUI for monitoring and simulation, also providing some documentation on the current configuration.
                    </p>
</li>
<li class="listitem">
<p>dynamic mapping of broadcast names and variable names to the scratch world
					</p>
</li>
<li class="listitem">
<p>internal GPIO-Numbering is BCM style. Configuration allows for BCM, board or other names.
					</p>
</li>
<li class="listitem">
<p>Till 2015-01-02, there was a feature to use different GPIO-libraries. This was removed, as RPIO did no longer support Pi2-hardware, and as software was too complex by this feature.
					A local patch to RPIO, named 'RPIO2', is used instead.
					</p>
</li>
</ul>
</div>
<p>
		
</p>
<p>
			Performance was not a primary goal. If you need to squeeze out a few cpu-cycles, then head for a C++ based implementation.
		</p>
<p>
			The scratchClient is designed to run on Raspberry Pi, raspbian. Scratch will in general run on the same machine, although it could run on other platforms too.
		</p>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratch.client.architecture"></a>Chapter&nbsp;3.&nbsp;Architecture</h1>
</div>
</div>
</div>
<p>
			
</p>
<div class="mediaobject">
<img src="images/building_blocks.png" width="486"><div class="caption">Building blocks of scratchClient</div>
</div>
<p>
		
</p>
<p>
			Configuration manager. Reads config file, instantiates adapters and populates the logic to internal names conversion tables.
		</p>
<p>
			Logic names to internal names. Scratch is working with 'logic' or business related names. Examples are 'light on', 'distance Y' or 'red button pressed'. These are
			mapped to internal technical names.
		</p>
<p>
			Connect/reconnect logic. Connecting to scratch, reconnecting if needed.
		</p>
<p>
			Web app server. Provides view of configuration; monitoring, controlling the adapters.
		</p>
<p>
			Event distribution. Scratch signals, signals from/to web app and signals from the adapters need to be distributed between the objects inside the scratchClient.
		</p>
<p>
			SpiManager, i2cManager, gpiomanager. These modules manage the access to the Rpi resources; 'device handlers' to handle popular devices.
		</p>
<p>
			And adapters. These are the main building blocks, encapsulating the business logic.
			An adapter is a module, which performs a dedicated operation like a button-adapter, a relais adapter or a stepper.
		</p>
<p>
			Scratch applications typically will not use a large number of adapters. My typical applications use up to 10 GPIO pins and one or two adc channels. This yields to
			10, possibly 20 adapters involved.
		</p>
<p>
			Basically, adapters have a high level command input interface like 'on' or 'off' for a relais, or value inputs like 'direction left/right' or 'speed 2.32' for a
			stepper control. Adapters can provide value output, as a switch-adapter (state=on/off) does or an AD-Converter. An adapter can use multiple inputs, values and
			outputs.
		</p>
<p>
			Configuration parameters are inputs only used during initialization by the ConfigurationManager. These values are immutable during runtime.
		</p>
<p>TODO: image of adapter with data flow, life cycle.</p>
<p>
			The adapters are designed with reuse in mind. If you reuse an adapter, you need to map the inputs or outputs to different commands or variables in scratch. This
			mapping is done by configuration.
		</p>
<p>
			The names in the broadcasts from scratch and the names in the sensor-updates are mapped to the names the adapters are using. These mappings are defined by
			configuration.
		</p>
<p>
			GPIO are assigned to the adapters by configuration. One GPIO pin can only be assigned to one adapter.
			The configuration checks for correct assignment of GPIO, which means that pins are not double used or not existing pin numbers are assigned.
		</p>
<p>
			Adapters do not directly control the GPIO, there is a GPIOManager which controls GPIO. This construction was choosen to allow for different GPIO implementing
			libraries, which imposes the need of modularization.
		</p>
<p>
			Adapters are not limited to GPIO input or output. Serial line or SPI, network connections, file access and others are possible. Aside from this, gpio-in/output will be the
			primary purpose for most projects.
		</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratch.client.decisions"></a>3.1.&nbsp; Architectural Decisions</h2>
</div>
</div>
</div>
<p>
				Programming language is python. <br>
				Although the complexity would require programming techniques as static types, interfaces, enumerations and private fields, python is easy to learn and is
				widely adopted in the Raspberry-Community.
			</p>
<p>
				GUI is web based.<br>
				As the client could be run in background, web based access is quite easy to use.
				Cherrypy with mako templates are used to implement the server side.
				On the fly graphics are svg-based.
				Event notifications are used to update the web client. This technique is supported by midori, epiphany and most browsers (not IE).
			</p>
<p>
				Configuration files are XML<br>
				Widely adopted in industry, easy to read, can be automatically formatted. Allows inline comments.
			</p>
<p>
				Configuration files are versioned.<br>
				Versioning allows to implement backward compatibility through releases.
			</p>
<p>
				GPIO names are BCM internal GPIO-scheme.<br>
				External names are mapped to internal numbers, allowing for flexibility. This mapping is configurable.
			</p>
</div>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratch.remote.sensor.protocol"></a>Chapter&nbsp;4.&nbsp;
			Scratch remote sensor protocol
		</h1>
</div>
</div>
</div>
<p>
			When 'remote sensor connections' in scratch are enabled, scratch opens a port 42001 and waits for clients to connect. Connections are made by tcp-sockets.
			Communication packets start with 4 byte binary length information (MSB first) and then plain data string. Length is length of data string only.
		</p>
<p>
			Scratch sends:
			</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
						broadcast [name] <br>
						whenever scratch issues a
						<code class="code">broadcast [name]</code>
						or
						<code class="code">broadcast [name] and wait</code>
					
</p>
</li>
<li class="listitem">
<p>
                        sensor-update "[name]" [value] <br>
                        sensor-update "[name]" "[value]" <br>
						on communication startup once for each 'global variable' (defined for all sprites);
						whenever a 'global variable' is changing.<br>
						Numeric values are transmitted without the double quotes around the value. String values are quoted. 
						Names or values containing quotes result in two consecutive quotes.
						
					</p>
</li>
</ul>
</div>
<p>
		
</p>
<p>

			Scratch receives
			</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
						broadcast [name]<br>
						in scratch, you can react on this with 'when I receive [name]'
					</p>
</li>
<li class="listitem">
<p>
						sensor-update "[name]" [value]<br>
						this is acessible from the sensor values in 'sensing'
					</p>
</li>
</ul>
</div>
<p>
		
</p>
<p>
			List variables in scratch are not sent to client.
			Values are 'text encoded', so integers, floats are transmitted not in binary, but in their string format. String values are double quoted and 
			in utf-8 charset.
		</p>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratchClient.configuration"></a>Chapter&nbsp;5.&nbsp;Configuration</h1>
</div>
</div>
</div>
<p>
			Configuration for the adapter definitions is provided by xml-Files. Default config file is 'config.xml', but name of the file can be set 
			by command line.
			Online configuration change is NOT possible. Usual procedure is to stop the client, do some wiring on the hardware and restart client.
		</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="configfilesyntax"></a>5.1.&nbsp;Config file Syntax</h2>
</div>
</div>
</div>
<p>
				Basic frame for all configurations is the xml-preamble and the config tag.
			</p>
<pre class="screen">&lt;?xml version='1.0' encoding='utf-8' ?&gt;
&lt;config version='1.0'&gt;
    &lt;description&gt;Basic empty configuration&lt;/description&gt;
&lt;/config&gt;</pre>
<p>
				The config-tag is the 'frame' for more content. The description-tag contains some information about the project, purpose 
				or whatever else might be needed to
				clearly identify the target system purpose of configuration.
			</p>
<p>
				In the samples in ./config, there are schema references for validation purposes. When the data are read by scratchClient, no validation 
				is used (but they need
				to be xml-compliant).
			</p>
<div class="note">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="icons/note.png"></td><th align="left"></th>
</tr>
<tr>
<td valign="top" align="left">
<p>
					Feel free to add xml-comments
					<code class="code">&lt;!-- comment --&gt;</code>
					whereever you want to have more information.
				</p>
</td>
</tr>
</table>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="gpiooutput"></a>5.2.&nbsp;
				 GPIO Output
			</h2>
</div>
</div>
</div>
<pre class="screen">&lt;?xml version='1.0' encoding='utf-8' ?&gt;
&lt;config version='1.0'&gt;
    &lt;description&gt;Sample configuration&lt;/description&gt;

    &lt;adapter class='adapter.gpio.GpioOutput'  name='relais'&gt;
        &lt;description&gt;Sample GPIO, here assumed to be a relais output&lt;/description&gt;

        &lt;gpio port='GPIO25'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' default='low' /&gt;
        &lt;/gpio&gt;

        &lt;input name='low'&gt;
            &lt;broadcast name='pin25low'/&gt;
            &lt; broadcast name='pin10off'/&gt;
        &lt;/input&gt;
        &lt;input name='high'&gt;
            &lt; broadcast name='pin25high'/&gt;
            &lt; broadcast name='relaisOn'/&gt;
        &lt;/input&gt;
    &lt;/adapter&gt;
    
&lt;/config&gt;</pre>
<p>
				The
				<code class="code">&lt;adapter/&gt;</code>
				tag has the attributes
			</p>
<p>
				@class: python class name of the implementing code, mandatory
			</p>
<p>
				@name: a short name, identifying this adapter. Name is mandatory, needs to be unique in the configuration.
			</p>
<p>
				The
				<code class="code">&lt;adapter/&gt;</code>
				tag has the child elements
				<code class="code">&lt;description/&gt;</code>
				a description for the adapter, purpose, technical details or alike.
				<code class="code">&lt;gpio/&gt;</code>
				each port pin adapter is using is listed here. Here, GPIO10 (this numbering is always BCM-related) is used, configured as an output. More on this later.
				<code class="code">&lt;input/&gt;</code>
				Each input of an adapter needs a separate
				<code class="code">&lt;input/&gt;</code>
				tag (when used, not used inputs do not need to be listed). 
				The @name-Attribute is mandatory and corresponds to the method name of the adapter code.
			</p>
<p>
				
<code class="code">&lt;gpio/&gt;</code>
				uses elements
				<code class="code">&lt;active/&gt;</code>
				and
				<code class="code">&lt;default/&gt;</code>
				.
			</p>
<p>Active is the initial state the code sets the pin when initiated.
				Default is the state the code leaves the pin when the code is gracefully shut down. This is done by pressing ctrl-C in console, or sending SIGINT in linux.
			</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchnames"></a>5.3.&nbsp;Inputs, outputs and scratch names.</h2>
</div>
</div>
</div>
<p>
				The inputs an adapter exposes are mapped to broadcast events from scratch. These mappings are provided by
				<code class="code">&lt;broadcast@name/&gt;</code>
				-Tags inside the input. The @name of the
				<code class="code">&lt;broadcast/&gt;</code>
				is used as 'text' in the scratch broadcast blocks. In most cases, there will be only one command element, as the purpose is pretty clear.
			</p>
<p>
				The
				<code class="code">&lt;broadcast@name/&gt;</code>
				can occur multiple times in one
				<code class="code">&lt;config/&gt;</code>
				file, triggering multiple adapters by one broadcast from scratch.
				This feature can be used for a 'startAll' or 'stopAll'-feature for some adapers.
			</p>
<p>
				The broadcast names will be in most projects logical names, like 'relaisOn', 'led_green_off'.
			</p>
<p>
				The names are case sensitive, so 'relaisOn' and 'RelaisOn' are different. Be sure to use exactly the same spelling on scratch and adapter side, otherwise
				commands are discarded. At runtime, information on mapping of scratch broadcasts to adapters is printed to the console when the '-v', the verbose switch in
				the command line is applied.
			</p>
<p>
				The configuration class in the system checks for errors in the configuration and will provide (hopefully) meaningful hints on how to correct problems.
			</p>
<p>

				The following 'stepper' example shows some advanced features.
			</p>
<pre class="screen">   &lt;adapter class='adapter.stepper.Stepper' name='x-direction' &gt;

        &lt;description&gt;Stepper class uses w0 for coil 0, 
                          w1 for coil 1 etc&lt;/description&gt;

        &lt;gpio port = 'GPIO14' alias='w0' &gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' default='high' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port = 'GPIO15' alias='w1' &gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' default='high' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port = 'GPIO17' alias='w2' &gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' default='high' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port = 'GPIO18' alias='w3' &gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' default='high' /&gt;
        &lt;/gpio&gt;

        &lt;input name='start'&gt;
            &lt;broadcast name='startA'/&gt;
        &lt;/input&gt;
        &lt;input name='stop'&gt;
            &lt;broadcast name='stopA'/&gt;
        &lt;/input&gt;
        &lt;input_value  name='speed'&gt;
            &lt;variable name='speedA'/&gt;
            &lt;variable name='speed'/&gt;
        &lt;/value&gt;
    &lt;/adapter&gt;</pre>
<p>

				As the adapter uses four GPIO Pins, these
				<code class="code">&lt;gpio/&gt;</code>
				-tags get an @alias-attribute to assign these pins to functionality inside the adapter.stepper.Stepper-class.
			</p>
<p>
				The
				<code class="code">&lt;input/&gt;</code>
				tags are pretty clear, the
				<code class="code">&lt;value/&gt;</code>
				-tag is providing configuration for values beeing sent from scratch to the adapter.
				In scratch 1.4, global variables are sent to the adapters. These names are defined with
				<code class="code">&lt;variable /&gt;</code>
				tags similiar to inputs.
			</p>
<p>
				Adapters with output values (which should be transmitted to scratch) are using the
				<code class="code">&lt;output_value/&gt;</code>
				-tag. A button sample is:
			</p>
<pre class="screen">   &lt;adapter class='adapter.gpio.GpioInput' name='button 22'&gt;
        &lt;!-- no description, urgg --&gt;
        &lt;gpio port = 'GPIO22'&gt;
            &lt;default dir='IN' pull='PUD_OFF' /&gt;
            &lt;active dir='IN' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;
        &lt;output_value name='button'&gt;
            &lt;sensor name='button22'/&gt;
        &lt;/output&gt;
        
        &lt;parameter name='poll.interval' value='0.5' /&gt;

    &lt;/adapter&gt;</pre>
<p>
				The
				<code class="code">&lt;output/&gt;</code>
				tag maps a logical name to a scratch sensor-update-name, here 'button22'. Here a 1-1 relation between output and command is assumed, as it is not useful to
				send one value to different variables in scratch.
			</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="other_parameters"></a>5.3.1.&nbsp;
                    Other features: parameters
                </h3>
</div>
</div>
</div>
<p>
                    Adapter can have parameter-tags, specifying constant config values. These are adapter specific, see adapter docs on which ones are needed and what default
                    values are.

                    </p>
<pre class="screen">        &lt;parameter name='poll.interval' value='0.5' /&gt;</pre>
<p>
                
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="other_webserver"></a>5.3.2.&nbsp;
                    Other features: webserver websocket plugin, html plugin
                </h3>
</div>
</div>
</div>
<p>
                    For one of the adapters (websocket), there was the need to have the embedded webserver to support custom websocket code and html pages.</p>
<p>To make this flexible, a plugin mechanism was implemented.</p>
<pre class="screen">        &lt;webserver&gt;
            &lt;!-- implement a web page  --&gt;
            &lt;route name='pendel' route='/adapter/pendel' /&gt;
            &lt;html name='pendel' 
                  path='websocket/pendel.html' 
                  comment='positional sensor from a smartphone' /&gt;
        &lt;/webserver&gt;
</pre>
<p>Tag <code class="code">&lt;webserver/&gt;</code> groups the entries. </p>
<p>Tag <code class="code">&lt;route/&gt;</code> defines the absolute path for the webapplication server to the websocket. </p>
<p>Tag <code class="code">route/@name</code> a descriptive name</p>
<p>Tag <code class="code">route/@route</code> an absolute path for the entry point of the websocket</p>
<p>The websocket protocol class is provided by the adapter and does not need configuration.</p>
<p>Tag <code class="code">&lt;html/&gt;</code> defines the location of additional web pages. Links to these pages are added to main page. </p>
<p>Tag <code class="code">html/@name</code> a descriptive name</p>
<p>Tag <code class="code">html/@path</code> a relative path for the page. Place these pages to htdocs/static/html/..</p>
<p>Tag <code class="code">html/@comment</code> a descriptive comment. May be empty.</p>
<p>The needed html pages are to be placed in <code class="code">htdocs/static/html/[html@path]</code>.
</p>
<p>
                    
</p>
<div class="mediaobject">
<img src="images/config/web_plugin.png" width="324"></div>
<p>
This is the 'injected' web link to the main page.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="lifecycle"></a>5.3.3.&nbsp;
					Adapter lifecycle
				</h3>
</div>
</div>
</div>
<p>
					Adapters get created (instantiated) by the configuration manager when reading the xml-file. When no errors occur, the configManager keeps the instance in a list of
					adapters for later reference.
				</p>
<p>
					Then parameters are set.
				</p>
<p>
					Adapters are started one after the other by setActive (True). There is no particular order within the adapters to get this event.
				</p>
<div class="note">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="icons/note.png"></td><th align="left"></th>
</tr>
<tr>
<td valign="top" align="left">
<p>
					If your application needs adapter 'A' to be startet after 'B', then most possibly you need a special implementation 'AB' which combines the two.
		</p>
</td>
</tr>
</table>
</div>
<p>
					When set to active, adapters should start regular work. This means to setup the GPIO, starting threads and whatever else might be needed. Setting the GPIO can
					be done by using the base adapter class' methods.
				</p>
<p>
					Adapters stop operation by setActive(False). Then threads should be stopped in a timely manner (less than 0.1 sec), and GPIO should be reset to default state. The
					adapters base class provides mechanisms to setup GPIO. These can be overwritten to achieve other behaviour.
				</p>
<p>
					There is no live after setActive(False). The adapters will be destroyed later and the code stops to work.
				</p>
<p>
					CPU load<br>
					Adapters should not poll and send values too often. Faster than some 20 to 50 updates per second are a challenge for the system, as the socket connection
					and also scratch on the receiving end needs cpu-cycles to perform work.
					Currently, each sensor-update is send separately.
				</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N102E9"></a>5.3.4.&nbsp;
					Simulation mode
				</h3>
</div>
</div>
</div>
<p>
					[TODO: not yet implemented]

					There are scenario where the code is run on a system with no GPIO access or deactivated GPIO access.

					Examples are:
					- a scratch code is developed on a Non-Pi system, with later deployment on Pi.
					- gpio-peripherals are available, but intentionally switched to inactive, as the hardware wiring is not yet complete or malfunctioning code would damage
					hardware. Think of a scratch-raspberry controlled soft ice machine, running cracy and vending never ending streams of sweet delight you have to dive in and
					find the emergency switch.
					- during test, some fancy input pattern are too difficult or too time consuming to be set up in real world.

					Simulation mode is started by setting operation state to 'simulation' by setSimulation(). This is optionally before setActive(True).
					In simulation mode, GPIO are not activated. Threads should be run as usual, bit GPIO will ignore any setting/getting value-commands.
				</p>
</div>
</div>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratchClient.adapters"></a>Chapter&nbsp;6.&nbsp;
            Adapter Types
        </h1>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.GPIO"></a>6.1.&nbsp;GPIO Adapter</h2>
</div>
</div>
</div>
<p>

                For the GPIO-Types, different libraries can be used: RPi.GPIO (default) or RPIO.
                RPIO has the ability to PWM drive the GPIO with DMA, producing stable pulses.
</p>
<p>
                GPIO Pins are named in BCM-Notation (e.g. GPIOnn), Pin headers (e.g. P1-13V2 for Version2) or other (for a specific adapter, IKG.IO.3 is used).
                The naming configuration is in /scratchClient/config/portMapping.xml
</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="adapter.GPIO.input"></a>6.1.1.&nbsp;GPIO Adapter, input</h3>
</div>
</div>
</div>
<p>
    Input type adapters read Buttons, switches and other type of binary signals.
                </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>adapter.gpio.GpioInput (sends value 0 for low, 1 for high input levels)
                </p>
<a name="N10306" class="indexterm"></a><a name="N1030B" class="indexterm"></a>
</li>
<li class="listitem">
<p>adapter.gpio.GpioValueInput (sends configurable values for low, high input levels)
                </p>
<p>On startup or whenever a value change is detected, the adapter sends configurable values. The level assignments can be changed.
                </p>
<a name="N10315" class="indexterm"></a><a name="N1031A" class="indexterm"></a>
</li>
<li class="listitem">
<p>adapter.gpio.GpioButtonInput (deprecated, use GpioEventInput; sends events on button pressed, button released)
</p>
</li>
<li class="listitem">
<p>
                adapter.gpio.GpioEventInput (sends events on button pressed, button released)
                </p>
<a name="N10325" class="indexterm"></a><a name="N1032A" class="indexterm"></a>
</li>
</ul>
</div>
<p>A nice application is the marshmallow button: two wires through a marshmallow form a contact: when squeezed, the button is pressed. See config/marshmallow.xml .</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="adapter.GPIO.output"></a>6.1.2.&nbsp;GPIO Adapter, output</h3>
</div>
</div>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>adapter.gpio.GpioOutput
                </p>
<a name="N10339" class="indexterm"></a>
</li>
<li class="listitem">
<p>adapter.gpio.GpioOutputPWM, pwm is 0 to 100%
                </p>
<a name="N10341" class="indexterm"></a>
</li>
</ul>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="adapter.GPIO.output.servo"></a>6.1.3.&nbsp;GPIO Adapter, output for Servo motors</h3>
</div>
</div>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>

<a name="N1034E" class="indexterm"></a>
<a name="N10352" class="indexterm"></a>
                
                adapter.gpio.GpioOutputPWMServo, pwm is 1ms (0 input value) to 2ms(100 input value), period length 20ms.
                The PWM adapter uses rpi.gpio library with soft-pwm. This causes jitter for the signals.
                </p>
<p>The output of this adapter can be inverted by configuration. This is needed if a simple (inverting) transistor level shifter is used. </p>
</li>
</ul>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="adapter.GPIO.output.stepper"></a>6.1.4.&nbsp;GPIO Adapter, output for Stepper motors</h3>
</div>
</div>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p> bipolar stepper driver
  <br>              adapter.stepper.BipolarStepper
                </p>
<a name="N10364" class="indexterm"></a><a name="N10369" class="indexterm"></a><a name="N1036E" class="indexterm"></a>
<div class="mediaobject">
<img src="images/motor/bipolar_Steckplatine.png" width="486"><div class="caption">Bipolar Stepper with L293D-Chip</div>
</div>
</li>
<li class="listitem">
<p>
    unipolar stepper driver
  <br>
    adapter.stepper.UnipolarStepperStep
  <br>
    adapter.stepper.UnipolarStepperModule
                </p>
<a name="N10387" class="indexterm"></a><a name="N1038C" class="indexterm"></a><a name="N10391" class="indexterm"></a>
</li>
</ul>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="adapter.GPIO.output.motor"></a>6.1.5.&nbsp;GPIO Adapter, output for PWM controlled Motor</h3>
</div>
</div>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
    hbridge motor driver driver (e.g. L293, two half bridges separately controlled)
  <br>
    adapter.gpio.GpioMotorPWM
     <br>
 sample configuration is config/config_hbridge_motor.xml
                </p>
<a name="N103A2" class="indexterm"></a><a name="N103A7" class="indexterm"></a>
</li>
</ul>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="adapter.GPIO.complex.various"></a>6.1.6.&nbsp;GPIO Adapter, various</h3>
</div>
</div>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
    rotary encoder, using two photointerrupters
  <br>
    adapter.encoder.GPIOEncoder
                </p>
<a name="N103B6" class="indexterm"></a><a name="N103B9" class="indexterm"></a>
</li>
<li class="listitem">
<p>
            seven segment driver
 <br>
            adapter.encoder.Gpio7segment
        </p>
<a name="N103C3" class="indexterm"></a><a name="N103C8" class="indexterm"></a>
</li>
</ul>
</div>
<p>
                An adapter designed to monitor the connection state with scratch is adapter.gpio.GpioStateOutput.
                When the scratchClient is started, the output is set to 'high'. When connection to scratch is established, the output blinks at 0.6 sec cycle time.
                Please note the naming of the port: these names are configurable as described in 
                <a class="xref" href="#scratchClient.configuration.gpioNames" title="9.2.&nbsp;GPIO Names">Section&nbsp;9.2, &ldquo;GPIO Names&rdquo;</a>.
            </p>
<a name="N103D2" class="indexterm"></a>
<pre class="screen">
    &lt;adapter class='adapter.gpio.GpioStateOutput'  name='state'&gt;
        &lt;description&gt;State display on IKG.IO.9&lt;/description&gt;

        &lt;gpio port='IKG.IO.9' alias='state'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
    &lt;/adapter&gt;</pre>
<p>
        
<a name="N103DB" class="indexterm"></a>
        <a name="N103E1" class="indexterm"></a>
        SHT015 humidity Sensor is using a 'wire' protocol, driven by GPIO. The protocol is not time critical.
        Adapter is adapter.wire_gpio.Wire_SHTx
    </p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="SPI"></a>6.2.&nbsp;SPI based Adaper</h2>
</div>
</div>
</div>
<p>
            SPI is a communication protocol for various devices. A concept of 'device handlers' is used to generalize the usage.
            When in a device multiple similiar data points are used, this is called 'channels'; used in e.g. ADC-devices.
        </p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N103ED"></a>6.2.1.&nbsp;WS2801 LED Stripe</h3>
</div>
</div>
</div>
<a name="N103F0" class="indexterm"></a><a name="N103F5" class="indexterm"></a>
<p>

                SPI can be used to emulate a shift register, as needed by a LED Strip with WS2801-Chip. The adapter is
                adapter.spiadapter.WS2801_Adapter.
            </p>
<p>In the distribution, there is a sample scratch program for the WS2801-stripe.</p>
<p>
                Start scratch with command
            </p>
<pre class="screen">scratch ~/scratchClient/scratch/ws2801/ws2801.sb</pre>
<p>
            
</p>
<div class="mediaobject">
<img src="images/ws2801/ws2801_scratch.png" width="378"></div>
<p>
                 The program provides some colored fields which can be clicked and add their color name to a list. When the data shall be send to the stripe, press 'send'. The list is converted to a variable 'led' then.
            </p>
<p>
            
</p>
<p>The scratchClient adapter converts color names to RGB-values and sends them out to the SPI-hardware.</p>
<p>
                start scratchClient
            </p>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -config scratch/ws2801/config_spi_ws2801.xml
                </pre>
<div class="mediaobject">
<img src="images/ws2801/stripe.png" width="378"></div>
<p>For the hardware connection, see your vendors documentation on the stripe. 
    </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10425"></a>6.2.2.&nbsp;ADC MCP3202</h3>
</div>
</div>
</div>
<a name="N10428" class="indexterm"></a><a name="N1042D" class="indexterm"></a>
<p>
                
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Adapter adapter.adc.ADC_MCP3202_10_Input 10 bit resolution.</p>
</li>
<li class="listitem">
<p> Adapter adapter.adc.ADC_MCP3202_12_Input 12 bit resolution, providing an optional low pass filter
                        </p>
</li>
</ul>
</div>
<p>

            
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1043C"></a>6.2.3.&nbsp;ADC MCP3008</h3>
</div>
</div>
</div>
<a name="N1043F" class="indexterm"></a><a name="N10444" class="indexterm"></a>
<p>
                
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Adapter adapter.adc.ADC_MCP3008_10_Input 10 bit resolution.</p>
<p>8 channel single ended input operation of this device.</p>
</li>
</ul>
</div>
<p>

            
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10452"></a>6.2.4.&nbsp;MAX31855 Thermocouple</h3>
</div>
</div>
</div>
<a name="N10455" class="indexterm"></a><a name="N1045A" class="indexterm"></a><a name="N1045F" class="indexterm"></a>
<p>
                The adapter adapter.spiAdapter.MAX31855_Adapter provides three output values:
                temp_intern, float value, scaled to &deg;C
                temp_wire, float value, scaled to &deg;C
                the error bits of the device are converted to a string value.
                temp_error, string value,
                </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p> '' empty string, no error</p>
</li>
<li class="listitem">
<p>'SCV: short to Vcc'</p>
</li>
<li class="listitem">
<p>'SCG: short to GND'</p>
</li>
<li class="listitem">
<p>'OC: open circuit'</p>
</li>
</ul>
</div>
<p>
                start scratchClient
            </p>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -config config/config_max31855.xml
            </pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10476"></a>6.2.5.&nbsp;MCP23S17 16-Bit IO Expander; PIFACE board</h3>
</div>
</div>
</div>
<a name="N10479" class="indexterm"></a><a name="N1047E" class="indexterm"></a><a name="N10483" class="indexterm"></a>
<p>
                The MCP23S17 is a SPI connected port expander with 16 GPIO pins. The adapter adapter.mcp23s17.MCP23S17_Adapter controls this device.
                
            </p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1048A"></a>6.2.5.1.&nbsp;Setup on a breadboard</h4>
</div>
</div>
</div>
<p>
                    
</p>
<div class="mediaobject">
<img src="images/mcp23s17/MCP23S17_Steckplatine.png" width="486"></div>
<p>
                
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N1049B"></a>6.2.5.2.&nbsp;PiFace board</h4>
</div>
</div>
</div>
<p>
                    The MCP23S17 is used on the PiFace board. The sample configuration config/config_mcp23s17.xml can be used to drive this board.
                        When using piFace, then do NOT use GPIO25 (this is INTB in MCP23S17) 
                
                 </p>
<p>
                    In scratch, create variables 'out_0', 'out_1' .. 'out_7' to drive the outputs. Values are '0', '1', 'true', 'false'. For the relais, the variables 'relais_0', 'relais_1' can be used.
                    The variable 'all' sets all outputs in parallel.
                </p>
<p>
                    scratchClient sends sensor values 'inp_0', 'inp_1', .. 'inp_7'; the values are '0' and '1'.
                </p>
<p>
                    In the configuration file, the scratch names can be changed to be more useful. If for example a 'forwardMotor' is attached to relais_0, just rename 'relais_0' to 'forwardMotor'.
                </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N104A6"></a>6.2.5.3.&nbsp;Configuration details</h4>
</div>
</div>
</div>
<p>
                    The device 23s17 allows to have up to 8 devices 'in parallel' on one SPI chip select. These devices have hardwired distinct slave adresses.
                    In the configuration, this slave address must be given by the parameter '23s17.addr'.
                </p>
<pre class="screen">        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
        
        &lt;!-- slave address must match the hard wired slave address 
             on the device [0..7] --&gt;
             
        &lt;parameter name='23s17.addr' value='0' /&gt;</pre>
<p>
                    The IO direction for the port pins is defined by &lt;io/&gt;-tags.
                </p>
<pre class="screen">
        &lt;io id='GPA0' dir='out' /&gt;
        &lt;io id='GPA1' dir='out' /&gt;
        &lt;io id='GPA2' dir='out' /&gt;
        &lt;io id='GPA3' dir='out' /&gt;

        &lt;io id='GPA4' dir='out' /&gt;
        &lt;io id='GPA5' dir='out' /&gt;
        &lt;io id='GPA6' dir='out' /&gt;
        &lt;io id='GPA7' dir='out' /&gt;

        &lt;io id='GPB0' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB1' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB2' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB3' dir='in' pullup='weak' /&gt;

        &lt;io id='GPB4' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB5' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB6' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB7' dir='in' pullup='weak' /&gt;</pre>
<p>It is generally a good idea to define all of the port pins. Technically it is needed to define those which are used in the application.
                    The id-values are predefined and must be used as seen here.
                </p>
<p>
                    For ports defined as dir='out' outputs, the corresponding adapter input methods can be used:
                </p>
<pre class="screen">        &lt;input_value name='inputGPA4'&gt;
            &lt;!-- variable name is the name of the scratch variable 
                 which is send out to the adapter. --&gt;
            &lt;variable name='input_4'/&gt;
        &lt;/input_value&gt;
 </pre>
<p>
                    For ports defined as dir='in' inputs, the corresponding adapter output methods can be used:
                </p>
<pre class="screen">        &lt;output_value name='outputGPB2'&gt;
            &lt;sensor name='output_2'/&gt;
        &lt;/output_value&gt;
 </pre>
<p>The variables send out from scratch are '0', '1' to set the output pin of the 23s17 to low, high.</p>
<p>The sensor values received from scratch are '0', '1' for the input pin of the 23s17 receiving low, high.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N104BF"></a>6.2.5.4.&nbsp;Start scratchClient</h4>
</div>
</div>
</div>
<p>
                    scratchClient startup does not need special considerations.
                </p>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -C config/config_mcp23s17.xml
                </pre>
<p>
                    The file config/config_mcp23s17.xml is an example of a full functional configuration.
                </p>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="i2c"></a>6.3.&nbsp; I2C-Adapters</h2>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N104CC"></a>6.3.1.&nbsp; ADS1015 ADC Converter</h3>
</div>
</div>
</div>
<a name="N104CF" class="indexterm"></a><a name="N104D4" class="indexterm"></a>
<p>
                The Adapter adapter.i2cAdapter.ADC_ADS1015_Input reads values from an ADS1015. The company adafruit sells a breakout board with this chip.
            </p>
<p>
                See sample configuration scratchClient/config/config_adc_ads1015.xml.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N104DD"></a>6.3.2.&nbsp; BH1750 Luminosity Sensor</h3>
</div>
</div>
</div>
<a name="N104E0" class="indexterm"></a><a name="N104E5" class="indexterm"></a>
<p>
                The Adapter adapter.i2cAdapter.Luminosity_BH1750_Input reads values from a BH1750.
                Values are luminosity in lux (lx).
            </p>
<p>
                See sample configuration scratchClient/config/config_luminosity_bh1750.xml.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N104EE"></a>6.3.3.&nbsp; BMP085 barometric pressure sensor</h3>
</div>
</div>
</div>
<a name="N104F1" class="indexterm"></a><a name="N104F6" class="indexterm"></a>
<p>
                The Adapter adapter.i2cAdapter.Pressure_BMP085_Input reads values from a BMP085.
                Values are pressure and temperature.
            </p>
<p>
                See sample configuration scratchClient/config/config_pressure_bmp085.xml.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N104FF"></a>6.3.4.&nbsp; PCA9685 16-channel, 12-bit PWM LED controller</h3>
</div>
</div>
</div>
<a name="N10502" class="indexterm"></a><a name="N10507" class="indexterm"></a>
<p>
                The Adapter adapter.i2cAdapter.PWM_PCA9685 controls this device.
            </p>
<p>
                See sample configuration scratchClient/config/config_PCA9685.xml
            </p>
<p>
                In scratch, create variables 'channel_0', 'channel_1', .. 'channel_11'. The values are 0..100. Value 0 is no signal; 100 is full cycle filled.
            </p>
<p>
                In scratch, create variables 'servo_0', 'servo_1', .. 'servo_11'. The values are 0..100. Value 0 is 1ms; 100 is 2ms in a 20ms period.
            </p>
<p>
                The PCA9865 has 12 bit resolution, which is not challenged with values from scratch in range 0..100. This value is choosen for consistency with other adapters. 
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10516"></a>6.3.5.&nbsp; SN3218 LED controller, piGlow board</h3>
</div>
</div>
</div>
<a name="N10519" class="indexterm"></a><a name="N1051E" class="indexterm"></a><a name="N10523" class="indexterm"></a>
<p>
                The Adapter adapter.i2cAdapter.PWM_SN3218 controls the SN3218-chip. This chip is used on piGlow board.
                
            </p>
<p>The usual i2cdetect-command does not report this chip. Use the -q-switch for this device.
            </p>
<pre class="screen">root@raspberrypi:/home/pi# i2cdetect -y -q 1
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- --
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
50: -- -- -- -- 54 -- -- -- -- -- -- -- -- -- -- --
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
70: -- -- -- -- -- -- -- --
root@raspberrypi:/home/pi#
</pre>
<p>
            
</p>
<p>
                The sample configuration uses some 'common variables. 'all' is used for all LED in sync.
                 The 'branch_0', 'branch_1', 'branch_2' are for the three branches for the piGlow board.
                The individual LED are addressed with hex numbers, like 'channel_0A' or 'channel_11'. These names are case sensitive.
            </p>
<p>

</p>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -c config/config_SN3218.xml</pre>
<p>
            
</p>
<p>
                See scratchClient/scratch/SN3218/piglow.sb for a sample scratch program.
            </p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="w1-gpio"></a>6.4.&nbsp;GPIO Wire adapter, w1-gpio, DS1820</h2>
</div>
</div>
</div>
<a name="N1053E" class="indexterm"></a><a name="N10543" class="indexterm"></a><a name="N10548" class="indexterm"></a><a name="N1054D" class="indexterm"></a>
<p>
            Temperature sensor DS1820 needs one gpio pin for the connection. The timing is quite strict, but a kernel driver is available.
        </p>
<p>
            Adapter
            <code class="code">adapter.w1_gpio.W1_DS1820</code>
            uses 'w1-gpio' kernel driver.
        </p>
<p>Connect ds1820 signal line to GPIO4, pullup needed 4k7 Ohm to 3.3V.</p>
<p>
            The adapter configuration sample is
            <code class="code">config/config_temperature_ds1820.xml</code>
            . In this file, you need to configure the address of your ds1820.
        </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
                    Connect DS1820 to raspberry pi, dataline is (usually) GPIO4. Add a resistor 4k7 from data to 3.3V.
                </p>
</li>
<li class="listitem">
<p>
                    Start kernel driver: 
                    For PI2, add a line to /boot/config.txt
                    </p>
<pre class="screen">dtoverlay=w1-gpio,gpiopin=4</pre>
<p>Needs a reboot to take effect.
                   </p>
</li>
<li class="listitem">
<p>
                    The driver creates a directory in
                    <code class="code">/sys/bus/w1/devices</code>
                    , which contains subfolders for each DS1820 connected. The name of the folder is composed of a family code and the unique device id.<br>
                    DS1820 und DS18S20 have familycode 10, DS18B20 use 28 and DS1822 use 22.<br>
                    check the directory name and configure in
                    <code class="code">config/config_temperature_ds1820.xml</code>. Example:
                    </p>
<pre class="screen">&lt;parameter name='w1.device' value='10-0008023b57b9'</pre>
<p>

                
</p>
</li>
</ul>
</div>
<p>
            The sample configurations contain a config file for this device. Start scratchClient with
            </p>
<pre class="screen">cd ~/scratchClient
python src/scratchClient.py -c config/config_temperature_ds1820.xml</pre>
<p>
            For this special purpose, no root permission is needed. The file written by the kernel driver is public for reading.
        </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="remote_communication"></a>6.5.&nbsp;Remote Communications Adapter</h2>
</div>
</div>
</div>
<a name="N10584" class="indexterm"></a><a name="N10589" class="indexterm"></a>
<p>

            The adapter class adapter.remote.CommunicationAdapter provides scratch to scratch communication.
            There is a server process needed on the network [host, port=42002].
        </p>
<pre class="screen">python src/scratchCommunicationServer.py</pre>
<p>It is recommended to install scratchCommunicationServer on a machine with a fixed ip address. It can run in parallel to scratchClient on a machine.</p>
<p>
            The adapters are assigned to groups, so within one network the communication server keeps different groups separate from each other.
            Sample configuration is /scratchClient/config/config_remote_0.xml or config_remote_1.xml
        </p>
<p>
        Groups are useful when in a classroom environment where pairs of two exercise a communication sample, but only one scratchCommunicationServer is running. Then each group gets its own name, and interferences are avoided.
        </p>
<p>
            Broadcast signals defined as inputs to the adapter are propagated to all other registered adapters (except the one it came from). Outputs of the adapter are
            propagated towards local scratch.
        </p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1059A"></a>6.5.1.&nbsp;How to setup configuration files.</h3>
</div>
</div>
</div>
<p>A simple szenario is used for the explanation: In a school class, three computers with scratch should perform a chain reaction. 'computer_0' lights a LED and sends 'command_A' to 'computer_1'. When 'computer_1' receives this event, it lights a LED and sends 'command_B' to 'computer_2', which lights a LED.</p>
<p>With an UML sequence diagram, the process gets clear.</p>
<div class="mediaobject">
<img src="images/communicationAdapter/sequence.png" width="324"></div>
<p>Good planning is needed for a successful setup.</p>
<p>For 'computer_0', there is only one outgoing event.
            </p>
<pre class="screen">        &lt;remote type='forward'&gt;
            &lt;broadcast name='command_A'/&gt;  
        &lt;/remote&gt;
</pre>
<p>
            
</p>
<p>For 'computer_1', there is one incoming event and one outgoing event.
            </p>
<pre class="screen">        &lt;remote type='forward'&gt;
            &lt;broadcast name='command_B'/&gt;  
        &lt;/remote&gt;
        &lt;remote type='receive'&gt;
            &lt;broadcast name='command_A'/&gt;  
        &lt;/remote&gt;
</pre>
<p>
            
</p>
<p>Finally for 'computer_2', there is one incoming event.
            </p>
<pre class="screen">
        &lt;remote type='receive'&gt;
            &lt;broadcast name='command_B'/&gt;  
        &lt;/remote&gt;
</pre>
<p>
            
</p>
<p>For each computer, prepare the appropriate config file and start scratchClient with it.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N105BF"></a>6.5.2.&nbsp;Sample Application 'railway control'</h3>
</div>
</div>
</div>
<p>
                There is a sample implementation of a remote controllable railway track available. To operate this, you need two computers A and B on a network.
                It is not
                possible to have this running on one system only, as two scratch instances are needed and the server ports 42001 can't be adjusted.
                A screencast of this
                sample is available on <a class="ulink" href="http://youtu.be/o-A9yyL5ugE" target="_top">youtube</a>
            
</p>
<p>
                Adjust hostaddress in scratch/remote/config_lokomotive_remote.xml and scratch/remote/config_lokomotive_remote_control.xml, it should contain IP-address or
                hostname of Computer A.
                </p>
<pre class="screen">        &lt;parameter name="server" value="192.168.2.102" /&gt;</pre>
<p>
                Distribute this file to Computer A and Computer B.
            </p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N105CD"></a>6.5.2.1.&nbsp;Context Diagram</h4>
</div>
</div>
</div>
<p>
                    
</p>
<div class="mediaobject">
<img src="images/remote/context.png" width="513"></div>
<p>

                
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N105DE"></a>6.5.2.2.&nbsp; Computer A</h4>
</div>
</div>
</div>
<p>

                    start scratch
                    </p>
<pre class="screen">scratch ~/scratchClient/scratch/remote/lokomotive_remote.sb</pre>
<p>


                    start scratchClient, in a terminal window.
                    </p>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -c scratch/remote/config_lokomotive.xml
                    </pre>
<p>

                    
</p>
<div class="mediaobject">
<img src="images/remote/lokomotive_remote_stage.png" width="270"></div>
<p>

                    start server process in a terminal window:
                    </p>
<pre class="screen">cd ~/scratchClient
python src/scratchCommunicationServer.py</pre>
<p>

                
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title">
<a name="N105F8"></a>6.5.2.3.&nbsp;Computer B</h4>
</div>
</div>
</div>
<p>
                    start scratch
                    </p>
<pre class="screen">scratch ~/scratchClient/scratch/remote/lokomotive_remote_control.sb</pre>
<p>

                    
</p>
<div class="mediaobject">
<img src="images/remote/lokomotive_remote_control.png" width="270"></div>
<p>

                    Clicking on the arrows should set the corresponding track directions. But scratchClient needs to be started first.

                    start scratchClient in a terminal window:
                    </p>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -config scratch/remote/config_lokomotive_control.xml</pre>
<p>
                    Commands from control panel on computer B scratch instance are transferred to computer A.
                </p>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="os_adapter"></a>6.6.&nbsp;Operation System Adapters</h2>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="tts"></a>6.6.1.&nbsp;Text To Speech Adapter</h3>
</div>
</div>
</div>
<a name="N10617" class="indexterm"></a><a name="N1061A" class="indexterm"></a>
<p>
                Adapters are not limited to GPIO or SPI based devices, but can control applications on the computer as well.
                Ad hoc speech synthesis is available with
                'festival' or 'pico2wave' text to speech applications,
                There are audio outputs available in scratch, but only prerecorded snippets. Text to speech allows arbitrary text to be
                produced.
                You need to have the tools installed.
</p>
<p>
                Sample configuration is config/config_texttospeech_festival.xml
</p>
<p>
                Sample configuration is config/config_texttospeech_pico2wave.xml
</p>
<p>
                Speech output is quite slow. The adapter queues the incoming data up to a length given by the
                parameter 'queue.max'. When queue size is exceeded, new entries are
                discarded and a warning log message is issued.
</p>
<p>
                Comment
</p>
<p>              
                Keep in mind that scratch sends
                values only on changes. Repeating the same text multiple times works only if the text is (silently) modified, e.g. by appending
                blanks and removing blanks in
                turn.
                Festival is well suited for english language. German text will sound a little bit strange. pico2wave has better quality output.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="broadcast_adapter"></a>6.6.2.&nbsp;Broadcast Adapter</h3>
</div>
</div>
</div>
<a name="N1062F" class="indexterm"></a>
<p>
                Sending broadcast events from adapter to scratch when remote communications is established. Use this to start a script automatically.
            </p>
<p>
                adapter.broadcast.ScratchStartclickedAdapter
            </p>
<pre class="screen">    &lt;adapter class='adapter.broadcast.ScratchStartclickedAdapter'  name='startClick'&gt;
    
        &lt;output name='command'&gt;
            &lt;broadcast name='scratch-startclicked'/&gt;
        &lt;/output&gt;
        &lt;description&gt;Send startclicked&lt;/description&gt;
    &lt;/adapter&gt;

</pre>
<p>
                sends scratch-startclicked when remote communication is established. This is a 'green flag' event for scratch 1.4.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="time_adapter"></a>6.6.3.&nbsp;System Time Adapter</h3>
</div>
</div>
</div>
<a name="N10640" class="indexterm"></a>
<p>
                Scratch 1.4 has no system time available. This adapter provides current system time to scratch. 
            </p>
<p>
                adapter.broadcast.TimeAdapter
            </p>
<p>See configuration file config/config_time.xml for a sample.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="command_line"></a>6.6.4.&nbsp;Operating system commands</h3>
</div>
</div>
</div>
<a name="N1064F" class="indexterm"></a><a name="N10652" class="indexterm"></a>
<p>
                Control applications on the computer with this adapter. It will execute a os-command configured.
            </p>
<p>
                Sample configuration is config/config_linux.xml
                </p>
<pre class="screen">&lt;adapter class='adapter.linux.Linux_Adapter'  name='sample'&gt;
        &lt;description&gt;linux os command exectution&lt;/description&gt;

        &lt;input name='trigger'&gt;
            &lt;!-- scratch event name --&gt;
            &lt;broadcast name='execute'/&gt;
        &lt;/input&gt;
        
        &lt;parameter name="os.command" value="ls -l"  /&gt;
        &lt;parameter name="queue.max" value="5"  /&gt;
    &lt;/adapter&gt;
                </pre>
<p>
            
</p>
<p>
                Start sample configuration
                </p>
<pre class="screen">cd ~/scratchClient
python src/scratchClient.py -c config/config_linux.xml</pre>
<p>
            
</p>
<p>
                Sample scratch code
                
                </p>
<div class="mediaobject">
<img src="images/linux/linux.gif" width="216"></div>
<p>
            
</p>
<p>
                Programs executed should not run long time.
            </p>
<p>
                The adapter queues the incoming data up to a length given by the parameter 'queue.max'.
                When queue size is exceeded, new entries are
                discarded and a warning log message is issued.
            </p>
<p>
                The commands executed are configured in configuration file. These commands are execute in the context of the user who started scratchClient.
                Avoid starting scratchClient as root when in doubt.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="command_line_aplay"></a>6.6.5.&nbsp;Linux 'aplay' adapter</h3>
</div>
</div>
</div>
<a name="N1067B" class="indexterm"></a><a name="N1067E" class="indexterm"></a>
<p>
            Play wav-files using linux aplay command. This adapter allows some more flexibility than the scratch build in audio replay, as the ALSA-device can be defined. On
            USB-adapters, higher quality can be achieved.
        </p>
<p>
            The linux command used is 'aplay -D device dir/file'.
        </p>
<p>
            Place the files to play in file system directory. Or use the already available files in e.g. /opt/sonic-pi/etc/samples. These files are NOT included in the
            scratch code. So when you move your scratch application to another computer, you need to move your files too.
        </p>
<div class="mediaobject">
<img src="images/linux/linux_aplay.gif" width="216"></div>
<p>
            The code snipped shows how to play one sound repeatedly. As scratch only transmits variables when the value changes, the file name is set to 'blank' in between.
        </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="command_line_arecord"></a>6.6.6.&nbsp;Linux 'arecord' adapter</h3>
</div>
</div>
</div>
<a name="N1069A" class="indexterm"></a><a name="N1069D" class="indexterm"></a>
<p>
               Record wav-files using linux arecord command. This adapter allows some more flexibility than the scratch build in recording,and is run time controllable by scripts
            </p>
<p>
               The linux command used is 'arecord -D device dir/file'.
            </p>
<p>
               Set file name first.
            </p>
<p>
               Start recording with an event, and stop with an event. There is a timeout provided in case scratch misses to send the stop event. This timeout feature limits space consumption in file system.
            </p>
<p>
               These files are NOT included in the scratch code. So when you move your scratch application to another computer, you need to move your files too.
            </p>
<p>
               Protect privacy: do not record personal communication without permission.
            </p>
<div class="mediaobject">
<img src="images/linux/linux_arecord.gif" width="216"></div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="command_line_speechrecognition"></a>6.6.7.&nbsp;Linux speech recognition adapter</h3>
</div>
</div>
</div>
<a name="N106BD" class="indexterm"></a><a name="N106C0" class="indexterm"></a><a name="N106C3" class="indexterm"></a>
<p>
            There are speech recognition systems available which run on raspberry pi. Pocketsphinx is an example.
        </p>
<p>
            Pocketsphinx needs a quite complicated installation procedure. It is described in
            <a class="ulink" href="https://wolfpaulus.com/journal/embedded/raspberrypi2-sr/" target="_top">installation instruction</a>.
        </p>
<p>
            Running pocketsphinx in countinuous mode needs quite a lot of CPU power. So I decided to run it in batch mode. This is convenient for short sequences of speech. Use
            the arecord-adapter to record sound snippets, and process these by the recognition adapter.
        </p>
<p>
            For sending text from scratchClient to scratch a protocol is implemented. ScratchClient sets the 'text'-variable, and then sends an event 'textAvailable' (or
            whatever is configured in the adapter xml). When data are processed in scratch, then scratch sends an acknowledge 'textAcknowledge' to scratch client.
        </p>
<p>
            See a scratch sample code in
            <code class="code">scratch/linux/speechRecognition.sb</code>
            
</p>
<div class="mediaobject">
<img src="images/linux/asr_scratch.gif" width="324"></div>
<p>
             The data received from scratchClient are added to a list. Another script takes these data from the list and displays then with a 'think'-action. Perhaps
            there are more useful things which could be controlled.
        </p>
<p>
            Adjust the command line given in the adapter config file according to your needs and check this first in a terminal window.
            </p>
<pre class="screen">
&lt;parameter name ='command.line' 
           value='pocketsphinx_continuous -hmm /usr/local/share/pocketsphinx/model/en-us/en-us  \
                                          -lm 0609.lm -dict 0609.dic -samprate 16000/8000/48000 \
                                          -logfn /dev/null                                      \
                                          -infile ${sound.dir}/${sound.file}' /&gt;
        </pre>
<p>
        Please note that this command line is from a developement system. The dictionary '0609' was set up for some numbers and commands. This needs adjustment for each environment. 
        </p>
<p>
            Start this sample with scratchClient
            </p>
<pre class="screen">python src/scratchClient.py -c config/config_linux_a_ASR.xml
            </pre>
<p>
        
</p>
<p>
            pocketsphinx prints recognized text line by line; fast spoken words are in one line. Silence breaks cause new lines to be produced.

        </p>
<p>
            An UML sequence diagram best explains the sequence of commands and the protocol.
        </p>
<div class="mediaobject">
<img src="images/linux/linux_a_ASR_sequence.png" width="378"></div>
<p>(1,2) The processing is started by an 'execute' event. The linux process is created.
        </p>
<p>(3..7) A line of text from the process is read into scratchclient and written to a sensor variable 'text'. Then a textAvailable Event is issued and
            scratch should process the data.
            When processing is complete, a textAcknowledge event to scratchClient is sent.
        </p>
<p>(8..12) Just another example of a text sent.
        </p>
<p>(13,14) If the process terminates, a 'complete'-Event is sent towards scratch.
        </p>
<p>
            This adapter is not limited to speech recognition; it can be used with any process which outputs lines of text to stdin.</p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="complex"></a>6.7.&nbsp;Telephone Dial Plate Adapter</h2>
</div>
</div>
</div>
<a name="N10700" class="indexterm"></a><a name="N10703" class="indexterm"></a>
<p>

            
</p>
<div class="mediaobject">
<img src="images/dialplate/dialplate.png" width="270"></div>
<p>

            A dialplate as seen here has two switches.
            </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Contact 'nsi' is delivering pulses.</p>
</li>
<li class="listitem">
<p>Contact 'nsa' is closed when the plate is turned.</p>
</li>
</ul>
</div>
<p>


            The adapter adapter.encoder.GPIODialPlateEncoder is handling the plate. It needs two GPIO pins.
            Polling interval is changing for this adapter. When not used (contact 'nsa'), the polling interval is 0.2 sec. When active the polling interval is 5ms.
        </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="special"></a>6.8.&nbsp;Adapters for special purpose Devices</h2>
</div>
</div>
</div>
<p></p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="special.328.adc"></a>6.8.1.&nbsp;Atmel atmega328 with custom firmware as ADC</h3>
</div>
</div>
</div>
<a name="N10721" class="indexterm"></a><a name="N10726" class="indexterm"></a>
<p>When looking for inexpensive, breadboard-friendly AD-Converters the popular Atmel atmega328 can be used.
                This device has an 8-channel AD-Converter.
                The controller needs a custom firmware, is interfaced by SPI and provides a switchable LED.
                A description is available on my website heppg.de, &ldquo;Atmel 328-Prozessor als AD-Wandler&rdquo;.
                The SPI communication is choosen, as it is used to flash the chip and wiring is available.
                Interfacing this device to scratchClient needs SPI communication and the RESET-Line for the processor.
                The adapter adapter.atmel328_adapter.Atmel328_ADC_Adapter provides functionality for this setup. It is not generic, but a proof of concept for a SPI/GPIO
                based setup. Sample configuration is in config_adc_atmel328.xml.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="special.328.frequency"></a>6.8.2.&nbsp;Atmel atmega328 with custom firmware as frequency counter</h3>
</div>
</div>
</div>
<a name="N10731" class="indexterm"></a>
<p>The firmware in the atmega328 allows for frequency measurement. See 'steckbrett_328_en.pdf' for reference.
            </p>
<p>Sample configuration is in config_adc_atmel328.xml</p>
<p>The remote coprocessor is connected by SPI.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="special.328.dht22"></a>6.8.3.&nbsp;Atmel atmega328 with custom firmware for DHT22, DHT11</h3>
</div>
</div>
</div>
<a name="N10740" class="indexterm"></a><a name="N10745" class="indexterm"></a>
<p>There is a firmware for the DHT22, DHT11 device. </p>
<p>
            The temperature, humidity sensor DHT22 is a quite inexpensive sensor, well suited for microcontroller applications. It uses same protocol as DHT11. It is
            connected by a single wire, needs 5ms for a read cycle, but a quite challenging protocol where the pulse width gives '0' or '1' bit values.
        </p>
<p>
            This is a typical application for a coprocessor for raspberrypi. For an atmel328, it is not a challenge to handle this protocol.
        </p>
<p>
            
<a class="ulink" href="http://heppg.de/ikg/wordpress/?page_id=6" target="_top">See documentation for DHT22 </a>
        
</p>
<p>Sample configuration is in config/config_dht22_atmel328.xml</p>
<p>The remote coprocessor is connected by SPI.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="special.serial.sim800"></a>6.8.4.&nbsp;Adapter for SIM800 GSM Modem, SMS support</h3>
</div>
</div>
</div>
<a name="N1075E" class="indexterm"></a><a name="N10763" class="indexterm"></a>
<p>
            Receiving and sending SMS text messages is possible with the adapter adapter.serialAdapter.SIM800_Adapter.
            The hardware ist the adafruit fona SIM800 breakout board. Connection is made from rx, tx to the tx, rx of the RaspberryPi. Follow the instructions from
            adafruit to setup the module.
        </p>
<p>
            For this board, you need
            </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>a SIM card</p>
</li>
<li class="listitem">
<p>Lipoly Battery, 500mA or larger</p>
</li>
<li class="listitem">
<p>micro USB charger for the board in addition to this needed for Raspberry Pi</p>
</li>
<li class="listitem">
<p>antenna</p>
</li>
</ul>
</div>
<p>
        
</p>
<p>
            Basic hardware setup, cited from adafruit webpage.<br>
            Vio - THIS IS THE MOST IMPORTANT PIN! This is the pin that you MUST drive with an external voltage from 3V-5V to set the logic level converter. The converter
            also buffers the indicator LEDs so NOTHING will appear to work unless this pin is powered! You should set the voltage to whatever voltage your
            microcontroller uses for logic. A 5V micro (like Arduino) should have it be 5V, a 3V logic micro should set it to 3V.
            For SMS, I did not use the other connectors. For automated startup, the 'Key' would be nice to use.
            Rx,Tx are connected to the Raspberry. If you are not sure on wiring, use serial 1kOhm to protect the Pi.
        </p>
<p>
            Software installation hints:<br>
            The /dev/ttyAMA0 must be removed from the /boot/cmdline.txt and /etc/inittab.
            For python, install pyserial
            </p>
<pre class="screen">sudo pip install pyserial</pre>
<p>
            Edit the configuration file
            <code class="code">~/scratchClient/config/config_sim800.xml</code>
            :
            </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>provide the phone number to send sms to</p>
</li>
<li class="listitem">
<p>and provide the pin for the sim card.</p>
</li>
</ul>
</div>
<p>
            
</p>
<pre class="screen">        &lt;parameter name='sim.pin' value='NNNN' /&gt;
        &lt;parameter name='remote.number' value='NNNNNNNNNNNN' /&gt;
</pre>
<p>
            Start the scratchClient with
            </p>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient -c config/config_sim800.xml -d</pre>
<p>
            The debug switch is highly recommended, as error output is available only in the log file.
        </p>
<p>
            Manually start the modem by pressing the button on the breakout board. This is by purpose not automated, in order to have control on cost by sending sms.
            In scratch, the variable sim_out is used to transmit the sms send request. Empty (blank) strings will not be transmitted.
            The sensor value sim_in receives the values from the modem.
            </p>
<div class="warning">
<table border="0" summary="Warning">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Warning]" src="icons/warning.png"></td><th align="left"></th>
</tr>
<tr>
<td valign="top" align="left">
<p>Please be aware that sending sms causes cost. Sending rate with programs can be quite high, so carefully check the logic. For this reason, no
                    automatic startup
                    of the modem is provided, which allows some control on when the modem is available.
                </p>
</td>
</tr>
</table>
</div>
<p>

        
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.test"></a>6.8.5.&nbsp;Test Adapter</h3>
</div>
</div>
</div>
<p>For testing purposes, there is the need for looking into details of the communication protocol, and sending values to scratch without the need for
            attached hardware.</p>
<p>
            
<code class="code">adapter.test.TestAdapter</code>
            sends values towards scratch, changing each cycle.
        </p>
<p>When only this adapter is configured, then scratchClient does run also on windows or other hardware than raspberry pi.</p>
<p>
            Values send every second.
            </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>iValue, integer values, incremented</p>
</li>
<li class="listitem">
<p>
                        sValues, string values with 'umlaut' utf-8 chars
                        <code class="code"> ['apfel', 'apfel&auml;&ouml;&uuml;', '&auml;&ouml;&uuml;' ]</code>
                    
</p>
</li>
<li class="listitem">
<p>
                        fValues, different decimal places, including 19.0
                        <code class="code">[18.8, 18.9, 19.000, 19.123, 19.2]</code>
                    
</p>
</li>
</ul>
</div>
<p>
            Values send only once at startup
            </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>test22, integer value 1; use the web interface at localhost:8080 to edit and send values as needed.</p>
</li>
</ul>
</div>
<p>
            Events
            </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>event 'testEvent'</p>
</li>
</ul>
</div>
<p>
        
</p>
<p>Start of scratchClient:</p>
<pre class="screen">cd ~/scratchClient
python src/scratchClient.py -c config/config_test.xml -d </pre>
<p>
            No superuser rights are needed for this setup, as no hardware specific drivers are connected. When running scratch on a different host, use command line
            switch
            <code class="code">-host [ip]</code>
            to connect to a remote scratch instance.
        </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.servoblaster"></a>6.8.6.&nbsp;Servoblaster</h3>
</div>
</div>
</div>
<a name="N107D3" class="indexterm"></a><a name="N107D6" class="indexterm"></a><a name="N107DB" class="indexterm"></a>
<p>Servoblaster is software to DMA-control servo units with pulses from 1 to 2ms, frequency 50 Hz.</p>
<p>It can also be used to full scale pwm control signals to drive LED or alike, but current implementation of the adapter only supports servo signals.
        </p>
<p>
            See
            <a class="ulink" href="https://github.com/richardghirst/PiBits/tree/master/ServoBlaster" target="_top">servoblaster at github</a>
        
</p>
<p>
            The software is controlled by writing commands to /dev/servoblaster; example is
            </p>
<pre class="screen">echo '5=1200us' &gt; /dev/servoblaster</pre>
<p>
        
</p>
<p>The adapter adapter.servoblaster.ServoBlaster is controlling 8 channels, see config file config/config_servoblaster.xml for a sample configuration.
        </p>
<p>Please note that the integration into the GPIO-system of other adapters is not available, so duplicate use of GPIO will not be detected.</p>
<p>Scratch can send values from 0..100, which corresponds with 1ms to 2ms servo signals.</p>
<p>The adapter writes to /dev/servoblaster, there are checks whether this pipe exists. A reconnect logic handles restarts of servoblaster daemon.</p>
<pre class="screen">#
# start servoblaster daemon separately, it is not started by scratchClient !
#                            
cd ~/scratchClient
python src/scratchClient.py -c servoblaster
</pre>
<p>
            The config file sample is
            <code class="code">config/config_servoblaster.xml</code>
            .
        </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.senseHat"></a>6.8.7.&nbsp;Raspberry Pi SenseHat</h3>
</div>
</div>
</div>
<p>Sense Hat provides many different sensors and a LED matrix. </p>
<p>This board needs special installation procedure, see 
        <a class="ulink" href="https://pythonhosted.org/sense-hat/" target="_top">pythonhosted.org/sense-hat</a>

</p>
<p>LED matrix single pixel, sensors and orientation is supported.</p>
<p>Sample code is in <code class="code">scratchClient/scratch/senseHat</code>

</p>
<div class="mediaobject">
<img src="images/senseHat/led_control.gif" width="432"></div>
<p>With cursor keys, move the selector border to a led. With blank key toggle the LED to a lolor or dark.</p>
<p>Scratch sample code: <code class="code">scratchClient/scratch/senseHat/sense_hat_led.sb</code>

</p>
<p>scratchClient config file: <code class="code">scratchClient/scratch/senseHat/config_senseHat.xml</code>

</p>
<p>In order to keep the scratch code simple, this special adapter uses a special pattern for parameter passing to sense-hat function call: variables sent are stored in adapter and used for function events later.</p>
<div class="mediaobject">
<img src="images/senseHat/procedureCall.gif" width="216"></div>
<p> The advantage of this pattern is that code is clear, but this pattern can only be applied when setting the parameter values is not done in multiple places.</p>
<p> To set single pixel values it is needed to set x_pos, y_pos and color first before broadcast setPixel_xy. </p>
<p> To clear single pixel values it is needed to set x_pos, y_pos first before broadcast clearPixel_xy. </p>
<p> Alternative way would be to use 'composite broadcasts', where command and parameters are joined to one event.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.pianoHat"></a>6.8.8.&nbsp;Pimoroni PianoHat</h3>
</div>
</div>
</div>
<p>PianoHat is a cpacitive button board. </p>
<p>This board needs special installation procedure, see 
        <a class="ulink" href="http://learn.pimoroni.com/tutorial/piano-hat/getting-started-with-piano-hat" target="_top">Getting started with Piano HAT</a>

</p>
<p>Sample configuration is <code class="code">scratch/pianoHat/config_pianohat.xml</code>

</p>
<p>Scratch sample code: <code class="code">scratch/pianoHat/piano.sb</code>

</p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.adapter.special.websocket.positionalsensor"></a>6.9.&nbsp;Smartphone positional sensor for scratch</h2>
</div>
</div>
</div>
<a name="N10857" class="indexterm"></a>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1085C"></a>6.9.1.&nbsp;Overview</h3>
</div>
</div>
</div>
<p>In a quite popular computer magazine, c&rsquo;t 2015-03-07 (heise verlag), there is a nice article about how to connect a smartphone&rsquo;s positional sensors to a
            remote server by using a web page, some javascript and websockets.
        </p>
<p>

            Starting from this, there was the idea to connect this to scratch (what else ?).
        </p>
<p>
            The basic roadmap was
        </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>
                    add a html-page to my scratchClient&rsquo;s web server, with javascript

                    </p>
<pre class="screen">var addr = "ws://" + window.location.hostname + ":" + window.location.port + 
           "/pendel";
var websocket = new WebSocket( addr );
 
function handleOrientation(event) {
       var x = event.beta%90;
        var y = event.gamma;
        x += 90;
        y += 90;
        try {
               websocket.send(JSON.stringify( { x:x, y:y }));
        }
        catch(err) {
              // console.log( err.message );
        }
}
window.addEventListener('deviceorientation', handleOrientation);
</pre>
<p>
                
</p>
</li>
<li class="listitem">
<p>in scratchClient, there is cherrypy used to serve the web pages. WebSocket was a new feature to be added there.</p>
</li>
<li class="listitem">
<p>an adapter needed to be written adapter.websocket.WebsocketXY_Adapter, receiving the messages and converting them to scratch variable updates.
                </p>
</li>
</ul>
</div>
<p>Installation of scratchClient now needs &lsquo;ws4py&rsquo; in addition to cherrypy. See the installation description.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10874"></a>6.9.2.&nbsp;Start scratchClient</h3>
</div>
</div>
</div>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -c config/config_websocket_pendel.xml -guiRemote
</pre>
<p>

            The guiRemote-switch is needed to allow remote browsers connecting to scratchClient.
        </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N1087B"></a>6.9.3.&nbsp;Smartphone</h3>
</div>
</div>
</div>
<p>In a smartphone browser, navigate to your pi&rsquo;s address. Of course you need a (wireless) network connection between smartphone and raspberry. In my
            network, the RaspberryPi&rsquo;s address is 192.168.2.90, most possibly different for your PI. Use &lsquo;ifconfig&rsquo; to look it up.
        </p>
<pre class="screen">http://192.168.2.90:8080</pre>
<p>
            Navigate to &ldquo;Smartphone as Sensor&rdquo; browser
        </p>
<p>
            You should see rectangle with a red/green dot moving around. This is as proposed by the c&rsquo;t-article.
        </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10886"></a>6.9.4.&nbsp;Scratch</h3>
</div>
</div>
</div>
<p>
            In scratch, enable remote sensor connections and provide the following script. gotoX and gotoY are sensor values provided by the scratchClient. The xl and
            yl-Variables are local variables in scratch.
        </p>
<div class="mediaobject">
<img src="images/special/smartphone/smart.gif" width="216"></div>
<p>The x and y-values are getting exchanged and the y-value gets inverted to match the coordinates of the smartphone to scratch stage.</p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.adapter.special.usbBarcodeScanner"></a>6.10.&nbsp;USB barcode scanner</h2>
</div>
</div>
</div>
<a name="N1089C" class="indexterm"></a><a name="N1089F" class="indexterm"></a><a name="N108A4" class="indexterm"></a>
<div class="mediaobject">
<img src="images/usb/barcode/barcode.jpg" width="162"></div>
<p> Barcode scanners are USB-connected devices.
        </p>
<p>
            These scanners typically can send codes by emulating HID-class devices. This makes usage from programs quite easy, but you loose input when the program goes to
            background and other programs get the focus.
        </p>
<p>

            Connecting these devices can be don eusing pyusb library.
            This library allows access to usb devices and, very important, can grab devices to be used exclusively by one program.
        </p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.usbBarcodeScanner.install"></a>6.10.1.&nbsp;Install pyusb</h3>
</div>
</div>
</div>
<p>

                Here I found a problem. The usual install did not workwith &bdquo;pip install pyusb&ldquo;. This resulted in a 'backend not found' exception and &bdquo;undefined symbol:
                libusb_strerror&ldquo;
            </p>
<p>
                When I tried to download walac-pyusb-50b1490 from https://github.com/walac/pyusb, this worked, but I had to uninstall the pip-installed code first &bdquo;sudo pip
                uninstall pyusb&ldquo;.
            </p>
<p>

                The needed backend packages are already available in raspbian, you can check this with
            </p>
<p>

                apt-cache pkgnames | grep libusb
            </p>
<p>

                You should find libusb-1.0-0 in the list.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.usbBarcodeScanner.setup"></a>6.10.2.&nbsp;Setup Scanner for USB and CR-suffix</h3>
</div>
</div>
</div>
<p>
                A few preparations are needed with the scanner to enable HID mode. With my scanner I got a handbook with a huge amount of programming codes. You start
                programming with a 'start programming' code, scan the appropriate setup code and exit programming with an 'end programming' code.
            </p>
<p>
                For my sample, I have setup HID mode, and added exit code/suffix CR. This is needed to detect complete sequences. The adapter in scratchClient relies on this.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.usbBarcodeScanner.configure"></a>6.10.3.&nbsp;Configure idVendor and idProduct</h3>
</div>
</div>
</div>
<p>
                Another preparation is the configuration of idVendor and idProduct in the adapter's config file. Use the utility enum.py to list the devices available
            </p>
<pre class="screen">cd ~/scratchClient
python tools/usb/enum.py</pre>
<p>
                Here the output for my scanner
            </p>
<pre class="screen">
DEVICE ID 0c2e:0200 on Bus 001 Address 007 =================
bLength : 0x12 (18 bytes)
bDescriptorType : 0x1 Device
bcdUSB : 0x110 USB 1.1
bDeviceClass : 0x0 Specified at interface
bDeviceSubClass : 0x0
bDeviceProtocol : 0x0
bMaxPacketSize0 : 0x8 (8 bytes)
idVendor : 0x0c2e
idProduct : 0x0200
bcdDevice : 0x5881 Device 88.81
iManufacturer : 0x1 Honeywell Scanning and Mobility
iProduct : 0x2 Honeywell Scanning and Mobility Scanner
iSerialNumber : 0x0
bNumConfigurations : 0x1
CONFIGURATION 1: 300 mA==================================
bLength : 0x9 (9 bytes)
bDescriptorType : 0x2 Configuration
wTotalLength : 0x22 (34 bytes)
bNumInterfaces : 0x1
bConfigurationValue : 0x1
iConfiguration : 0x3 HID Keyboard
bmAttributes : 0x80 Bus Powered
bMaxPower : 0x96 (300 mA)
INTERFACE 0: Human Interface Device ====================
bLength : 0x9 (9 bytes)
bDescriptorType : 0x4 Interface
bInterfaceNumber : 0x0
bAlternateSetting : 0x0
bNumEndpoints : 0x1
bInterfaceClass : 0x3 Human Interface Device
bInterfaceSubClass : 0x1
bInterfaceProtocol : 0x1
iInterface : 0x0
ENDPOINT 0x81: Interrupt IN ==========================
bLength : 0x7 (7 bytes)
bDescriptorType : 0x5 Endpoint
bEndpointAddress : 0x81 IN
bmAttributes : 0x3 Interrupt
wMaxPacketSize : 0x8 (8 bytes)
bInterval : 0xa
</pre>
<p>
                What you also should check is the iConfiguration to be a HID Keyboard.
            </p>
<p>
                For verification open a text editor like leafpad: when scanning a code, this should be entered into the editor as a text string.
            </p>
<p>
                Edit config/config_barcode.xml and adjust the vendor/product id there.
            </p>
<p>
                In my environment, I use a powered USB hub to connect the scanner.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.usbBarcodeScanner.configure.start"></a>6.10.4.&nbsp;
                Start scratchClient
            </h3>
</div>
</div>
</div>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -c config_barcode
</pre>
<p>
                The file config/config_barcode.xml is a starting point for a project. Add other adapters as needed.
                When scanning barcodes, these are send to scratch. Do not forget to enable remote sensor connections.
            </p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.adapter.special.usbBlink"></a>6.11.&nbsp;USB blink(1)</h2>
</div>
</div>
</div>
<a name="N108F0" class="indexterm"></a><a name="N108F3" class="indexterm"></a><a name="N108F8" class="indexterm"></a>
<div class="mediaobject">
<img src="images/usb/blink/blink.GIF" width="216"></div>
<p> Blink is a small, USB based device with two RGB-LED.
        </p>
<p>
            Connecting this devices can be done using pyusb library.
            This library allows access to usb devices and, very important, can grab devices to be used exclusively by one program.
        </p>
<p>See chapter 'install pyusb' in barcode scanner chapter' for <a class="link" href="#scratchClient.adapter.special.usbBarcodeScanner.install" title="6.10.1.&nbsp;Install pyusb">installation</a>.</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.adapter.special.usbBlink.configure.start"></a>6.11.1.&nbsp;
                Start scratchClient
            </h3>
</div>
</div>
</div>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -c config_blink
</pre>
<p>
                In scratch, create variables led_1, led_2 and led_all.
                Set values to 'red', 'green' or other color names, or rgb-values like #2A2A2A. 
            </p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="rfid"></a>6.12.&nbsp;RFID Adapter</h2>
</div>
</div>
</div>
<a name="N1091E" class="indexterm"></a><a name="N10921" class="indexterm"></a><a name="N10924" class="indexterm"></a><a name="N10927" class="indexterm"></a>
<p>The adapter is adapter.serialAdapter.RFID_Reader_Adapter, a sample config file is in config/config_ID12LA.xml.</p>
<p>RFID-Readers are available for 125kHz and 13.56MHz. For the 125kHz there are reader modules available from Innovations which contain also the antenna.</p>
<p>Connect the device to 3.3V and set format to ASCII. The data output goes to Rx-Input of Raspberry Pi.</p>
<p>The adapter sends an event when data are received from RFID-reader. This allows to trigger scripts in scratch when the same card or tag is used twice.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="picoBoard"></a>6.13.&nbsp;ScratchBoard, PicoBoard Adapter</h2>
</div>
</div>
</div>
<a name="N10936" class="indexterm"></a><a name="N10939" class="indexterm"></a>
<p>The adapter is adapter.serialAdapter.PicoBoard_Adapter, a sample is available in /config/config_picoBoard.xml.</p>
<p>Picoboard, available from sparkfun, is a USB/serial connected device which contains some sensors and a slider.
                 </p>
<div class="mediaobject">
<img src="images/picoBoard/picoBoard.png" width="324"></div>
<p>
        
        
</p>
<p>The serial protocol is using polling. Scratch or the adapter in scratchClient sends out a 0x01 to start data aquisition and transfer. The board responds by 9 datapackets.
         </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>channel 15, softwareversion 0x04</p>
</li>
<li class="listitem">
<p>channel 0, sensorD</p>
</li>
<li class="listitem">
<p>channel 1, sensorC</p>
</li>
<li class="listitem">
<p>channel 2, sensorB</p>
</li>
<li class="listitem">
<p>channel 3, button, open = 1023, 0 pressed</p>
</li>
<li class="listitem">
<p>channel 4, sensorA</p>
</li>
<li class="listitem">
<p>channel 5, light sensor, bright 0, dark 1023</p>
</li>
<li class="listitem">
<p>channel 6, sound sensor, loud 1023, silent 0</p>
</li>
<li class="listitem">
<p>channel 7, slider sensor, 0..1023</p>
</li>
</ul>
</div>
<p>
                As polling is used, the tx and rx-LED should flicker frequently.
        </p>
<div class="clean">
<a name="N1096B"></a>
<div class="table-title">Table&nbsp;6.1.&nbsp;datapacket structure</div>
<div class="clean-contents">
<table summary="datapacket structure" border="1">
<colgroup>
<col width="60px" class="col1">
<col width="60px" class="col2">
<col width="100px" class="col3">
</colgroup>
<thead>
<tr>
<th valign="top">Byte</th><th valign="top">Bit</th><th valign="top">Content</th>
</tr>
</thead>
<tbody>
<tr>
<td valign="top">byte 0</td><td valign="top">7 </td><td valign="top">'1'</td>
</tr>
<tr>
<td valign="top">byte 0</td><td valign="top">6..3 </td><td valign="top">channel</td>
</tr>
<tr>
<td valign="top">byte 0</td><td valign="top">2..0 </td><td valign="top">high 3 bytes of value</td>
</tr>
<tr>
<td valign="top">byte 1</td><td valign="top">7 </td><td valign="top">'0'</td>
</tr>
<tr>
<td valign="top">byte 1</td><td valign="top">6..0 </td><td valign="top">low 7 bytes of value</td>
</tr>
</tbody>
</table>
</div>
</div>
<br class="clean-break">
<p>This board is supported by scratch, so usually there is no need to use scratchClient.

        </p>
<p>
            There are situations where support by scratchClient is useful:
            </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>When you need more than one board.</p>
</li>
<li class="listitem">
<p>You want to see the native values delivered by picoBoard.</p>
</li>
</ul>
</div>
<p>
            
</p>
<p>The sample configuration file config/config_picoBoard.xml uses the scratch names used from ScratchBoard. </p>
<p>
         If you need more than one picoboard, then
          </p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>duplicate the <code class="code">&lt;adapter/&gt;</code> section in config/config_picoBoard.xml.</p>
</li>
<li class="listitem">
<p>rename adapter/@name from 'picoboard' to 'picoboard_0', 'picoboard_1' (or to any unique name you like)</p>
</li>
<li class="listitem">
<p>rename the adapter/output_value/sensor/@name values to unique names to make these separate for each adapter.</p>
<p>e.g.<br>
                  adapter/output_value/sensor[@name='slider'] [1] /@name to 'slider_0';  <br>
                       adapter/output_value/sensor[@name='slider'] [2] /@name to 'slider_1'
                       </p>
</li>
<li class="listitem">
<p>rename parameter [@name='serial.device'] to match each picoboard, most probably /dev/ttyUSB0, /dev/ttyUSB1</p>
</li>
</ul>
</div>
<p>
        
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="arduinoUNO"></a>6.14.&nbsp;Arduino UNO Adapter</h2>
</div>
</div>
</div>
<a name="N109E8" class="indexterm"></a><a name="N109EB" class="indexterm"></a>
<p>
		Arduino UNO has an USB connection, which supports serial connection to a host computer. The arduino can be used as a IO expander, connecting digital io
		lines, pwm, or
		adc-inputs directly to scratchClient. It also supports servo signals (pwm 50Hz, 1 to 2ms pulses).
	</p>
<p>
		The adapter and arduino sketch will also work with arduino nano, atmel328 processor.
	</p>
<p>
		With the USB-connection, the UNO provides 5V-compatible inputs/outputs. This is an advantage in some constellations. But do not connect these outputs to
		Raspberry Pi inputs directly.
	</p>
<p>
		The functionality presented here is not a bridge to mesh network, propagating events and sensor updates into the arduino. There is a custom arduino
		sketch
		needed which only exposes the IO resources, but does not allow for additional logic in arduino.
	</p>
<p>
		Configuration of the io-pins (direction, pullup, pwm, servo) and adc-pins (whether used or void) is controlled by scratchClient through configuration.
	</p>
<p>The scratch names used are configurable in configuration too. This is common functionality of the framework.
	</p>
<p>
		The code for the arduino, a sample configuration and a sample scratch project are contained in the scratchClient distribution.
	</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO.step1"></a>6.14.1.&nbsp;Step 1, program the firmware to arduino UNO</h3>
</div>
</div>
</div>
<p>
			Start arduino software, load arduino/arduinoUno/arduinoUno.ino and program it into the UNO.
		</p>
<p>
			The LED13 on the arduino should blink at 5Hz, quite fast. This indicates that the firmware did not yet receive configuration.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO.step2"></a>6.14.2.&nbsp;
			Step 2, Sample hardware setup.
		</h3>
</div>
</div>
</div>
<p>This setup is a sample for what is possible with this setup. The configuration file allows for almost all the flexibility the atmel controller allows.
		</p>
<div class="mediaobject">
<img src="images/arduinoUno/arduinoUno_Steckplatine.png" width="486"></div>
<p>The hardware uses a potentiometer (2k to 10k are ok) on AD0. On D3, there is a button connected. The other side is having a 1k-Resistor to GND (just in
			case the output is configured as an output, this prevents damage to the IO).
		</p>
<p>Two LED are for output. The green LED is on a PWM-Output D5, so it can be dimmed.</p>
<p>This setup is a sample. The functionality of all the inputs and outputs are defined by configuration in scratchClient.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO.step3"></a>6.14.3.&nbsp;
			Step 3, connect arduino with USB-Line to RaspberryPi or windows computer.
		</h3>
</div>
</div>
</div>
<p>On raspberry, lookup /dev /tty* connections and configure the UNO serial device in config/config_arduino_uno.xml-File.</p>
<p>For windows, you see the COMn-Device used in deviceManager.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO.step4"></a>6.14.4.&nbsp;Step 4, start scratchClient with configuration</h3>
</div>
</div>
</div>
<pre class="screen">cd ~/scratchClient
python src/scratchClient -c config/config_arduino_uno.xml</pre>
<p>After a short while, the LED13 should start blinking at 1Hz, quite slow. This indicates that configuration was downloaded and operation is ready to be
			used.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO.step5"></a>6.14.5.&nbsp;Step 5, start scratch with sample program</h3>
</div>
</div>
</div>
<p>There is a sample program in scratch/arduinoUno/arduino.sb</p>
<p>
			
</p>
<div class="mediaobject">
<img src="images/arduinoUno/scratch.png" width="378"></div>
<p>
		
</p>
<p> The program takes the button input and controls the red LED with it.</p>
<p> The value from the potentiometer is used to set the pwm-rate and dim the green LED.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO.constraints"></a>6.14.6.&nbsp;Constraints</h3>
</div>
</div>
</div>
<p>
			The adc-channel needs to be limited to 10Hz updates. There is averaging for three samples per value transmitted. Without a limit to 10Hz, a noisy input
			could flood the communication line with data and cause excessive cpu usage on a raspberry pi.
		</p>
<p>
			The adc-channels on Port A allow for analog inputs, digital inputs or for digital output.
		</p>
<p>
			PWM pulses are created with analog_write on the digital pins. According to the arduino reference, analogWrite() works on pins 3, 5, 6, 9, 10, and 11.
			Input values for pwm are 0..255.
		</p>
<p>
			Servo pulses are created with Servo-library. See limitations of this library in
			<a class="ulink" href="https://www.arduino.cc/en/reference/servo" target="_top">Arduino Servo</a>
			.
			Input values for servo are 0..180.
		</p>
<p>
			Current implementation is experimental or a 'proof of concept'. Configuration is not persisted in the arduino; there is no interface for custom logic
			(for fast
			sensors).
		</p>
<p>
			Configuration is requested to be sent from RaspberryPi or windows to arduino on reset of arduino. If scratchClient configuration is changing, then a
			reset on arduino is
			needed to make this active. As in most cases a hardware change is made with arduino disconnected from power (either USB cable or power
			plug), this is only a
			small limitation.
		</p>
<p>
			One of the advantages is that e.g. windows scratch 1.4 with scratchClient on windows allows for IO connections.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO.advanced"></a>6.14.7.&nbsp;Advanced Features</h3>
</div>
</div>
</div>
<p>
			The communication between arduino and host computer on the serial file is in a human readable protocol.
		</p>
<p>
			Configure arduino IDE serial console to 115200Bd, 8N1, newline (LF, 0x0a) to use the low level interface for the arduino.

		</p>
<p>
			On reset, the arduino starts to request for configuration
			</p>
<pre class="screen">arduino sending@115200 Bd
arduinoUno, version 2016-11-13
config?
config?
config?</pre>
<p>
		
</p>
<p>
			Available commands are reported by sending 'help' to the arduino.
			</p>
<pre class="screen">arduino requests configuration with 'config?' on reset

configuration commands start with 'c'
 cdebug:&lt;data&gt; debug settings, data are hex (0,1,2,3)
 cr: dummy request, just get a newline and clean buffer
 cversion? request version string
 cerr?     request error count for parser
 cident?   request idcode
 cident:&lt;char16&gt; write idcode

 cdin:&lt;data&gt; digital inputs, data are hex
 cdinp:&lt;data&gt; digital inputs, pullup enabled, data are hex
 cdout:&lt;data&gt; digital outputs, data are hex
 cdpwm:&lt;data&gt; digital pwm, data are hex
 cdservo:&lt;data&gt; digital servo, data are hex
 caain:&lt;data&gt; analog line, data are hex [a0..a5]
 cadin:&lt;data&gt; analog line, digital input [a0..a5]
 cadinp:&lt;data&gt; analog line, digital input, pullup [a0..a5]
 cadout:&lt;data&gt; analog line, digital output
data give bit patterns for IO pins, Bits 1,2,3... are used

Commands to set values in arduino
 o:&lt;port&gt;,&lt;value&gt;     write output, shortcut
 p:&lt;port&gt;,&lt;value&gt;     write pwm, shortcut
 s:&lt;port&gt;,&lt;value&gt;     write servo, shortcut

Values reported from arduino to host
 v:&lt;version&gt;       arduino reports version
 ident:&lt;char16&gt;    arduino reports ident from EEPROM
 e:&lt;errors&gt;        arduino reports number of errors (decimal)
 a:&lt;port&gt;,&lt;value&gt;  arduino reports analog input
 i:&lt;port&gt;,&lt;value&gt;  arduino reports digital input
 ai:&lt;port&gt;,&lt;value&gt; arduino reports digital input
            
</pre>
<p>
		
</p>
<p>
			It is possible to flash an ident code to the arduino using eeprom. This ident code can be requested from
			host; this allows to provide dedicated
			configuration for special devices. E.g. in a school setup, some
			arduino could be attached to special equipment and the host computer could provide only the
			matching
			configuration. This reduces the risk of configuration errors.
		</p>
<p>
			The debug settings are not for productive use. If set, then reset the processor for a clean restart.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUno.configuration"></a>6.14.8.&nbsp;Configuration Remarks</h3>
</div>
</div>
</div>
<p>The input/output relations of the various components involved need some explanation.</p>
<p>
			When scratch writes to an output of arduino, the data flow is

			</p>
<div class="mediaobject">
<img src="images/arduinoUno/input_output_output.svg" width="324"></div>
<p>

		
</p>
<p>
        From scratch point of view, data are send to an output.
        </p>
<p>
        For scratchClient adapters, the data are received on an input. The arduinoUNO adapter sends these data to arduino.
        </p>
<p>
        For the arduino, the data are then written to an output (digital io, pwm, servo).
        </p>
<p>A config file for this scenario is (reduced to the bare minimum)</p>
<pre class="screen">    &lt;!-- an output on arduino is an input on adapter ! --&gt;
    
    &lt;adapter class='adapter.arduino.UNO_Adapter' name='UNO'&gt;
        
        &lt;input_value name='inputD4'&gt;
            &lt;variable name='redLED' /&gt;
        &lt;/input_value&gt;

        &lt;io id='D4' dir='out' /&gt;

    &lt;/adapter&gt;
</pre>
<p>

</p>
<p>
            When arduino transmits an input value from a digital line or adc value, the data flow is

            </p>
<div class="mediaobject">
<img src="images/arduinoUno/input_output_input.svg" width="324"></div>
<p>

        
</p>
<p>
        For the arduino, the data are read from an input (digital io, adc).
        </p>
<p>
        The scratchClient adapter gets a notification through the USB serial line and sends these data through one of its outputs.
        </p>
<p>
        From scratch point of view, data are an input value, either a sensor value or a broadcast.
        </p>
<p>A config file for this scenario is (reduced to the bare minimum)</p>
<pre class="screen">    &lt;!-- an input on arduino is an output on adapter ! --&gt;
    &lt;adapter class='adapter.arduino.UNO_Adapter' name='UNO'&gt;
        
        &lt;output_value name='outputA0'&gt;
            &lt;sensor name='potentiometer_0' /&gt;
        &lt;/output_value&gt;
       
        &lt;analog id='A0' dir='analog_in'  /&gt;
 
    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="arduinoNeopixel"></a>6.15.&nbsp;Arduino UNO Adapter for Neopixel</h2>
</div>
</div>
</div>
<a name="N10AAD" class="indexterm"></a><a name="N10AB0" class="indexterm"></a><a name="N10AB5" class="indexterm"></a>
<p>Neopixel use WS2812-chip wich contain driver logic and RGB LED. There is only one wire needed to control the chip. As timing is critical, there is no possibility to contro this directly by raspberry pi. With the help of an arduino (328, uno, nano or alike) and 'adafruit neopixel' library, it is possible to control these.
        </p>
<p>Arduino UNO has an USB connection, which supports serial connection to a host computer. There is a sketch needed for these mirocontrollers, see <code class="code">scratchClient/arduino/arduinoNeopixel/arduinoNeopixel.ino</code>
                
</p>
<p>
            With the USB-connection, the UNO provides 5V-compatible inputs/outputs. This is an advantage in some constellations. But do not connect these outputs to 
            Raspberry Pi inputs directly.
        </p>
<p>
            In the sketch, adjust the RGB alignment, speed and number of chips and recompile.
            </p>
<p>
        
</p>
<pre class="screen">
// ----------------------------------------
// Adjust for your neopixel array

#define PIN 7
#define NUM_LEDS 144
#define BRIGHTNESS 50

Adafruit_NeoPixel strip = Adafruit_NeoPixel(NUM_LEDS, PIN, NEO_GRB + NEO_KHZ800);
// ----------------------------------------
        </pre>
<p>
        
</p>
<p>Communication from arduino to host is done by using USB serial with 115200bd.
        
        </p>
<p>
        Commands are ascii readable. Type 'help' in serial console to see options.
        
        </p>
<pre class="screen">
all red  : red  
all green: green 
all blue : blue  
set pixel: s,NNN,RRR,GGG,BBB in dezimals e.g. s,029,000,000,255
show     : show  

clear    : clear 
help     : help  
echo     : echo  
        </pre>
<p>
        The 'all red', 'all green', 'all blue' commands set all LED to respective values. This is used to check RGB alignment.
        </p>
<p>Set pixel sets a single pixel. A 'show'-command is needed to activate the settings.
        </p>
<p>Show 'show' displays pixel values.
        </p>
<p>Clear immediately clears all pixels.
        </p>
<p>Echo is used to validate connection to arduino.
        </p>
<p>All commands are terminated by \n (LF). When a command is executed, the command string is echoed back. Commands can be max 64 chars, extra trailing chars are silently ignored.
        </p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoNeopixel.step4"></a>6.15.1.&nbsp;start scratchClient with configuration</h3>
</div>
</div>
</div>
<p>
            
</p>
<pre class="screen">cd ~/scratchClient
python src/scratchClient -c scratch/neopixel/neopixel.xml</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoNeopixel.step5"></a>6.15.2.&nbsp;start scratch with sample program</h3>
</div>
</div>
</div>
<p>There is a sample program in scratchClient/scratch/neopixel/neopixel.sb</p>
<div class="mediaobject">
<img src="images/neopixel/scratch_stage.gif" width="432"></div>
<p>The scratch program maintains an array with color values. 'new' clears the list, 'send' sends to arduino. The colored rectangles add descriptive names to the list (or hex rgb values like #ff00ff).</p>
<p> The red_all etc commands and the clear button are used to debug the connection and arduino code.</p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="arduinoUNO_POWERFUNCTIONS"></a>6.16.&nbsp;Arduino UNO_POWERFUNCTIONS_Adapter</h2>
</div>
</div>
</div>
<a name="N10AFE" class="indexterm"></a><a name="N10B01" class="indexterm"></a><a name="N10B04" class="indexterm"></a>
<p>LEGO powerfunctions provide  an infrared controlled receiver with the possibility to connect to motors, lights and others. With an IR-LED connected to an arduino which is connected to a RPi which is connected (or hosting) scratch), it is possible to control these receivers with scratch.
        </p>
<p>Arduino UNO has an USB connection, which supports serial connection to a host computer.
        </p>
<p>
        The adapter and arduino sketch will also work with arduino nano, atmel328 processor.
        </p>
<p>
            With the USB-connection, the UNO provides 5V-compatible inputs/outputs. This is an advantage in some constellations. But do not connect these outputs to 
            Raspberry Pi inputs directly.
        </p>
<p>
            An IR-LED (940nm wavelength) is needed, a resistor 220 Ohm limits current. This allows for short distance connections.
            </p>
<div class="mediaobject">
<img src="images/arduinoUno/arduinoUNO_Powerfunctions_Steckplatine_r2016-03-27.png" width="432"></div>
<p>
        
</p>
<p>
            With a transistor like 2n2222 and a base resistor of 680Ohm, the power on the LED can be increased. 
        </p>
<p>The scratch names used are configurable in configuration files. See the config file config/config_arduino_powerfunctions.xml
        </p>
<p>
            The arduino code for arduino IDE and configuration needed for scratchClient is in the scratchClient distribution.
        </p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO_POWERFUNCTIONS.step1"></a>6.16.1.&nbsp;Step 1, program the firmware to arduino UNO</h3>
</div>
</div>
</div>
<p>
                Start arduino software, load arduino/power_functions/power_functions.ino and program it into the UNO.
            </p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO_POWERFUNCTIONS.step2"></a>6.16.2.&nbsp;
                Step 2, Hardware setup.</h3>
</div>
</div>
</div>
<p>Connect LED to Arduino</p>
<p>See the plan included above. This connection allows for currents up to 20mA. Most IR-LED support higher currents, but then a transistor is needed to drive the LED.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO_POWERFUNCTIONS.step3"></a>6.16.3.&nbsp;
                Step 3, connect arduino with USB-Line to RaspberryPi or windows computer.</h3>
</div>
</div>
</div>
<p>On raspberry, lookup /dev/tty* connections and configure the UNO serial device in config/config_arduino_powerfunctions.xml-File.</p>
<p>For windows, you see the COMn-Device used in deviceManager.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO_POWERFUNCTIONS.step4"></a>6.16.4.&nbsp;Step 4, start scratchClient with configuration</h3>
</div>
</div>
</div>
<pre class="screen">cd ~/scratchClient
python src/scratchClient -c config/config_arduino_powerfunctions.xml</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="arduinoUNO_POWERFUNCTIONS.step5"></a>6.16.5.&nbsp;Step 5, start scratch and create scratch Program</h3>
</div>
</div>
</div>
<p>There is a sample program in scratch/arduinoUno/lego_powerfunctions.sb</p>
<p>
                    The variables are connected to different channels, A and B are the two channels available on the LEGO receiver
                </p>
<p> The program takes the button input and controls the red LED with it.</p>
<p> The value from the potentiometer is used to set the pwm-rate and dim the green LED.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10B4D"></a>6.16.6.&nbsp;Constraints</h3>
</div>
</div>
</div>
<p>
                    Thee software can send signals for Channel1 to Channel 4. You need to adjust the receiver to the channel used.
                </p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="Twitter_Adapter"></a>6.17.&nbsp;Twitter_Adapter</h2>
</div>
</div>
</div>
<a name="N10B56" class="indexterm"></a><a name="N10B59" class="indexterm"></a>
<p>Twitter has an API which can be used by scratchClient. The adapter browses twitter for direct messages or by a hashtag and forwards these results to scratch.
        </p>
<p>Install python-twitter in python environment "sudo pip install python-twitter".
        </p>
<p>You need to obtain 'key' and 'secret' from twitter to access the API. Edit config/config_twitter.xml and insert values there.
        </p>
<p>
            Polling rate for twitter can be adjusted, but twitter.com imposes a rate limit. 60 sec are a good starting point.
        </p>
<p>It is configurable whether the adapter retrieves user message or searches messages for a term or both.  
        </p>
<p>
            A properties file written by the adapter allows to retrieve only new messages. The messageId of last message read is persisted in this file. The file is in data folder, filename is configurable in config file.
        </p>
<p>
            Start scratchClient 

            </p>
<pre class="screen">cd ~/scratchClient
python src/scratchClient -c config/config_twitter.xml</pre>
<p>

</p>
<p>A scratch sample is in scratch/twitter/twitter.sb
</p>
<p>
Messages from twitter can arrive at a faster rate than scratch can process, or messages can be identical, which makes them indistinguishable for scratch. To handle this situation a protocol is implemented between the twitter adapter and scratch: all messages are queued inside the adapter. For each message, the text is places in a sensor variable 'text' and a 'textAvailable' event is published. When scratch receives this event, it processes the data and answeres with a 'textAcknowledge' event.
 
            </p>
<div class="mediaobject">
<img src="images/twitter/TwitterAdapter.jpg" width="432"></div>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="Openweathermap_Adapter"></a>6.18.&nbsp;Openweathermap_Adapter</h2>
</div>
</div>
</div>
<a name="N10B83" class="indexterm"></a><a name="N10B86" class="indexterm"></a>
<p>Openweathermap has an API which can be used by scratchClient. The adapter browses the api for weather data.
        </p>
<p>Install python module 'pyowm' in python environment "sudo pip install pyowm".
        </p>
<p>You need to obtain an API 'key' from http://openweathermap.org/appid to access the API.
         Edit config/config_openweatherapi.xml and insert values there.
        </p>
<p>
            Polling rate for openweathermap can be adjusted, but depending on key type there is a rate limit. 600 sec are a good starting point.
        </p>
<p>
            Start scratchClient 

            </p>
<pre class="screen">cd ~/scratchClient
python src/scratchClient -c config/config_openweatherapi.xml</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="legowedo2_Adapter"></a>6.19.&nbsp;LEGO WeDo 2.0 Adapter</h2>
</div>
</div>
</div>
<a name="N10B9D" class="indexterm"></a><a name="N10BA0" class="indexterm"></a>
<p>
		LEGO education offers a concept for primary schools which consists of hardware, software and educational patterns.
		The electronics part are
		</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>'Wedo 2.0 Smarthub', connected by Bluetooth Low Energy to a computer. Will be named 'hub' in this chapter.
				</p>
</li>
<li class="listitem">
<p>'Wedo 2.0 Tilt Sensor', will be named 'tilt sensor' here.
				</p>
</li>
<li class="listitem">
<p>'Wedo 2.0 Motion Sensor', will be named 'motion sensor' here.
				</p>
</li>
<li class="listitem">
<p>'Wedo 2.0 Medium Motor', will be named 'motor' here.
				</p>
</li>
</ul>
</div>
<p>
		It is important to name the devices with the WeDo 2.0 prefix, as the connector style is different from connectors used for other Lego products.
	</p>
<p>The hub offers two connectors, where the sensors or motors can be connected.</p>
<p>The hub connections are named as shown. This is important in 'advanced' setup.</p>
<p>
		
</p>
<div class="mediaobject">
<img src="images/wedo2/wedo2_port.jpg" width="270"><div class="caption">Lego wedo2 port names.</div>
</div>
<p>
	
</p>
<p>The software offered by Lego is an easy to use 'scratch style' IDE. The command set is very limited, appropriate to primary school. There is a 'while'
		block, but no decisions.
	</p>
<p>With the software, it is possible to use the sensors in their default mode.</p>
<p>There is a SDK available from Lego, which demonstrates the more advanced features of the hub and the sensors. Based on the SDK, the integration into
		scratchClient was developed.
	</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.hub"></a>6.19.1.&nbsp;Hub features</h3>
</div>
</div>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Button. Used to start the bluetooth connection sequence.
				</p>
<p>
					During operation it acts as a push button which can be used by host software.
				</p>
</li>
<li class="listitem">
<p>RGB LED. Used as status feedback. White flashing during bluetooth connection, blue when connected. Orange flashing in case of high current when a
					motor is blocked.
				</p>
<p>The scratchClient software - when connected - initiates a short red-green-blue animation and changes the color then to green.</p>
<p>The colors can be set by host software.</p>
</li>
<li class="listitem">
<p>Piezo. Used as status feedback. Initiates some beeps while connecting.</p>
<p>Piezo can be used to play tones.</p>
</li>
<li class="listitem">
<p>Voltage. Measures battery voltage. </p>
<p>The values in millivolts are available to host. Can not be set, of course.</p>
</li>
<li class="listitem">
<p>Current. Measures current from the battery.</p>
<p>The values in milliamperes are available to host. Usual values are around 80 to 90 mA, some 100 mA higher when a motor is used.</p>
</li>
<li class="listitem">
<p>Low Voltage Alert. </p>
</li>
<li class="listitem">
<p>High Current Alert. </p>
</li>
</ul>
</div>
<p>The hub also controls the connect/ disconnect of motors and sensors reports this to the host. The host can set operation mode for the devices. The hub
			can use notifications to report value changes.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.motor"></a>6.19.2.&nbsp;Motor Features</h3>
</div>
</div>
</div>
<p>There can be one or two motors connected to the hub. With WeDo software, these are operated 'in parallel', there is no possibility to address them
			separately.
		</p>
<p>The hub internally allows to address the motors based on the port to wich these are connected. scratchClient allows to operate two motors separately.
		</p>
<p>Motor can be powered by values [1..100] forward, [-1..-100] reverse. Value [0] is drift mode. A special value [127] is used for brake mode. The
			scratchClient adapter uses broadcast events for drift and brake.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.motion"></a>6.19.3.&nbsp;Motion sensor Features</h3>
</div>
</div>
</div>
<p>Motion sensor offers two operation modes.</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Mode 0, DETECT: Distance measurement. Values are from 0..9 for very near to very far which is prox 20cm.
				</p>
<p>The mode 0 is set as default.
				</p>
</li>
<li class="listitem">
<p>Mode 1, COUNT: Counts the number of 'beam brake events'. Can be used to count parts passing by. Values are from 0..100. Counter can be reset by a
					broadcast event.
				</p>
</li>
</ul>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.tilt"></a>6.19.4.&nbsp;Tilt Sensor Features</h3>
</div>
</div>
</div>
<p>Tilt sensor offers three operation modes.</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>Mode 0, ANGLE: Gives two angle measurements in degrees -45.0 to +45.0.
				</p>
</li>
<li class="listitem">
<p>Mode 1, TILT: Similiar to ANGLE, but value is restricted to tilt directions. This provides '0' for no tilt, and '3', '5', '7', '9' for each direction.
				</p>
<p>The mode 1 is set as default.</p>
</li>
<li class="listitem">
<p>Mode 2, CRASH: Counts the number of crash events. This gives the number of bumps in x, y and z-direction. There is a reset signal available for the
					counter.
				</p>
</li>
</ul>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.installation"></a>6.19.5.&nbsp;Installation</h3>
</div>
</div>
</div>
<p>
			The adapter was devloped and tested on a Raspberry Pi 3 which provides a bluetooth 4 device. The software to operate is already included in raspbian. No
			special
			setup procedures have been needed to configure bluetooth.
		</p>
<p>
			The scratchClient adapter needs additional software to run. This is the python module needed for the bluetooth stack.
		</p>
<p>
			Install python module 'bluepy' for python environment.
			</p>
<pre class="screen">      
sudo pip install bluepy
</pre>
<p>

		
</p>
<p>
			Do not automatically connect the hub with bluetooth. The scratchClient adapter will not be able to connect when other connections are already
			established.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.connection_options"></a>6.19.6.&nbsp;Connection Options</h3>
</div>
</div>
</div>
<p>
			The bluetooth connection can be build based on the MAC-address of the hub, or based on the device name.
		</p>
<p>
			For the connection based on MAC-address, edit the config file as follows:
			</p>
<pre class="screen">      
        &lt;!-- discover option by 'address' --&gt;
        &lt;parameter name='btle.policy' value='address' /&gt;
        &lt;parameter name='btle.address' value='a0:e6:f8:6d:0e:67' /&gt;
</pre>
<p>
			Use this setup when there are many hubs around and one dedicated device needs to be connected.
		</p>
<p>
			For the connection based on device name, edit the config file as follows:
			</p>
<pre class="screen">
        &lt;!-- discover option, by 'name' (needs root permission) --&gt;
        
        &lt;parameter name='btle.policy' value='name' /&gt;
        &lt;parameter name='btle.name' value='LPF2 Smart Hub 2 I/O' /&gt;
</pre>
<p>
			Use this setup when only one hub is around, or the configuration effort is too high. Root peromission is needed to start scratchClient in this case. With
			many
			devices, the scratchClient adapter will connect with the first device found.

		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.connection_sequence"></a>6.19.7.&nbsp;Connection Sequence</h3>
</div>
</div>
</div>
<p>
			Start scratchClient.

		</p>
<p>Start scratch and establish 'remote sensor connection'.
		</p>
<p>
			Press the green button on the wedo2 hub. The LED will blink and there is an audible beep from the device. When connection is established, the LED
			turns
			to
			blue.
			After prox 3 to 5 seconds, the LED runs a short sequence red,green,blue and finally the LED remains green.

		</p>
<p>
			The connection is established.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.basic"></a>6.19.8.&nbsp;Basic setup</h3>
</div>
</div>
</div>
<p>
			With lego wedo2 education software, a subset of the hub's features can be used. It is assumed, that only one motor or only one sensor of a type are
			connected.
			It is not important on which connector the devices are plugged in.
		</p>
<p>Motion-Sensor mode is 'distance'. Values provided are '0.0' for very close and '9.0' for 'very far away.'
		</p>
<p>Tilt-Sensor mode is 'tilt'.
		</p>
<p>
			To operate the hub in this mode, a 'basic' setup configuration is provided
			<code class="code">config/config_wedo2_basic.xml</code>
			.
		</p>
<p>This basic configuration is a subset of the available options of the adapter.</p>
<p>
			In the configuration, the 'strict' parameter is set to 'false'. This ignores the position of a connected sensor/actor.
			</p>
<pre class="screen">&lt;parameter name='mode.strict' value='false' /&gt; </pre>
<p>
			Typically, a motor is adressed by 'motor'.
		</p>
<p>
			When two motors are connected, these will operate in parallel. But two sensors of one type will produce wrong data.
		</p>
<p>
			Start scratchClient in basic mode.

			</p>
<pre class="screen">cd ~/scratchClient
 sudo python src/scratchClient.py -c config_wedo2_basic </pre>
<p>
		
</p>
<p>
			The scratchClient monitoring gives a graphical view of the inputs and outputs of an adapter configuration.
			</p>
<div class="mediaobject">
<img src="images/wedo2/wedo2_monitor_basic.png" width="432"><div class="caption">Lego wedo2 adapter connections in basic mode.</div>
</div>
<p>
		
</p>
<p>The mode set values are removed from this config file. Piezo commands are not used.
			Voltage, current values are removed. This configuration is close to
			the scenario used in WeDo software.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.advanced"></a>6.19.9.&nbsp;Advanced setup</h3>
</div>
</div>
</div>
<p>
			In advanced operation mode it is possible to handle the connected motor or sensors individually.
			Two motors can be controlled separately, or two same
			sensors can be read.

		</p>
<p>
			To operate the hub in this mode, an 'advanced' setup configuration is provided
			<code class="code">config/config_wedo2_advanced.xml</code>
			.
		</p>
<p>This advanced configuration is a subset of the available options of the adapter.</p>
<p>The motor and sensor values have names with the port indicator '1', '2' included. For example the motion sensor values are named 'motion1_distance',
			'motion2_distance'.
		</p>
<p>For the sensors, the values used are depending on the mode set. For the motion sensor, there is a 'motion1_distance' and a 'motion1_count' sensor value.
			When mode is changed, the last value reported in other sensor variables is not reset or changed.
		</p>
<p>
			In the configuration, the 'strict' parameter is set to 'true'. This allows to address sensor/actor by port position.
			</p>
<pre class="screen">&lt;parameter name='mode.strict' value='false' /&gt; </pre>
<p>
			Typically, a motor is adressed by 'motor1' or 'motor2'.
		</p>
<p>
			Start scratchClient in advanced mode.

			</p>
<pre class="screen">cd ~/scratchClient
 sudo python src/scratchClient.py -c config_wedo2_advanced </pre>
<p>
		
</p>
<p>
			The scratchClient monitoring gives a graphical view of the inputs and outputs of an adapter configuration.
			</p>
<div class="mediaobject">
<img src="images/wedo2/wedo2_monitor_advanced.png" width="432"><div class="caption">Lego wedo2 adapter connections in advanced mode.</div>
</div>
<p>
		
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.complete"></a>6.19.10.&nbsp;Complete setup</h3>
</div>
</div>
</div>
<p>
			A full blown config file with all options is available. The main purpose is for test and development.
		</p>
<p>
			To operate the hub in this mode, an 'complete' setup is provided
			<code class="code">config/config_wedo2_complete.xml</code>
			.
		</p>
<p>
			In the configuration, the 'strict' parameter is set to 'true'. This allows to address sensor/actor by port position.
			</p>
<pre class="screen">&lt;parameter name='mode.strict' value='true' /&gt; </pre>
<p>
		
</p>
<p>
			Start scratchClient in complete mode.

			</p>
<pre class="screen">cd ~/scratchClient
 sudo python src/scratchClient.py -c config_wedo2_complete </pre>
<p>
		
</p>
<p>
			The scratchClient monitoring gives a graphical view of the inputs and outputs of an adapter configuration.
			</p>
<div class="mediaobject">
<img src="images/wedo2/wedo2_monitor_complete.png" width="432"><div class="caption">Lego wedo2 adapter connections in complete mode.</div>
</div>
<p>
		
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="legowedo2.scratch"></a>6.19.11.&nbsp;Sample scratch Program</h3>
</div>
</div>
</div>
<p>
			A sample scratch program is provided in
			<code class="code">scratch/wedo2/wedo2_sample.sb</code>
			.
		</p>
<p>Use the 'green flag' to start the program.</p>
<p>This scratch program can be used with basic, advanced or full configuration files.</p>
<div class="mediaobject">
<img src="images/wedo2/scratch_start.gif" width="270"><div class="caption">Sample scratch program, start screen.</div>
</div>
<p>In the status line, the green sprite displays the button press events.</p>
<p>Alerts for voltage or current should be green. When alerts arrive, these turn to red and change to orange 5 secs later.</p>
<p>The current screen name is displayed.</p>
<p>The previous and next-Buttons are used to navigate to the other screens.</p>
<div class="mediaobject">
<img src="images/wedo2/scratch_device.gif" width="270"><div class="caption">Sample scratch program, device screen.</div>
</div>
<div class="mediaobject">
<img src="images/wedo2/scratch_rgb.gif" width="270"><div class="caption">Sample scratch program, rgb screen.</div>
</div>
<div class="mediaobject">
<img src="images/wedo2/scratch_motor.gif" width="270"><div class="caption">Sample scratch program, motor screen.</div>
</div>
<div class="mediaobject">
<img src="images/wedo2/scratch_motion.gif" width="270"><div class="caption">Sample scratch program, motion screen.</div>
</div>
<div class="mediaobject">
<img src="images/wedo2/scratch_tilt.gif" width="270"><div class="caption">Sample scratch program, tilt screen.</div>
</div>
<div class="mediaobject">
<img src="images/wedo2/scratch_piezo.gif" width="270"><div class="caption">Sample scratch program, piezo screen.</div>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="pigpiod_adapter"></a>6.20.&nbsp;Adapters using pigpiod-Daemon</h2>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratch.client.pigpiod.hcsr04_Adapter"></a>6.20.1.&nbsp;Ultrasonic Distance Sensor HC-SR04 by pigpiod-Daemon</h3>
</div>
</div>
</div>
<a name="N10D45" class="indexterm"></a><a name="N10D48" class="indexterm"></a>
<p>
		HC-SR04 is a quite inexpensive ultrasonic distance sensor. The pulse output can be measured using pigpio daemon and python library.
	</p>
<p>
        The device needs a trigger connection and an echo connection. As the operating voltage for the device is 5V, there is the need for voltage adjustment for the echo line. Use a voltage divider or level shifter.
    </p>
<p>
        The GPIO pins used are configured in the config file. Any pins can be used. 
    </p>
<p>Multiple sensors can be configured.</p>
<h4>
<a name="N10D55"></a>Installation</h4>
<p>
		The python library for pigpio access needs to be installed.
		</p>
<pre class="screen">sudo apt-get install python-pigpio</pre>
<p>
		The daemon code is available in raspbian (2016-08-19).
	</p>
<h4>
<a name="N10D5C"></a>
		Start Daemon
	</h4>
<p>
		The daemon can be started by raspi-config. Or start by
		</p>
<pre class="screen">sudo pigpiod</pre>
<p>
	
</p>
<p>
		A basic configuration is is
		<code class="code">config/config_hcsr04_pigpiod.xml</code>
		.
	</p>
<p>
		Start scratchClient.

		</p>
<pre class="screen">cd ~/scratchClient
python src/scratchClient.py -c config_hcsr04_pigpiod  </pre>
<p>

	
</p>
<p>The values transferred to scratch are 'time' in seconds. To calculate the distance use the formula</p>
<p>distance [cm] = time [s] * 340 [m/s] / 2 * 100 [cm /m])</p>
<p> The speed of sound in air is assumed to be 340 [m/s], which changes with temperature.</p>
</div>
</div>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratchClient.monitoring"></a>Chapter&nbsp;7.&nbsp; GUI, Web Interface for Monitoring</h1>
</div>
</div>
</div>
<a name="N10D78" class="indexterm"></a>
<p>
		There is a web based user interface for the tool. By default, the scratchClient opens the port only for local connections. When remote access is needed, this
		needs to be enabled by command line switch 'guiRemote'.
	</p>
<p>
		The url in browser is for local access
		http://localhost:8080
	</p>
<p>
		For remote access, you need to have the hostname in the network, or the ip-address of the machine.
		http://[hostname]:8080
	</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="N10D83"></a>7.1.&nbsp;GUI Functions</h2>
</div>
</div>
</div>
<p>
			The functionality is
			</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>show config file</p>
</li>
<li class="listitem">
<p>display graphical view of adapters</p>
</li>
<li class="listitem">
<p>monitor events</p>
</li>
<li class="listitem">
<p>trigger events</p>
</li>
<li class="listitem">
<p>set values</p>
</li>
</ul>
</div>
<p>


		
</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10D99"></a>7.1.1.&nbsp;Monitoring, Controlling</h3>
</div>
</div>
</div>
<p>
				The adapter view receives updates from scratchClient.
				When broadcasts arrive, the connectors are highlighted.
				Values change are displayed.
				Most current events are listed on screen in a text list.
			</p>
<p>
				Broadcasts (input or output) can be stimulated by clicking to the connectors. Input broadcasts are sent to the adapter, output broadcasts are sent to scratch.
			</p>
<p> Values can be edited and send. Click on the connector, an input box will open and values are sent when enter key is pressed.
			</p>
<p>
				Input values are sent to the adapter, output values are sent to scratch.

				The web interface is build based on configuration.
				</p>
<div class="mediaobject">
<img src="images/webgui/monitoring.png" width="486"></div>
<p>


				The sample screen shot shows a servo adapter and two button adapters.
				'servo_A' is a value sent from scratch to the adapter. Double click in this name opens an editor window for the value.
				's0_pressed' is a broadcast sent from the button-adapter to scratch. Double clicking this name sends the broadcast to scratch.
			</p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="N10DB0"></a>7.2.&nbsp;Compatibility</h2>
</div>
</div>
</div>
<p>
			The interface was verified to work with Midori, Firefox and Chrome.
		</p>
</div>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratchClient.install_operation"></a>Chapter&nbsp;8.&nbsp;Installation, Operation</h1>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.operation.installation.quick"></a>8.1.&nbsp;Quick Installation</h2>
</div>
</div>
</div>
<p>
			The following installation procedure is for the impatient people. Open a terminal and execute the following lines.
			</p>
<pre class="screen">cd ~
wget http://heppg.de/ikg/administration/pi/scratchClient/download/scratchClient.tar.gz
tar xzf scratchClient.tar.gz
chmod +r -R scratchClient/

sudo apt-get update
sudo apt-get install python-pip python-dev
sudo pip install cherrypy routes mako ws4py spidev
</pre>
<p>
		
</p>
<p>The install steps are explained in more detail in the following sections.</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.operation.installation.steps"></a>8.2.&nbsp;Step by Step Installation</h2>
</div>
</div>
</div>
<p>The following sections guide through the installation steps.
		</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="install.base"></a>8.2.1.&nbsp;Base Packages Installation</h3>
</div>
</div>
</div>
<p>There are a few operating system packages and a few python modules needed.</p>
<p>
				When installing new packages, it is generally a good idea to have current versions of the packages available. For this, the 'apt-get update' is used.
			</p>
<pre class="screen">
sudo apt-get update
sudo apt-get install python-pip python-dev
sudo pip install cherrypy routes mako ws4py spidev
</pre>
<p>If you want to use python3, then the following additional commannds are needed </p>
<pre class="screen">sudo apt-get install python3-pip python3-dev
sudo pip3 install cherrypy routes mako ws4py spidev
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.operation.installation.scratchClient"></a>8.2.2.&nbsp;ScratchClient Software Installation</h3>
</div>
</div>
</div>
<p>
				scratchClient is a python program and requires no special compile step. The files are unpacked to a local directory.
			</p>
<p>
				The chmod command ensures that the files are readable also for other users.
			</p>
<p>
				On the download page, there are usually some version hints.
				<a class="ulink" href="http://heppg.de/ikg/wordpress/?page_id=6" target="_top">download page</a>
			
</p>
<p>
				The files are downloaded to user home directory, usually /home/pi.
			</p>
<p>

				
</p>
<pre class="screen">cd ~
wget http://heppg.de/ikg/administration/pi/scratchClient/download/scratchClient.tar.gz
tar xzf scratchClient.tar.gz
chmod +r -R scratchClient/
				</pre>
<p>

			
</p>
<p>
				
<span class="emphasis"><em>Verification of installation.</em></span>
			
</p>
<p>
				You should have /home/pi/scratchClient/src/scratchClient.py and other files.
			</p>
<p>
				Start scratchClient
				</p>
<pre class="screen">cd ~/scratchClient
python src/scratchClient.py -h
</pre>
<p>
				Expected output is a list of command line options.
			</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.operation.installation.spi"></a>8.2.3.&nbsp;SPI install</h3>
</div>
</div>
</div>
<p>
				Some devices are connected by SPI. When such devices are needed, SPI drivers are needed.
			</p>
<p>
				On raspberryPi, you can enable SPI by using raspi-config.
				</p>
<pre class="screen">sudo raspi-config
				</pre>
<p>
			
</p>
<p>
				To install it manually, edit raspi-blacklist
			</p>
<pre class="screen">sudo leafpad /etc/modprobe.d/raspi-blacklist.conf
</pre>
<p>
				The following entry must be available:
				</p>
<pre class="screen">#blacklist spi-bcm2708</pre>
<p>
				Delete all other lines which contain spi-bcm2708
			</p>
<p>Reboot recommended.</p>
<p>
				
<span class="emphasis"><em>Validation</em></span>
			
</p>
<p>

				Validate installed drivers. 'lsmod' lists installed drivers.
				</p>
<pre class="screen">lsmod | grep -e spi_bcm2708

				</pre>
<p>
			
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.operation.installation.i2c"></a>8.2.4.&nbsp;I2C install</h3>
</div>
</div>
</div>
<p>
				For using I2C, additional software needs to be installed.
				</p>
<pre class="screen">sudo apt-get install python-smbus</pre>
<p>
			
</p>
<p>
				On raspberryPi, you can enable I2C by using raspi-config.
				</p>
<pre class="screen">sudo raspi-config
				</pre>
<p>
			
</p>
<p>
				In addition to this driver, there is i2c-dev needed.
				Starting this manually is
				</p>
<pre class="screen">sudo modprobe i2c-dev
				</pre>
<p>
			
</p>
<p>
				To manually enable the I2C-Driver: edit raspi-blacklist
				</p>
<pre class="screen">sudo leafpad /etc/modprobe.d/raspi-blacklist.conf
</pre>
<p>
				The following entry must be available, or no entry at all:
				</p>
<pre class="screen">#blacklist i2c-bcm2708
				</pre>
<p>

				Delete all other lines which contain i2c-bcm2708
			</p>
<p>In /etc/modules , add a line with i2c-dev. This makes i2c-dev permanent.
			</p>
<p>
				Reboot recommended.
			</p>
<p>
				
<span class="emphasis"><em>Validation</em></span>
				Validate installed drivers. 'lsmod' lists installed drivers.
				</p>
<pre class="screen">lsmod | grep -e i2c
				</pre>
<p>
				Result should contain
				</p>
<pre class="screen">
i2c_dev                 6709  2
i2c_bcm2708             6200  0

				</pre>
<p>
				In folder /dev, there is a directory /dev/i2c-1 available.
			</p>
<p>
				It is recommended to install
				</p>
<pre class="screen">sudo apt-get install i2c-tools</pre>
<p>
				In these tools, i2cdetect helps to find out connected devices with their adress.
			</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.operation.installation.text2speech"></a>8.2.5.&nbsp;Text to speech install</h3>
</div>
</div>
</div>
<p>
                When using the text to speech adapter 'festival', the package 'festival' is needed.
            </p>
<p>
                
</p>
<pre class="screen">sudo apt-get install festival</pre>
<p>
            
</p>
<p>
                When using the text to speech adapter 'pico2wave', the package 'pico2wave' is needed.
            </p>
<p>
                
</p>
<pre class="screen">sudo apt-get install libttspico-utils</pre>
<p>
            
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="scratchClient.operation.installation.dma"></a>8.2.6.&nbsp;DMA library support (RPIO2)</h3>
</div>
</div>
</div>
<p>
				For DMA based adapters, a DMA-library is needed. In scratchClient releases prior to 2016-01-02, the RPIO.PWM-library was used.
				As this RPIO.PWM-library
				did not support Raspberry Pi2 or Pi2, a local patch 'RPIO2.PWM' was created.
			</p>
<p>This RPIO2.PWM library needs additional installation </p>
<p>
				
</p>
<pre class="screen">cd ~/scratchClient/RPIO2
sudo sh install.sh</pre>
<p>
			
</p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.operation.start"></a>8.3.&nbsp;Start scratchClient</h2>
</div>
</div>
</div>
<p>
			In scratch, enable the 'remote network connection'. This is needed once for a project; this setting is persisted in the project file.
			Start with (user pi)
			</p>
<pre class="screen">cd ~/scratchClient
sudo python src/scratchClient.py -config [config_file_name.xml]
</pre>
<p>
		
</p>
<p>
			For gpio access, SPI, I2C-adapters, it is usually required to run the program with root permissions. Some adapters run with 'normal' permissions, e.g. the
			text-to-speech adapter, websocket adapters or alike.
		</p>
<p>
			scratch needs to be started separately. Create a shell script if you need both programs scratchClient and scratch to be started with one command.

		</p>
<p>
			The code generates a 'scratchClient.pid'-File, which may remain in base directory. There for, start up in a dedicated home directory (~/scratchClient) is
			recommended.
		</p>
<div class="warning">
<table border="0" summary="Warning">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Warning]" src="icons/warning.png"></td><th align="left"></th>
</tr>
<tr>
<td valign="top" align="left">
<p>
				On one machine, the process may only be started once. If the process starts up, but quits after some 30 to 60 sec, then possibly another instance
				is running.
			</p>
</td>
</tr>
</table>
</div>
<p> Use command line '-h' to see options. </p>
<pre class="screen">
cd ~/scratchClient
 python src/scratchClient.py -h

-host &lt;ip&gt;           Scratch Host ip or hostname, default 127.0.0.1
-port &lt;number&gt;       Port number, default 42001

-c &lt;configfile&gt;
-config &lt;configfile&gt; Name of config xml-file, default config.xml
                     There is a lookup strategy used (add xml extension when needed,
                     literal, then config/, ../config; then add 'config_' to
                     filename and then literal, config/, ../config

-C &lt;configfile&gt;      Name of config xml-file, default config.xml
                     There is NO lookup strategy used, only literal.

-gpioLib             set the gpiolibrary, default 'RPi_GPIO_GPIOManager'
                     deprecated, will be ignored.

web gui switches

-nogui               do not show GUI
-guiRemote           allows remote access to GUI web page,
                     default is local access only

debug and test switches

-forceActive         force active mode, even if GPIO library is
                     not available.
-validate            Validate config and terminate.

-h
-help                print command line usage and exit
-v                   verbose logging
-d                   debug logging
-license             print license and exit.
-changes             print changes list

</pre>
<p>
			Most of the commands are quite self-explaining. If you want to see more information on screen, use verbose switch. Debugging switch shows even more, but then
			logging uses a lot of CPU.

		</p>
<p>
			
<span class="emphasis"><em>config:</em></span>
			For config file lookup, there is a lookup policy available. The first file found wins the game:
		</p>
<p>add xml extension when not available.</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>check file name given literally.</p>
</li>
<li class="listitem">
<p>look in ./config/</p>
</li>
<li class="listitem">
<p>look in ../config/</p>
</li>
</ul>
</div>
<p>add prefix 'config_' to filename if no path is given.</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>check file name given literally.</p>
</li>
<li class="listitem">
<p>look in ./config/</p>
</li>
<li class="listitem">
<p>look in ../config/</p>
</li>
</ul>
</div>
<p>With this policy, file names can be abbreviated.
		</p>
<p>
			
<span class="emphasis"><em>host:</em></span>
			if scratch is located on a different computer, then give the target address here.
		</p>
<p>
			
<span class="emphasis"><em>port:</em></span>
			generally not needed to use a different port.

		</p>
<p>
			
<span class="emphasis"><em>nogui:</em></span>
			does not start the web app server inside scratchClient. Less memory usage.
		</p>
<p>
			
<span class="emphasis"><em>guiRemote:</em></span>
			allows remote access to web gui.

		</p>
<p>
			
<span class="emphasis"><em>validate:</em></span>
			check the config file for correctness.

		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.operation.stop"></a>8.4.&nbsp;Stop scratchClient</h2>
</div>
</div>
</div>
<p>
			Stop with ctrl-c in console. Takes up to a minute till all background threads quit.
		</p>
<p>
			If for any reason the code refuses to quit, get the processId and kill the process
			</p>
<pre class="screen">sudo ps -ef | grep python
sudo kill -9 [processId]
			</pre>
<p>
		
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.operation.debug"></a>8.5.&nbsp;Problems running scratchClient</h2>
</div>
</div>
</div>
<p>
			Some common problems in running scratchClient are, that no sensor inputs are arriving in scratch.
			Check the following list for possible problems.
			</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>is scratchClient started? It might stop running due to problems in configuration file. Check console log for details.</p>
</li>
<li class="listitem">
<p>is scratchClient started? It might stop running due to a previous instance leaving a scratchClient.pid-File. Delete this file.</p>
</li>
<li class="listitem">
<p>
						multiple instances of scratchClient started ? Check with
						<code class="code">ps -ef | grep python</code>
						and stop other instances with
						<code class="code">kill -9 &lt;pid&gt;</code>
					
</p>
</li>
<li class="listitem">
<p>multiple instances of scratch ? Only one instance of scratch is allowed having the remote sensor protocol started. Stop other instances.</p>
</li>
</ul>
</div>
<p>
		
</p>
<p>
			Scratch will read inputs from scratchClient faster than these are processed internally. The effect is that scratch is displaying old data. In this case, decrease
			update rates of polling sensors and work on performance of scratch code.
		</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratch.autostart"></a>8.6.&nbsp;Scratch Autostart</h2>
</div>
</div>
</div>
<p>
			When auto start for scratch is needed, there are things to execute
			</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>start scratch into presentation mode</p>
</li>
<li class="listitem">
<p>enable remote connections (without user interaction)</p>
</li>
<li class="listitem">
<p>issue a 'green flag' event.</p>
</li>
</ul>
</div>
<p>

			Starting scratch and scratchClient can be in any order. Starting does not need to be manual, but can be from init.d or other
		</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="N10EF0"></a>8.6.1.&nbsp;Start scratch into presentation mode</h3>
</div>
</div>
</div>
<p>
				Starting scratch into presentation mode can be done on RaspberryPi by adding the 'presentation' keyword to the command line.
				</p>
<pre class="screen">scratch presentation [scriptname]</pre>
<p>
				When starting scratch from a background process then add the X display
				</p>
<pre class="screen">scratch presentation [scriptname] -display :0</pre>
<p>
				This will be needed when you 'remote login' to a linux system.
			</p>
<p>Starting with 'presentation'-flag also issues a green-flag-event.
			</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="remote_connection"></a>8.6.2.&nbsp; Enable remote connection (without user interaction)</h3>
</div>
</div>
</div>
<p>
				When a project uses remote connection, this is stored in the project file and enabled again when project is reloaded. Unfortunately, there is some
				user interaction needed to enable it.
				</p>
<div class="mediaobject">
<img src="images/autostart/remote_protocol_dialog.png" width="270"></div>
<p>
			
</p>
<p>
				In newer scratch releases for raspberry (e.g. 2015-11-11), there is a config file setting which bypasses this dialog.

				</p>
<pre class="screen">remoteconnectiondialog = 0</pre>
<p>
				Look for file home/pi/.scratch.ini and add this statement. If this file is not available, just create it.
			</p>
<p>
				
</p>
<div class="note">
<table border="0" summary="Note">
<tr>
<td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="icons/note.png"></td><th align="left"></th>
</tr>
<tr>
<td valign="top" align="left">
<p>
						Files starting with '.' are hidden files in linux.
					</p>
<p>
						With filemanager, enable 'show hidden files' in order to see this file.
					</p>
</td>
</tr>
</table>
</div>
<p>
			
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="green_flag"></a>8.6.3.&nbsp;Green Flag Event</h3>
</div>
</div>
</div>
<p>When scratch ist started from the command line with the 'presentation'-flag, then there is also a green-flag-event issued.</p>
<p>When a green flag event is needed when scratchClient is started, then use adapter.broadcast.ScratchStartclickedAdapter.</p>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="context"></a>8.7.&nbsp;scratchClient usage scenario</h2>
</div>
</div>
</div>
<p>ScratchClient and scratch usually run on same machine, but other scenario are possible.
		</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="sceanario.local"></a>8.7.1.&nbsp;Local setup</h3>
</div>
</div>
</div>
<p>
				In general, scratchClient and scratch will run on same machine.
			</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/context/scratch_local.png" width="243"></div>
<p>
				No special command line switches are needed to support this scenario.
			</p>
<p>
				
</p>
<div class="clean">
<a name="N10F3A"></a>
<div class="table-title">Table&nbsp;8.1.&nbsp;Firewall settings</div>
<div class="clean-contents">
<table summary="Firewall settings" border="1">
<colgroup>
<col width="100px" class="col1">
<col width="60px" class="col2">
<col width="60px" class="col3">
</colgroup>
<thead>
<tr>
<th valign="top">Module</th><th valign="top">Port</th><th valign="top">computerA</th>
</tr>
</thead>
<tbody>
<tr>
<td valign="top">NA</td><td valign="top">NA </td><td valign="top">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="clean-break">
			
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="sceanario.distributedA"></a>8.7.2.&nbsp;Distributed setup A</h3>
</div>
</div>
</div>
<p>
				scratchClient and scratch can run on different machines. I use this scenario, when debugging scratch code on a more performant machine than a raspberry pi.
				</p>
<div class="mediaobject">
<img src="images/context/scratch_distributed.png" width="378"></div>
<p>
				When starting scratchClient, use the '-host'-command line parameter and add the ip-address (or hostname) of the machine where scratch is located. Of course,
				these two machines need to be connected by a network.
			</p>
<p>
				
</p>
<div class="clean">
<a name="N10F77"></a>
<div class="table-title">Table&nbsp;8.2.&nbsp;Firewall settings</div>
<div class="clean-contents">
<table summary="Firewall settings" border="1">
<colgroup>
<col width="100px" class="col1">
<col width="60px" class="col2">
<col width="60px" class="col3">
<col width="60px" class="col4">
</colgroup>
<thead>
<tr>
<th valign="top">Module</th><th valign="top">Port</th><th valign="top">computerA</th><th valign="top">computerB </th>
</tr>
</thead>
<tbody>
<tr>
<td valign="top">scratch</td><td valign="top">42001</td><td valign="top">out </td><td valign="top">in</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="clean-break">
			
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="sceanario.distributedB"></a>8.7.3.&nbsp;Distributed setup B</h3>
</div>
</div>
</div>
<p>
				scratchClient and scratch can run on different machines. The browser used to look into the monitoring gui of scratchClient can be used from a third machine.
				</p>
<div class="mediaobject">
<img src="images/context/scratch_distributed2.png" width="535"></div>
<p>
				When starting scratchClient, use the '-host'-command line parameter and add the ip-address (or hostname) of the machine where scratch is located.
				Use '-guiRemote' to allow remote access for browser.
				Of course,
				these machines need to be connected by a network.
			</p>
<p>
				
</p>
<div class="clean">
<a name="N10FBE"></a>
<div class="table-title">Table&nbsp;8.3.&nbsp;Firewall settings</div>
<div class="clean-contents">
<table summary="Firewall settings" border="1">
<colgroup>
<col width="100px" class="col1">
<col width="60px" class="col2">
<col width="60px" class="col3">
<col width="60px" class="col4">
<col width="60px" class="col5">
</colgroup>
<thead>
<tr>
<th valign="top">Module</th><th valign="top">Port</th><th valign="top">computerA</th><th valign="top">computerB </th><th valign="top">computerC </th>
</tr>
</thead>
<tbody>
<tr>
<td valign="top">scratch</td><td valign="top">42001</td><td valign="top">out </td><td valign="top">in</td><td valign="top">&nbsp;</td>
</tr>
<tr>
<td valign="top">browser</td><td valign="top">8080</td><td valign="top">in </td><td valign="top">&nbsp;</td><td valign="top">out</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>
<br class="clean-break">
			
</p>
</div>
</div>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratchClient.extending"></a>Chapter&nbsp;9.&nbsp;Extending Functionality</h1>
</div>
</div>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="N1100D"></a>9.1.&nbsp;Hacking the code</h2>
</div>
</div>
</div>
<p>
				When you need a new adapter, not provided in the list.
				Add a new file to Directory 'adapter' named myadapter.py (choose the name according to the functionality). Place a class there named MyAdapter (again, choose
				your functional name). Derive it from adapter.Adapter, and place __init__ and command methods, as well as the output methods.
				Produce the xml-configuration for this, and give it a try.
				Testing new Adapters: add your adapter config to an xml-file, start the code in simulation mode with gui. If configurationManager reads the config successfully,
				you will be able to place commands and values to the input side, and see what happens to the simulated gpio.
</p>
<p>
				Then stop and restart in real live mode. This will attach the gpios and drive whatever is attached there.
</p>
<p>
				Using other gpio-driver as Rpi.GPIO
</p>
<p>
				There are people using Wiring, or other python libraries to access Gpio on the pi.
				Copy RPiGpio.py, which is a wrapper for the RPI-GPIO, and copy to a 'MyGPio.py'-File.
				In the new file, modify the imports and the method content to whatever is needed to run your library.
				On the command line, use -gpio [yourGpioPath], for this example it is &bdquo;adapter.MyGpio&ldquo;.
				Generally, as this is running as a standalone client, with most probably no other code in parallel, this will be rarely needed.
			</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="scratchClient.configuration.gpioNames"></a>9.2.&nbsp;GPIO Names</h2>
</div>
</div>
</div>
<p>
				GPIO names used are configurable in config/portMapping.xml. This file maps the gpioNumbers from BCM numbering to other names, either GPIO-, PIN-numbers or whatever else needed. 

				GPIO08 is GPIO numbering in BCM style.
				</p>
<pre class="screen">    &lt;port gpioNumber='8' name='GPIO08' /&gt;
</pre>
<p>
				IKG.IO.3 is used for a special adapter-board.
				</p>
<pre class="screen">    &lt;port gpioNumber='18' name='IKG.IO.3' /&gt;
</pre>
<p>
				Pin header names. The version-ambiguities are resolved by appending the version number to the port name
				</p>
<pre class="screen">    &lt;port gpioNumber='0' name='P1-03V1' /&gt;
    &lt;port gpioNumber='2' name='P1-03V2' /&gt;
</pre>
<p>
The mapped names can be used in config files.
			</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="N11027"></a>9.3.&nbsp;Python Compatibility</h2>
</div>
</div>
</div>
<p>
				The code is developed and tested in python 2.7.3.
				</p>
<p>Some checks have been performed with python3 and pypy. If there are problems in these environment, then please let me know.</p>
<p>

</p>
<p>External libraries are
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p>  Rpi.GPIO 0.5.3a or 0.5.4a </p>
</li>
<li class="listitem">
<p>  RPIO </p>
</li>
<li class="listitem">
<p>  cherrypy 3.2.4 for the web gui</p>
</li>
<li class="listitem">
<p>  route  </p>
</li>
<li class="listitem">
<p>  mako </p>
</li>
</ul>
</div>
<p> SPI, I2C, TextToSpeech as needed. 
</p>
<p>				

				Scratch is Version 1.4, as there the remote sensor protocol is available. As of now (juli 2013), I do not know about plans to have this sensor network in scratch
				2.0.
			</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="N11045"></a>9.4.&nbsp;License</h2>
</div>
</div>
</div>
<p>GNU General Public License</p>
<p> Copyright (C) 2013, 2014  Gerhard Hepp</p>
<p>

 This program is free software; you can redistribute it and/or modify it under the terms of 
 the GNU General Public License as published by the Free Software Foundation; either version 2 
 of the License, or (at your option) any later version.
</p>
<p>
 This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
 without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
 See the GNU General Public License for more details.
 </p>
<p>
 You should have received a copy of the GNU General Public License along with this program; if 
 not, write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, 
 MA 02110, USA 
			</p>
</div>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="adapter.doku"></a>Chapter&nbsp;10.&nbsp;Adapter Documentation</h1>
</div>
</div>
</div>
<p>Technical description of adapters, input, output values and events and config snippets.</p>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.i2cAdapter.ADC_ADS1015_Input"></a>10.1.&nbsp;ADC_ADS1015_Input</h2>
</div>
</div>
</div>
<a name="N1105D" class="indexterm"></a>
<p>AD-Interface for ADS1015.</p>
<p>AD-Interface for ADS1015.</p>
<h4>
<a name="N11066"></a>Class</h4>
<p>adapter.i2cAdapter.ADC_ADS1015_Input</p>
<h4>
<a name="N1106B"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			ADC value
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11093"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc.channel</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>the adc-channel
		</p>

</td>
</tr>
<tr>
<td valign="top">i2c.address</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>address is '0x48' for adafruit ADS1015-breakout
		</p>

</td>
</tr>
<tr>
<td valign="top">i2c.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>bus is '1' for RPi Release 2
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>poll interval in secs, e.g. 0.05
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N110F7"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.i2cAdapter.ADC_ADS1015_Input'  name='adc_A2'&gt;
        &lt;description&gt;ADC-Value from ADS1015 (single ended)&lt;/description&gt;
        &lt;output_value name='adc'&gt;
            &lt;sensor name='adc_A2'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='poll.interval' value='0.05' /&gt;
       
        &lt;!-- bus is '1' for RPi Release 2 --&gt;
        &lt;parameter name='i2c.bus' value='1' /&gt;
        
        &lt;!-- address is '0x48' for adafruit ADS1015 --&gt;
        &lt;parameter name='i2c.address' value='0x48' /&gt;
        
        &lt;parameter name='adc.channel' value='2' /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.adc_zone.ADC_MCP3008_10_Input"></a>10.2.&nbsp;ADC_MCP3008_10_Input</h2>
</div>
</div>
</div>
<a name="N11103" class="indexterm"></a>
<p>ADC interface MCP3008, 8 channel ADC</p>
<p>Interface to adc MCP3008, 10bit.</p>
<h4>
<a name="N1110C"></a>Class</h4>
<p>adapter.adc_zone.ADC_MCP3008_10_Input</p>
<h4>
<a name="N11111"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			value int 0..1023
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11139"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc.channel</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			adc channel (0,7).
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.band</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			deadband zone +- last value, only if new value is outside this band it is reported.
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			poll rate in seconds, default 0.05.
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			bus number, 0, 1
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			spi bus selector, 0, 1
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N111B1"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.adc.ADC_MCP3008_10_Input'  name='adc_A'&gt;
        
        &lt;description&gt;ADC-Value&lt;/description&gt;
        
        &lt;output_value name='adc'&gt;
            &lt;sensor name='adcA'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='poll.interval' value='0.066' /&gt;
        &lt;parameter name='poll.band' value='2' /&gt;
        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
        &lt;!-- channel 0..7 --&gt;
        &lt;parameter name='adc.channel' value='7' /&gt;
    &lt;/adapter&gt;

		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.adc.ADC_MCP3202_10_Input"></a>10.3.&nbsp;ADC_MCP3202_10_Input</h2>
</div>
</div>
</div>
<a name="N111BD" class="indexterm"></a>
<p>ADC interface MCP3202</p>
<p>Interface to adc MCP3202, 10bit.</p>
<h4>
<a name="N111C6"></a>Class</h4>
<p>adapter.adc.ADC_MCP3202_10_Input</p>
<h4>
<a name="N111CB"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			value 0..1023
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N111F3"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc.channel</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			adc channel (0,1).
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			poll rat ein seconds, default 0.05.
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			bus number, 0, 1
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			spi bus selector, 0, 1
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11257"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.adc.ADC_MCP3202_10_Input'  name='adc_A'&gt;
        
        &lt;description&gt;ADC-Value&lt;/description&gt;
        
        &lt;output_value name='adc'&gt;
            &lt;sensor name='adcA'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='poll.interval' value='0.066' /&gt;
        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
        &lt;parameter name='adc.channel' value='0' /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.adc_zone.ADC_MCP3202_10_Zone_Input"></a>10.4.&nbsp;ADC_MCP3202_10_Zone_Input</h2>
</div>
</div>
</div>
<a name="N11263" class="indexterm"></a>
<p>ADC interface MCP3202, zone value mapping</p>
<p>Interface to adc MCP3202, 10bit. The input values are mapped to zones.</p>
<p>Zone values can be used for threshold values, e.g. 0..511 to 0, 512..1023 to 1023.</p>
<p>Zone values can be used for value mapping, e.g. 0..99 to 'left', 100..923 to 'middle', 924..1023 to 'right'.</p>
<h4>
<a name="N11270"></a>Class</h4>
<p>adapter.adc_zone.ADC_MCP3202_10_Zone_Input</p>
<h4>
<a name="N11275"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
			value int values or string
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1129D"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc.channel</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			adc channel (0,1).
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			poll rate in seconds, default 0.05.
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			bus number, 0, 1
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			spi bus selector, 0, 1
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11301"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.adc_zone.ADC_MCP3202_10_Zone_Input'  name='adc_A_Zone'&gt;
        
        &lt;description&gt;ADC-Value&lt;/description&gt;
        
        &lt;output_value name='adc'&gt;
            &lt;sensor name='adcA_zone'/&gt;
        &lt;/output_value&gt;
        
        &lt;zone from='0' to='99' value='left'/&gt;
        &lt;zone from='100' to='923' value='middle'/&gt;
        &lt;zone from='924' to='1023' value='right'/&gt;
        
        
        &lt;parameter name='poll.interval' value='0.066' /&gt;
        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
        &lt;parameter name='adc.channel' value='0' /&gt;
    &lt;/adapter&gt;

		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.adc.ADC_MCP3202_12_Input"></a>10.5.&nbsp;ADC_MCP3202_12_Input</h2>
</div>
</div>
</div>
<a name="N1130D" class="indexterm"></a>
<p>ADC interface MCP3202</p>
<p>Interface to adc MCP3202, 12bit.</p>
<p>Supports averaging (filter).</p>
<h4>
<a name="N11318"></a>Class</h4>
<p>adapter.adc.ADC_MCP3202_12_Input</p>
<h4>
<a name="N1131D"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			value 0..4095
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11345"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc.channel</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			adc channel (0,1).
		</p>

</td>
</tr>
<tr>
<td valign="top">filter.depth</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			0,1: no filtering;
			2..10: filtering
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			poll rat ein seconds, default 0.05.
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			bus number, 0, 1
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			spi bus selector, 0, 1
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N113BD"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.adc.ADC_MCP3202_12_Input'  name='adc_A'&gt;
        
        &lt;description&gt;ADC-Value&lt;/description&gt;
        
        &lt;output_value name='adc'&gt;
            &lt;sensor name='adcA'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='filter.depth' value='8' /&gt;

        &lt;parameter name='poll.interval' value='0.066' /&gt;
        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
        &lt;parameter name='adc.channel' value='0' /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.stepper.BipolarStepper"></a>10.6.&nbsp;BipolarStepper</h2>
</div>
</div>
</div>
<a name="N113C9" class="indexterm"></a>
<p>Drives a bipolar stepper motor.</p>
<p>Bipolar steppers need four half bridge drivers, e.g. LM293</p>
<h4>
<a name="N113D2"></a>Class</h4>
<p>adapter.stepper.BipolarStepper</p>
<h4>
<a name="N113D7"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">startMotor</td><td valign="top">

<p>not used</p>

</td>
</tr>
<tr>
<td valign="top">stopMotor</td><td valign="top">

<p>not used</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N113FB"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">speed</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>time between steps. The smaller, the faster the motor will run.</p>

</td>
</tr>
<tr>
<td valign="top">target</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>Target is 'step points' on an absolute scale.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11437"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.stepper.BipolarStepper' name='stepper'&gt;
        
        &lt;description&gt;stepper control&lt;/description&gt;
        
        &lt;gpio port='GPIO25' alias='br0.0'&gt;
            &lt;default dir='OUT' pull='PUD_OFF'  /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO24' alias='br0.1'&gt;
            &lt;default dir='OUT' pull='PUD_OFF'  /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;
        
        &lt;gpio port='GPIO23' alias='br1.0'&gt;
            &lt;default dir='OUT' pull='PUD_OFF'  /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO18' alias='br1.1'&gt;
            &lt;default dir='OUT' pull='PUD_OFF'  /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;

        &lt;gpio port='GPIO22' alias='en0'&gt;
            &lt;default dir='OUT' pull='PUD_OFF'  /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' default='high' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO27' alias='en1'&gt;
            &lt;default dir='OUT' pull='PUD_OFF'  /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'  default='high' /&gt;
        &lt;/gpio&gt;

        &lt;input name='startMotor'&gt;
            &lt;broadcast name='startMotor'/&gt;
        &lt;/input&gt;
        
        &lt;input name='stopMotor'&gt;
            &lt;broadcast name='stopMotor'/&gt;
        &lt;/input&gt;

        &lt;input_value name='speed'&gt;
            &lt;variable name='speed'/&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='target'&gt;
            &lt;variable name='target'/&gt;
        &lt;/input_value&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.usbAdapter.Blink_Adapter"></a>10.7.&nbsp;Blink_Adapter</h2>
</div>
</div>
</div>
<a name="N11443" class="indexterm"></a>
<p>USB adapter for blink-device.</p>
<p>'blink(1)' is a small USB-device with two LED. See https://blink1.thingm.com/</p>
<p>The color commands do not use the device timed fade.</p>
<p>Needs installation of pyusb.</p>
<h4>
<a name="N11450"></a>Class</h4>
<p>adapter.usbAdapter.Blink_Adapter</p>
<h4>
<a name="N11455"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.usbAdapter.Blink_Adapter'  name='blink_1'&gt;
        &lt;description&gt;&lt;/description&gt;

        &lt;!--  led_0 is 'all led' --&gt;
        &lt;input_value name='led_0'&gt;
            &lt;variable name='led_all'/&gt;
            &lt;variable name='led_0'/&gt;
        &lt;/input_value&gt;

        &lt;input_value name='led_1'&gt;
            &lt;variable name='led_1'/&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='led_2'&gt;
            &lt;variable name='led_2'/&gt;
        &lt;/input_value&gt;
        
    &lt;/adapter&gt;

</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.remote.CommunicationAdapter"></a>10.8.&nbsp;CommunicationAdapter</h2>
</div>
</div>
</div>
<a name="N11461" class="indexterm"></a>
<p>Remote communication adapter.</p>
<p>Needs the scratchCommunicationServer to be started.</p>
<p>For the configuration, an adapter-specific syntax is used. </p>
<p>There is a limit on inputs, max 32 commands are supported. </p>
<h4>
<a name="N1146E"></a>Class</h4>
<p>adapter.remote.CommunicationAdapter</p>
<h4>
<a name="N11473"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">group</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            
</p>

<p>The scratchCommunicationServer can handle different (isolated) groups. Only scratchClients in same group can communicate.</p>

</td>
</tr>
<tr>
<td valign="top">server</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>IP-Address of computer where scratchCommunicationServer is located.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N114B2"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.remote.CommunicationAdapter' name='communication_adapter'&gt;
        
        &lt;!-- Adapter uses native Syntax --&gt;
        &lt;description&gt;Remote communication adapter. &lt;/description&gt;

        &lt;!--  these commands are received from scratch and forwarded to a remote attached scratchClient --&gt;
        &lt;remote type='forward'&gt;
        
            &lt;broadcast name='command_B'/&gt;  
        &lt;/remote&gt;

        &lt;!--  these commands are received from a remote attached scratchClient and sent to local scratch --&gt;
        &lt;remote type='receive'&gt;
            &lt;broadcast name='command_A'/&gt;
        &lt;/remote&gt;
        
        &lt;parameter name="group" value="groupA"  /&gt;
        &lt;parameter name="server" value="192.168.2.108" /&gt;

    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.dma_pwm.DMA_PWM"></a>10.9.&nbsp;DMA_PWM</h2>
</div>
</div>
</div>
<a name="N114BE" class="indexterm"></a>
<p>DMA based PWM adapter.</p>
<p>Needs installation of RPIO2-package.</p>
<p>Supports 0..100% pwm signals. </p>
<h4>
<a name="N114C9"></a>Class</h4>
<p>adapter.dma_pwm.DMA_PWM</p>
<h4>
<a name="N114CE"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>pwm rate [0..100]</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N114F6"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">frequency</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
            Frequency in [Hz] for the pwm signal.
        </p>

</td>
</tr>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
            initial pwm rate in [%].
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11532"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">  &lt;adapter class='adapter.dma_pwm.DMA_PWM'  name='rgb_B'&gt;
        &lt;description&gt;Sample DMA PWM, needs installation of RPIO2-package.&lt;/description&gt;

        &lt;gpio port='IKG.IO.5'&gt;
            &lt;default dir='OUT'  default='high' /&gt;
            &lt;active dir='RESERVED' /&gt;
        &lt;/gpio&gt;

        &lt;input_value name='rate'&gt;
            &lt;variable name='rgb_A_B'/&gt;
        &lt;/input_value&gt;

        &lt;parameter name='frequency' value='50' /&gt;
        &lt;parameter name='rate' value='50' /&gt;
    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.dma_pwm.DMA_PWM_ON_OFF"></a>10.10.&nbsp;DMA_PWM_ON_OFF</h2>
</div>
</div>
</div>
<a name="N1153E" class="indexterm"></a>
<p>DMA based PWM adapter with two specific pwm values.</p>
<p>Needs installation of RPIO2-package.</p>
<p> 
</p>
<h4>
<a name="N11549"></a>Class</h4>
<p>adapter.dma_pwm.DMA_PWM_ON_OFF</p>
<h4>
<a name="N1154E"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">high</td><td valign="top">

<p>set pwm to default rate.</p>

</td>
</tr>
<tr>
<td valign="top">low</td><td valign="top">

<p>set pwm to 0%.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11572"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">frequency</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
            Frequency in [Hz] for the pwm signal. Use '50' here.
        </p>

</td>
</tr>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
            initial pwm rate in [%].
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N115AE"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">

</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.dma_pwm.DMA_PWMServo"></a>10.11.&nbsp;DMA_PWMServo</h2>
</div>
</div>
</div>
<a name="N115BA" class="indexterm"></a>
<p>DMA based PWM adapter with input range specific for servo.</p>
<p>Needs installation of RPIO2-package.</p>
<p>Supports 50Hz, 1 to 2ms pwm. </p>
<h4>
<a name="N115C5"></a>Class</h4>
<p>adapter.dma_pwm.DMA_PWMServo</p>
<h4>
<a name="N115CA"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>pwm rate [0..100] for 1..2ms pwm pulse.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N115F2"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">frequency</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
            Frequency in [Hz] for the pwm signal. Use '50' here.
        </p>

</td>
</tr>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
            initial pwm rate in [%].
        </p>

</td>
</tr>
<tr>
<td valign="top">value.inverse</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
            Output signal inverted (needed if transistor follower is used to boost signal for 5V).
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11642"></a>Parameter (optional)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">millisecond.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>Default 2.0 [ms].
            Pulses usually are [1..2]ms. High value can be set up to 2.5 [ms].
        </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>Default 1.0 [ms].
            Pulses usually are [1..2]ms. Low value can be set to down to 0.5 [ms].
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1167E"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.dma_pwm.DMA_PWMServo'  name='servo_pwm'&gt;
        &lt;description&gt;Sample DMA PWM, needs installation of RPIO2-package.&lt;/description&gt;

        &lt;gpio port='GPIO23'&gt;
            &lt;default dir='OUT'  default='high' /&gt;
            &lt;active dir='RESERVED' /&gt;
        &lt;/gpio&gt;

        &lt;input_value name='rate'&gt;
            &lt;variable name='servo_A'/&gt;
        &lt;/input_value&gt;

        &lt;parameter name='frequency' value='50' /&gt;
        &lt;parameter name='rate' value='50' /&gt;
        &lt;parameter name='value.inverse' value='true' /&gt;
        
        &lt;!--  optional parameter --&gt;
        
        &lt;!--  millisecond min is 0.5 [ms] minimum, default = 1 [ms] --&gt;
        &lt;!--  millisecond max is 1.5 [ms] minimum, default = 2 [ms] --&gt;
        &lt;parameter name="millisecond.min" value="1.0" /&gt;
        &lt;parameter name="millisecond.max" value="2.0" /&gt;
    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.textToSpeech.Festival_Adapter"></a>10.12.&nbsp;Festival_Adapter</h2>
</div>
</div>
</div>
<a name="N1168A" class="indexterm"></a>
<p>Interface to 'festival'</p>
<p>festival is a text to speech package. It allows to dynamically 'speak out' text. </p>
<h4>
<a name="N11693"></a>Class</h4>
<p>adapter.textToSpeech.Festival_Adapter</p>
<h4>
<a name="N11698"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">value</td><td valign="top">

<p>

<a class="link" href="#adapter.type.restrictedStringType">restrictedStringType</a>

</p>

</td><td valign="top">

<p>value contains the text for the conversion. For stability reasons, some characters which could mess up the
			system are removed
			['|$\/&lt;&gt;&amp;~*]</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N116C0"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">queue.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Commands are queued up when triggers arrive faster than scripts terminate.
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N116E8"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.textToSpeech.Festival_Adapter'  name='festival'&gt;
        &lt;description&gt;text output&lt;/description&gt;

        &lt;input_value name='speech'&gt;
            &lt;variable name='speak'/&gt;
        &lt;/input_value&gt;
        
        &lt;parameter name="queue.max" value="5"  /&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.adapters.Gpio7segment"></a>10.13.&nbsp;Gpio7segment</h2>
</div>
</div>
</div>
<a name="N116F4" class="indexterm"></a>
<p>Interface for a 7-Segment LED</p>
<p>drives 7 GPIO pins for a 7 segment LED.</p>
<h4>
<a name="N116FD"></a>Class</h4>
<p>adapter.adapters.Gpio7segment</p>
<h4>
<a name="N11702"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">seg_a</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			drives output led according to the logical value given
		</p>

</td>
</tr>
<tr>
<td valign="top">seg_b</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			drives output led according to the logical value given
		</p>

</td>
</tr>
<tr>
<td valign="top">seg_c</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			drives output led according to the logical value given
		</p>

</td>
</tr>
<tr>
<td valign="top">seg_d</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			drives output led according to the logical value given
		</p>

</td>
</tr>
<tr>
<td valign="top">seg_e</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			drives output led according to the logical value given
		</p>

</td>
</tr>
<tr>
<td valign="top">seg_f</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			drives output led according to the logical value given
		</p>

</td>
</tr>
<tr>
<td valign="top">seg_g</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			drives output led according to the logical value given
		</p>

</td>
</tr>
<tr>
<td valign="top">value</td><td valign="top">

<p>

<a class="link" href="#adapter.type.char7segmentType">char7segmentType</a>

</p>

</td><td valign="top">

<p>
			converts input char to a pattern on the LED;
			supported chars are [0-9AbCcdEFr-]
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N117B6"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.gpio.Gpio7segment'  name='s7'&gt;
        &lt;description&gt;7 Segment driver&lt;/description&gt;

        &lt;gpio port='GPIO25' alias='a'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO24' alias='b'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO23' alias='c'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO18' alias='d'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO22' alias='e'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO27' alias='f'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO17' alias='g'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='high' /&gt;
        &lt;/gpio&gt;
        
        &lt;input_value name='value'&gt;
            &lt;variable name='siebensegment'/&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='seg_a'&gt;
            &lt;variable name='seg_A'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='seg_b'&gt;
            &lt;variable name='seg_B'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='seg_c'&gt;
            &lt;variable name='seg_C'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='seg_d'&gt;
            &lt;variable name='seg_D'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='seg_e'&gt;
            &lt;variable name='seg_E'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='seg_f'&gt;
            &lt;variable name='seg_F'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='seg_g'&gt;
            &lt;variable name='seg_G'/&gt;
        &lt;/input_value&gt;
    &lt;/adapter&gt;
    </pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioButtonInput"></a>10.14.&nbsp;GpioButtonInput</h2>
</div>
</div>
</div>
<a name="N117C2" class="indexterm"></a>
<p>Reads a GPIO pin</p>
<p>Deprecated, use GpioEventInput instead.</p>
<p>Reads a GPIO pin; sends events. Output can be inverted.</p>
<h4>
<a name="N117CD"></a>Class</h4>
<p>adapter.gpio.GpioButtonInput</p>
<h4>
<a name="N117D2"></a>Output Event</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">button_pressed</td><td valign="top">

<p>
			when button press detected
		</p>

</td>
</tr>
<tr>
<td valign="top">button_released</td><td valign="top">

<p>
			when button released
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N117F6"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			poll rate in seconds, default 0.05.
		</p>

</td>
</tr>
<tr>
<td valign="top">value.inverse</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			'false', 'true'
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11832"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.gpio.GpioButtonInput' name='button_s0'&gt;
        &lt;!-- no description, urgg --&gt;
        &lt;gpio port='GPIO25'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'/&gt;
        &lt;/gpio&gt;
        
        &lt;output name='button_pressed'&gt;
            &lt;broadcast name='s0_pressed'/&gt;
        &lt;/output&gt;
        &lt;output name='button_released'&gt;
            &lt;broadcast name='s0_released'/&gt;
        &lt;/output&gt;
        
        &lt;parameter name='poll.interval' value='0.05' /&gt;
        &lt;parameter name='value.inverse' value='true' /&gt;

    &lt;/adapter&gt;
    
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.encoder.GPIODialPlateEncoder"></a>10.15.&nbsp;GPIODialPlateEncoder</h2>
</div>
</div>
</div>
<a name="N1183E" class="indexterm"></a>
<p>Decodes a legacy rotary telephone dialplate.</p>
<p>the two switches 'nsi', 'nsa' are connected.</p>
<p>The decoding is time dependent.</p>
<h4>
<a name="N11849"></a>Class</h4>
<p>adapter.encoder.GPIODialPlateEncoder</p>
<h4>
<a name="N1184E"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">number</td><td valign="top">

<p>

<a class="link" href="#adapter.type.digitType">digitType</a>

</p>

</td><td valign="top">

<p>
			The value from the dial plate decoded.
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11876"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.encoder.GPIODialPlateEncoder'  name='dial_A'&gt;
        &lt;description&gt;W&auml;hlscheibe.
        Anschluss: NSI (Impuls) 
                   NSA (Drehschalter)
        &lt;/description&gt;

        &lt;gpio port='GPIO24' alias='nsi'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'   /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO18' alias='nsa'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'   /&gt;
        &lt;/gpio&gt;

        &lt;output_value name='number'&gt;
            &lt;sensor name='numberA'/&gt;
        &lt;/output_value&gt;
        
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.encoder.GPIOEncoder"></a>10.16.&nbsp;GPIOEncoder</h2>
</div>
</div>
</div>
<a name="N11882" class="indexterm"></a>
<p>Decodes a rotary encoder.</p>
<p>initial value is 0; is incremented or decremented.</p>
<h4>
<a name="N1188B"></a>Class</h4>
<p>adapter.encoder.GPIOEncoder</p>
<h4>
<a name="N11890"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">position</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p></p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N118B7"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.encoder.GPIOEncoder'  name='encoder_A'&gt;
        &lt;description&gt;Drehencoder&lt;/description&gt;

        &lt;gpio port='GPIO22' alias='p0'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'   /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO27' alias='p1'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'   /&gt;
        &lt;/gpio&gt;

        &lt;output_value name='position'&gt;
            &lt;sensor name='positionA'/&gt;
        &lt;/output_value&gt;

        &lt;parameter name='poll.interval' value='0.005' /&gt;

    &lt;/adapter&gt;

		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioEventInput"></a>10.17.&nbsp;GpioEventInput</h2>
</div>
</div>
</div>
<a name="N118C3" class="indexterm"></a>
<p>Reads a GPIO pin</p>
<p>Reads a GPIO pin; sends events. Output can be inverted.</p>
<h4>
<a name="N118CC"></a>Class</h4>
<p>adapter.gpio.GpioEventInput</p>
<h4>
<a name="N118D1"></a>Output Event</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">button_pressed</td><td valign="top">

<p>
            when button press detected
        </p>

</td>
</tr>
<tr>
<td valign="top">button_released</td><td valign="top">

<p>
            when button released
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N118F5"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
            poll rate in seconds, default 0.05.
        </p>

</td>
</tr>
<tr>
<td valign="top">value.inverse</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
            'false', 'true'
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11931"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.gpio.GpioButtonInput' name='button_s0'&gt;
        &lt;!-- no description, urgg --&gt;
        &lt;gpio port='GPIO25'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'/&gt;
        &lt;/gpio&gt;
        
        &lt;output name='button_pressed'&gt;
            &lt;broadcast name='s0_pressed'/&gt;
        &lt;/output&gt;
        &lt;output name='button_released'&gt;
            &lt;broadcast name='s0_released'/&gt;
        &lt;/output&gt;
        
        &lt;parameter name='poll.interval' value='0.05' /&gt;
        &lt;parameter name='value.inverse' value='true' /&gt;

    &lt;/adapter&gt;
    
        </pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioInput"></a>10.18.&nbsp;GpioInput</h2>
</div>
</div>
</div>
<a name="N1193D" class="indexterm"></a>
<p>Read a GPIO pin</p>
<p>Read a GPIO pin; sends values '0' and '1'. Output can be inverted.</p>
<h4>
<a name="N11946"></a>Class</h4>
<p>adapter.gpio.GpioInput</p>
<h4>
<a name="N1194B"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">button</td><td valign="top">

<p>

<a class="link" href="#adapter.type.binaryType">binaryType</a>

</p>

</td><td valign="top">

<p>
			0, 1 when inverted = false; 1, 0 else.
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11973"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			poll rate in seconds, default 0.05.
		</p>

</td>
</tr>
<tr>
<td valign="top">value.inverse</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			'false', 'true'
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N119AF"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.gpio.GpioInput' name='schalter_s1'&gt;
        
        &lt;gpio port='GPIO24'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'/&gt;
        &lt;/gpio&gt;
        &lt;output_value name='button'&gt;
            &lt;sensor name='s1'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='poll.interval' value='0.05' /&gt;
        &lt;parameter name='value.inverse' value='true' /&gt;
    &lt;/adapter&gt;

    
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioOutput"></a>10.19.&nbsp;GpioOutput</h2>
</div>
</div>
</div>
<a name="N119BB" class="indexterm"></a>
<p>Output to a GPIO pin</p>
<p>writes to a GPIO pin.</p>
<h4>
<a name="N119C4"></a>Class</h4>
<p>adapter.gpio.GpioOutput</p>
<h4>
<a name="N119C9"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">high</td><td valign="top">

<p>
			drives output high
		</p>

</td>
</tr>
<tr>
<td valign="top">low</td><td valign="top">

<p>
			drives output low
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N119ED"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.gpio.GpioOutput'  name='led0'&gt;
        &lt;description&gt;LED0&lt;/description&gt;

        &lt;gpio port='GPIO25'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
        &lt;input name='low'&gt;
            &lt;broadcast name='led0_OFF'/&gt;
        &lt;/input&gt;
        &lt;input name='high'&gt;
            &lt;broadcast name='led0_ON'/&gt;
        &lt;/input&gt;
    &lt;/adapter&gt;
    </pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioOutputPWM"></a>10.20.&nbsp;GpioOutputPWM</h2>
</div>
</div>
</div>
<a name="N119F9" class="indexterm"></a>
<p>Output to a GPIO pin</p>
<p>outputs a pwm signal to a pin.</p>
<p>Input 'rate' : float, 0.0 to 100.0</p>
<p>Configuration 'frequency': float, [Hz] </p>
<p>Uses soft-pwm with RPI.GPIO.</p>
<h4>
<a name="N11A08"></a>Class</h4>
<p>adapter.gpio.GpioOutputPWM</p>
<h4>
<a name="N11A0D"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			sets PWM rate, 0..100
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11A35"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">frequency</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			frequency in Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			default rate, 0..100
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11A71"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">       &lt;adapter class='adapter.gpio.GpioOutputPWM'  name='pwm_25'&gt;
        &lt;description&gt;Sample GPIO PWM&lt;/description&gt;
        &lt;gpio port='GPIO25'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active dir='RESERVED' /&gt;
        &lt;/gpio&gt;
        &lt;input_value name='rate'&gt;
            &lt;variable name='rate_25'/&gt;
        &lt;/input_value&gt;
        &lt;parameter name='frequency' value='30' /&gt;
        &lt;parameter name='rate' value='15' /&gt;
    &lt;/adapter&gt;
    
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioOutputPWM_ON_OFF"></a>10.21.&nbsp;GpioOutputPWM_ON_OFF</h2>
</div>
</div>
</div>
<a name="N11A7D" class="indexterm"></a>
<p>dim an output pin or set it off.</p>
<p>outputs a pwm signal to a pin (rate when high; 0 when low).</p>
<p>Fixed level only.</p>
<h4>
<a name="N11A88"></a>Class</h4>
<p>adapter.gpio.GpioOutputPWM_ON_OFF</p>
<h4>
<a name="N11A8D"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">high</td><td valign="top">

<p>
			sets PWM rate to [rate]
		</p>

</td>
</tr>
<tr>
<td valign="top">low</td><td valign="top">

<p>
			sets PWM rate to 0.0
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11AB1"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">frequency</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			frequency in Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			default rate, 0..100
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11AED"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">        &lt;adapter class='adapter.gpio.GpioOutputPWM_ON_OFF'  name='led0'&gt;
        &lt;description&gt;LED0&lt;/description&gt;

        &lt;gpio port='GPIO.25'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
        &lt;input name='low'&gt;
            &lt;broadcast name='led0_OFF'/&gt;
        &lt;/input&gt;
        &lt;input name='high'&gt;
            &lt;broadcast name='led0_ON'/&gt;
        &lt;/input&gt;
    &lt;/adapter&gt;

    
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioOutputPWMServo"></a>10.22.&nbsp;GpioOutputPWMServo</h2>
</div>
</div>
</div>
<a name="N11AF9" class="indexterm"></a>
<p>Output to a GPIO pin</p>
<p>outputs a pwm signal to a pin.</p>
<p>Input 'rate' : float, 0.0 to 100.0</p>
<p>Configuration 'frequency': float, [Hz] </p>
<p>Uses soft-pwm with RPI.GPIO; may produce jitter on signals.</p>
<h4>
<a name="N11B08"></a>Class</h4>
<p>adapter.gpio.GpioOutputPWMServo</p>
<h4>
<a name="N11B0D"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			sets PWM rate, 0..100
			0 --&gt; 95% 1ms
			100 --&gt; 90% 2ms @ 50Hz


		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11B35"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">frequency</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			frequency in Hz, for a servo set 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			default rate, 0..100
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11B71"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">&lt;adapter class='adapter.gpio.GpioOutputPWMServo'  name='servo_pwm'&gt;
        &lt;description&gt;Sample GPIO PWM&lt;/description&gt;

        &lt;gpio port='GPIO23'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='RESERVED' /&gt;
        &lt;/gpio&gt;

        &lt;input_value name='rate'&gt;
            &lt;variable name='servo_A'/&gt;
        &lt;/input_value&gt;

        &lt;parameter name='frequency' value='50' /&gt;
        &lt;parameter name='rate' value='50' /&gt;
    &lt;/adapter&gt;

    
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioStateOutput"></a>10.23.&nbsp;GpioStateOutput</h2>
</div>
</div>
</div>
<a name="N11B7D" class="indexterm"></a>
<p>scratch connection status</p>
<p>displays scratch connection status to a GPIO pin.</p>
<p>scratchclient not started: undefined </p>
<p>scratchclient started: low</p>
<p>no connection: high</p>
<p>connection: blink</p>
<h4>
<a name="N11B8E"></a>Class</h4>
<p>adapter.gpio.GpioStateOutput</p>
<h4>
<a name="N11B93"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.gpio.GpioStateOutput'  name='state'&gt;
        &lt;description&gt;State display on GPIO04&lt;/description&gt;

        &lt;gpio port='GPIO04' alias='state'&gt;
            &lt;default dir='OUT'  default='low' /&gt;
            &lt;active  dir='OUT'  default='low' /&gt;
        &lt;/gpio&gt;
    &lt;/adapter&gt;
    </pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.gpio.GpioValueInput"></a>10.24.&nbsp;GpioValueInput</h2>
</div>
</div>
</div>
<a name="N11B9F" class="indexterm"></a>
<p>Read a GPIO pin; sends configurable values. Output can be inverted.</p>
<p>Input is polled by 'poll.interval'. When a value change is detected, a value is aquired. The value gets inverted if 'value.inverse'==true. Then the
				configured definitions for 0 or 1 are applied from 'value.0' or 'value.1'</p>
<h4>
<a name="N11BA8"></a>Class</h4>
<p>adapter.gpio.GpioValueInput</p>
<h4>
<a name="N11BAD"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">value</td><td valign="top">

<p>

<a class="link" href="#adapter.type.anyType">anyType</a>

</p>

</td><td valign="top">

<p>
			see value.0, value.1 for values.
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11BD5"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			poll rate in seconds, default 0.05.
		</p>

</td>
</tr>
<tr>
<td valign="top">value.0</td><td valign="top">

<p>

<a class="link" href="#adapter.type.anyType">anyType</a>

</p>

</td><td valign="top">

<p>
			
</p>

<p>can be any string like 'on', 'off', 'active', 'disabled' or numeric values. Whatever a meaningful value for scratch is.</p>

<p>do not use same value as value.1</p>

</td>
</tr>
<tr>
<td valign="top">value.1</td><td valign="top">

<p>

<a class="link" href="#adapter.type.anyType">anyType</a>

</p>

</td><td valign="top">

<p>

			
</p>

<p>can be any string like 'on', 'off', 'active', 'disabled' or numeric values. Whatever a meaningful value for scratch is.</p>

<p>do not use same value as value.0</p>

</td>
</tr>
<tr>
<td valign="top">value.inverse</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			'false', 'true'
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11C45"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.gpio.GpioValueInput' name='valueGPIO'&gt;
       
        &lt;gpio port='GPIO25'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'/&gt;
        &lt;/gpio&gt;
        
        &lt;output_value name='value'&gt;
            &lt;sensor name='namedGPIO_A'/&gt;
        &lt;/output_value&gt;
        
        
        &lt;parameter name='poll.interval' value='0.08' /&gt;
        &lt;parameter name='value.inverse' value='false' /&gt;
        
        &lt;parameter name='value.0' value='switched_OFF' /&gt;
        &lt;parameter name='value.1' value='switched_ON' /&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.pigpiod.HC_SR04_Adapter"></a>10.25.&nbsp;HC_SR04_Adapter</h2>
</div>
</div>
</div>
<a name="N11C51" class="indexterm"></a>
<p>HC-SR04 connection by pigpiod-daemon</p>
<p>Measures time of echo signal.</p>
<p>Provides error value if needed.</p>
<h4>
<a name="N11C5C"></a>Class</h4>
<p>adapter.pigpiod.HC_SR04_Adapter</p>
<h4>
<a name="N11C61"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">error</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
		
</p>

<p>error information, empty when no error </p>

<p>'no connection' when pigpiod daemon can't be reached.</p>

<p>'echo pin is high' when at the start of a trigger pulse the echo pin is high, should be low.Typically a connection problem.</p>

<p>'no response' when no pos edge and then neg edge on echo pin is found. Typically a connection problem.</p>

<p>'time too long &gt; 20ms' when measured time is larger than 20ms.</p>

</td>
</tr>
<tr>
<td valign="top">time</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
		
</p>

<p>Pulse width of echo-signal in seconds.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11CAF"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen"> &lt;adapter class='adapter.pigpiod.HC_SR04_Adapter'  name='echo-time'&gt;
        &lt;description&gt;HC-SR04 controller&lt;/description&gt;

        
        
        &lt;gpio port='GPIO18'   alias='trigger'&gt;
            &lt;default dir='RESERVED' /&gt;
            &lt;active dir='RESERVED' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO23' alias='echo'&gt;
            &lt;default dir='RESERVED' /&gt;
            &lt;active dir='RESERVED' /&gt;
        &lt;/gpio&gt;

        &lt;output_value name='time'&gt;
            &lt;sensor name='time'/&gt;
        &lt;/output_value&gt;

        &lt;output_value name='error'&gt;
            &lt;sensor name='error'/&gt;
        &lt;/output_value&gt;

         &lt;!--  minimal value 0.02 --&gt;
         &lt;parameter name='poll.interval' value='0.5' /&gt;
    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.usbAdapter.HIDScanner_Adapter"></a>10.26.&nbsp;HIDScanner_Adapter</h2>
</div>
</div>
</div>
<a name="N11CBB" class="indexterm"></a>
<p>Read an USB HID device.</p>
<p>Provides scan results from a barcode scanner.</p>
<h4>
<a name="N11CC4"></a>Class</h4>
<p>adapter.usbAdapter.HIDScanner_Adapter</p>
<h4>
<a name="N11CC9"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">scan</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>scan result</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11CF1"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">usb.idProduct</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p></p>

</td>
</tr>
<tr>
<td valign="top">usb.idVendor</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p></p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11D2B"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.usbAdapter.HIDScanner_Adapter' name='barcode scanner'&gt;
        
        &lt;description&gt;Provides scan results from a barcode scanner.&lt;/description&gt;

        &lt;output_value name='scan'&gt;
            &lt;sensor name='barcode'/&gt;
        &lt;/output_value&gt;

        &lt;parameter name="usb.idVendor"  value="0x0c2e"  /&gt;
        &lt;parameter name="usb.idProduct" value="0x0200"  /&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.adc.IRDistanceInput"></a>10.27.&nbsp;IRDistanceInput</h2>
</div>
</div>
</div>
<a name="N11D37" class="indexterm"></a>
<p>IR Distance sensor</p>
<p>Interface to Sharp GP2Y0A21YK IR Distance sensor on adc MCP3202, 10bit.</p>
<p>Calculates linearization; averaging the last 5 values.</p>
<h4>
<a name="N11D42"></a>Class</h4>
<p>adapter.adc.IRDistanceInput</p>
<h4>
<a name="N11D47"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">distance</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			distance in mm; when open max value is 800.
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11D6F"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">adc.channel</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			adc channel (0,1).
		</p>

</td>
</tr>
<tr>
<td valign="top">filter.use</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
			boolean value, 1, 0, true, false, yes, no.
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			poll rat ein seconds, default 0.05.
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			bus number, 0, 1
		</p>

</td>
</tr>
<tr>
<td valign="top">spi.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
			spi bus selector, 0, 1
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11DE7"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.adc.IRDistanceInput'  name='irDistanceA'&gt;
        &lt;description&gt;IR-Distance Sensor&lt;/description&gt;

        &lt;output_value name='distance'&gt;
            &lt;sensor name='distanceA'/&gt;
        &lt;/output_value&gt;

        &lt;parameter name='poll.interval' value='0.066' /&gt;
        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
        &lt;parameter name='adc.channel' value='0' /&gt;
        &lt;parameter name='filter.use' value='true' /&gt;
        &lt;parameter name='filter.depth' value='5' /&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.linux.Linux_Adapter"></a>10.28.&nbsp;Linux_Adapter</h2>
</div>
</div>
</div>
<a name="N11DF3" class="indexterm"></a>
<p>Interface to linux operation command line</p>
<p>Allows the usage of linux shell scripts. </p>
<h4>
<a name="N11DFC"></a>Class</h4>
<p>adapter.linux.Linux_Adapter</p>
<h4>
<a name="N11E01"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">trigger</td><td valign="top">

<p>Start the script.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11E1B"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">os.command</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>The operating system command.
		</p>

</td>
</tr>
<tr>
<td valign="top">queue.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Commands are queued up when triggers arrive faster than scripts terminate.
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11E57"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.linux.Linux_Adapter'  name='sampleB'&gt;
        &lt;description&gt;linux os command execution&lt;/description&gt;

        &lt;input name='trigger'&gt;
            &lt;broadcast name='scrot'/&gt;
        &lt;/input&gt;
        
        &lt;parameter name="os.command" value="scrot"  /&gt;
        &lt;parameter name="queue.max" value="5"  /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.linux.Linux_APLAY_Adapter"></a>10.29.&nbsp;Linux_APLAY_Adapter</h2>
</div>
</div>
</div>
<a name="N11E63" class="indexterm"></a>
<p>Play wav files with aplay. </p>
<p>Linux only.</p>
<p> 
</p>
<h4>
<a name="N11E6E"></a>Class</h4>
<p>adapter.linux.Linux_APLAY_Adapter</p>
<h4>
<a name="N11E73"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">sound</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>name of wav file. With or without extension '.wav'</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11E9B"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">aplay.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            use a device reported by 'aplay -L'.
        </p>

</td>
</tr>
<tr>
<td valign="top">queue.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
            Max queue depth for commands. 5 is a good value.
        </p>

</td>
</tr>
<tr>
<td valign="top">sound.dir</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Directory where wave files are looked for, e.g /home/pi/temp.
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11EEB"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.linux.Linux_APLAY_Adapter' name='sampleA'&gt;
        &lt;description&gt;linux aplay execution&lt;/description&gt;

        &lt;input_value name='sound'&gt;
             &lt;variable name='wave'/&gt;
        &lt;/input_value&gt;
        
        &lt;parameter name="aplay.device" value="sysdefault:CARD=Device"  /&gt;
        &lt;parameter name='sound.dir' value='/opt/sonic-pi/etc/samples' /&gt; 
        &lt;parameter name="queue.max" value="5"  /&gt;
    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.linux.Linux_ARECORD_Adapter"></a>10.30.&nbsp;Linux_ARECORD_Adapter</h2>
</div>
</div>
</div>
<a name="N11EF7" class="indexterm"></a>
<p>record wav files with arecord. </p>
<p>Linux only.</p>
<p> 
</p>
<h4>
<a name="N11F02"></a>Class</h4>
<p>adapter.linux.Linux_ARECORD_Adapter</p>
<h4>
<a name="N11F07"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">start_record</td><td valign="top">

<p>start recording.</p>

</td>
</tr>
<tr>
<td valign="top">stop_record</td><td valign="top">

<p>stop recording.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11F2B"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">sound</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>name of wav file. Extension '.wav' is not needed.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11F53"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">aplay.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            use a device reported by 'aplay -L'.
        </p>

</td>
</tr>
<tr>
<td valign="top">aplay.rate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
            Sampling rate in Hertz. The default rate is 8000 Hertz.
        </p>

</td>
</tr>
<tr>
<td valign="top">sound.dir</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Directory where wave files are looked for, e.g /home/pi/temp.
        </p>

</td>
</tr>
<tr>
<td valign="top">timeout</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
            timeout for recording, 60 [sec] is recommended.
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11FB7"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.linux.Linux_ARECORD_Adapter' name='sampleA'&gt;
        &lt;description&gt;linux arecord execution&lt;/description&gt;

        &lt;input_value name='sound'&gt;
             &lt;variable name='wave'/&gt;
        &lt;/input_value&gt;
        
        &lt;input name='start_record'&gt;
         &lt;broadcast name='start'/&gt;
        &lt;/input&gt;
        
       &lt;input name='stop_record'&gt;
         &lt;broadcast name='stop'/&gt;
        &lt;/input&gt;
        
        
        &lt;parameter name="aplay.device" value="sysdefault:CARD=Device"  /&gt;
        &lt;parameter name="aplay.rate"   value="16000"  /&gt;
        &lt;parameter name='sound.dir' value='/home/pi/temp' /&gt; 
        &lt;parameter name='timeout' value='60' /&gt; 
    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.linux.Linux_ASR_Adapter"></a>10.31.&nbsp;Linux_ASR_Adapter</h2>
</div>
</div>
</div>
<a name="N11FC3" class="indexterm"></a>
<p>Interface for a specch recognition process. </p>
<p>Linux only. Needs installation of a speech recognition system,e.g. pocketsphinx. This system is writing text to stdout.</p>
<p>The design is to use pocketsphinx in batch mode. </p>
<h4>
<a name="N11FCE"></a>Class</h4>
<p>adapter.linux.Linux_ASR_Adapter</p>
<h4>
<a name="N11FD3"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">execute</td><td valign="top">

<p>start process.</p>

</td>
</tr>
<tr>
<td valign="top">textAcknowledge</td><td valign="top">

<p>when a text variable is processed, send acknowledge to receive next text.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N11FF7"></a>Output Event</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">complete</td><td valign="top">

<p>Process terminated.</p>

</td>
</tr>
<tr>
<td valign="top">textAvailable</td><td valign="top">

<p>A text variable is available in scratch and can be processed.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1201B"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">status</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>Status information from adapter.</p>

</td>
</tr>
<tr>
<td valign="top">text</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>A line from process' stdout is sent.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12057"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">command.line</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            process and parameter for linux process. ${sound.dir}/${sound.file} can be used to insert dir/file name of wave file.
        </p>

</td>
</tr>
<tr>
<td valign="top">sound.dir</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Directory where wave files are looked for, e.g /home/pi/temp.
        </p>

</td>
</tr>
<tr>
<td valign="top">sound.file</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            name of wave file to process
        </p>

</td>
</tr>
<tr>
<td valign="top">timeout</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
            timeout.
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N120BB"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.linux.Linux_ASR_Adapter' name='sampleA'&gt;
        &lt;description&gt;linux speech recoginition with pocketsphinx&lt;/description&gt;

        &lt;input name='execute'&gt;
            &lt;broadcast name='execute' /&gt;
        &lt;/input&gt;

        &lt;output name='complete'&gt;
            &lt;broadcast name='finished' /&gt;
        &lt;/output&gt;

        &lt;input name='textAcknowledge'&gt;
            &lt;broadcast name='ack' /&gt;
        &lt;/input&gt;

        &lt;output name='textAvailable'&gt;
            &lt;broadcast name='listen' /&gt;
        &lt;/output&gt;

        &lt;output_value name='text'&gt;
            &lt;sensor name='text' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='status'&gt;
            &lt;sensor name='status' /&gt;
        &lt;/output_value&gt;

        &lt;!-- ${sound.dir} is filled from 'sound.dir'; ${sound.file} is filled from 'sound.file' --&gt;
        &lt;parameter 
           name='command.line'
           value='pocketsphinx_continuous -hmm /usr/local/share/pocketsphinx/model/en-us/en-us -lm 0609.lm -dict 0609.dic -samprate 16000/8000/48000 -logfn /dev/null -infile ${sound.dir}/${sound.file}' /&gt;

        &lt;parameter name='sound.dir' value='/home/pi' /&gt;
        &lt;parameter name='sound.file' value='sample.wav' /&gt;
        &lt;!--
            Text received is internally queued. When queue data are getting too old, these are discarded.
            Timeout is configured here in sec.
            The timeout is used for scenario, where the acknowledge protocol is not yet implemented and
            data are accumulated in internal queue.  
        --&gt;
        &lt;parameter name='timeout' value='60' /&gt;
    &lt;/adapter&gt;

</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.i2cAdapter.Luminosity_BH1750_Input"></a>10.32.&nbsp;Luminosity_BH1750_Input</h2>
</div>
</div>
</div>
<a name="N120C7" class="indexterm"></a>
<p>Interface for Luminosity sensor BH1750</p>
<p>Interface for Luminosity sensor BH1750</p>
<p>Values are in lx (lux)</p>
<h4>
<a name="N120D2"></a>Class</h4>
<p>adapter.i2cAdapter.Luminosity_BH1750_Input</p>
<h4>
<a name="N120D7"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">luminosity</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			brightness in lx
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N120FF"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">i2c.address</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>'0x23' for BH1750
			'0x5c' for BH1750
		</p>

</td>
</tr>
<tr>
<td valign="top">i2c.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>bus is '1' for RPi Release 2
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>poll interval in secs, e.g. 0.05
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1214F"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.i2cAdapter.Luminosity_BH1750_Input'  name='luminosity'&gt;
        &lt;description&gt;Luminosity-Value from BH1750&lt;/description&gt;
        
        &lt;output_value name='luminosity'&gt;
            &lt;sensor name='luminosity'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='poll.interval' value='0.5' /&gt;
       
        &lt;!-- bus is '1' for RPi Release 2 --&gt;
        &lt;parameter name='i2c.bus' value='1' /&gt;
        
        &lt;!-- Depending on address select, the bus address is 
             '0x23' for BH1750 
             '0x5c' for BH1750 
             --&gt;
        &lt;parameter name='i2c.address' value='0x23' /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.spiAdapter.MAX31855_Adapter"></a>10.33.&nbsp;MAX31855_Adapter</h2>
</div>
</div>
</div>
<a name="N1215B" class="indexterm"></a>
<p>Thermoelement processor MAX31855</p>
<p></p>
<h4>
<a name="N12163"></a>Class</h4>
<p>adapter.spiAdapter.MAX31855_Adapter</p>
<h4>
<a name="N12168"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">temp_error</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>error code, empty when no error</p>

</td>
</tr>
<tr>
<td valign="top">temp_intern</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>internal temperature in &deg;C</p>

</td>
</tr>
<tr>
<td valign="top">temp_wire</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>wire temperature in &deg;C</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N121B8"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>polling time, e.g. 0.5 seconds </p>

</td>
</tr>
<tr>
<td valign="top">spi.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p></p>

</td>
</tr>
<tr>
<td valign="top">spi.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p></p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12206"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.spiAdapter.MAX31855_Adapter'  name='thermoelement'&gt;
        
        &lt;description&gt;Temperatures
        SPI-connected.
        &lt;/description&gt;
        
        &lt;output_value name='temp_wire'&gt;
            &lt;sensor name='temp_ext'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='temp_intern'&gt;
            &lt;sensor name='temp_int'/&gt;
        &lt;/output_value&gt;

        &lt;output_value name='temp_error'&gt;
            &lt;sensor name='temp_error'/&gt;
        &lt;/output_value&gt;

        &lt;!-- polling time for external device --&gt;
        &lt;parameter name='poll.interval' value='0.5' /&gt;

        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.mcp23s17.MCP23S17_Adapter"></a>10.34.&nbsp;MCP23S17_Adapter</h2>
</div>
</div>
</div>
<a name="N12212" class="indexterm"></a>
<p>MCP23S17 Port Expander</p>
<p>Controls MCP23S17 Port expander, as used on piFace-Board.</p>
<p>input_value methods in python are dynamically generated like inputGPA4 for io@dir=out</p>
<p>output_value methods in python are dynamically generated like outputGPB2 for io@dir=in</p>
<p>see the config/config_mcp23s17.xml example for namespace usage in xml.</p>
<h4>
<a name="N12221"></a>Class</h4>
<p>adapter.mcp23s17.MCP23S17_Adapter</p>
<h4>
<a name="N12226"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">23s17.addr</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>slave address must match the hard wired slave address on the device </p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>polling interval in seconds, 0.05 sec is a good value.</p>

</td>
</tr>
<tr>
<td valign="top">spi.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
		
</p>

</td>
</tr>
<tr>
<td valign="top">spi.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
		
</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1228A"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.mcp23s17.MCP23S17_Adapter' name='MCP23S17'&gt;
      
        &lt;!-- this is the setup for piface --&gt;
        &lt;!-- input_value methods in python are dynamically generated like inputGPA4 for io@dir=out --&gt;

        &lt;input_value name='inputGPA0'&gt;
            &lt;variable name='out_0' /&gt;
            &lt;variable name='relais_0' /&gt;
            &lt;variable name='all' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='inputGPA1'&gt;
            &lt;variable name='out_1' /&gt;
            &lt;variable name='relais_1' /&gt;
            &lt;variable name='all' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='inputGPA2'&gt;
            &lt;variable name='out_2' /&gt;
            &lt;variable name='all' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='inputGPA3'&gt;
            &lt;variable name='out_3' /&gt;
            &lt;variable name='all' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='inputGPA4'&gt;
            &lt;variable name='out_4' /&gt;
            &lt;variable name='all' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='inputGPA5'&gt;
            &lt;variable name='out_5' /&gt;
            &lt;variable name='all' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='inputGPA6'&gt;
            &lt;variable name='out_6' /&gt;
            &lt;variable name='all' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='inputGPA7'&gt;
            &lt;variable name='out_7' /&gt;
            &lt;variable name='all' /&gt;
        &lt;/input_value&gt;

        &lt;!-- output_value methods in python are dynamically generated like outputGPB2 for io@dir=in --&gt;

        &lt;output_value name='outputGPB0'&gt;
            &lt;sensor name='in_0' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='outputGPB1'&gt;
            &lt;sensor name='in_1' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='outputGPB2'&gt;
            &lt;sensor name='in_2' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='outputGPB3'&gt;
            &lt;sensor name='in_3' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='outputGPB4'&gt;
            &lt;sensor name='in_4' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='outputGPB5'&gt;
            &lt;sensor name='in_5' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='outputGPB6'&gt;
            &lt;sensor name='in_6' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='outputGPB7'&gt;
            &lt;sensor name='in_7' /&gt;
        &lt;/output_value&gt;

        &lt;parameter name='poll.interval' value='0.05' /&gt;

        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
        &lt;!-- slave address must match the hard wired slave address on the device --&gt;
        &lt;parameter name='23s17.addr' value='0' /&gt;

        &lt;!-- this is the setup for piface --&gt;
        
        &lt;io id='GPA0' dir='out' /&gt;
        &lt;io id='GPA1' dir='out' /&gt;
        &lt;io id='GPA2' dir='out' /&gt;
        &lt;io id='GPA3' dir='out' /&gt;

        &lt;io id='GPA4' dir='out' /&gt;
        &lt;io id='GPA5' dir='out' /&gt;
        &lt;io id='GPA6' dir='out' /&gt;
        &lt;io id='GPA7' dir='out' /&gt;

        &lt;io id='GPB0' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB1' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB2' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB3' dir='in' pullup='weak' /&gt;

        &lt;io id='GPB4' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB5' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB6' dir='in' pullup='weak' /&gt;
        &lt;io id='GPB7' dir='in' pullup='weak' /&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.arduino.NEOPIXEL_Adapter"></a>10.35.&nbsp;NEOPIXEL_Adapter</h2>
</div>
</div>
</div>
<a name="N12296" class="indexterm"></a>
<p>Interface to ArduinoUNO by USB-connection for WS2812 (neopixel)</p>
<p>Needs an arduino sketch.</p>
<h4>
<a name="N1229F"></a>Class</h4>
<p>adapter.arduino.NEOPIXEL_Adapter</p>
<h4>
<a name="N122A4"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">led</td><td valign="top">

<p>

<a class="link" href="#adapter.type.colorType">colorType</a>

</p>

</td><td valign="top">

<p>blank separated array of color values.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N122CC"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">led.length</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Number of chips connected to arduino.</p>

</td>
</tr>
<tr>
<td valign="top">led.shadow</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
        
</p>

<p>shadow keeps a duplicate of led values in memory and only sends set-led if values
             have changed. This reduces communication effort to arduino and improves
             speed.</p>

</td>
</tr>
<tr>
<td valign="top">serial.baud</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Default is 115200. This value is used in firmware.</p>

</td>
</tr>
<tr>
<td valign="top">serial.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            
</p>

<p>on windows, use COMn, e.g. COM6 </p>

<p>on raspberry, use /dev/ttyn, e.g. /dev/ttyUSB0</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12339"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.arduino.NEOPIXEL_Adapter' name='UNO_NEOPIXEL'&gt;
        &lt;!--  Sample arduino communication. Needs arduino sketch programmed in arduino. --&gt;

        &lt;input_value name='led'&gt;
            &lt;variable name='led'/&gt;
        &lt;/input_value&gt;
        
        &lt;input name='clear'&gt;
            &lt;broadcast name='clear'/&gt;
        &lt;/input&gt;

        &lt;input name='red'&gt;
            &lt;broadcast name='red_all'/&gt;
        &lt;/input&gt;
        &lt;input name='green'&gt;
            &lt;broadcast name='green_all'/&gt;
        &lt;/input&gt;
        &lt;input name='blue'&gt;
            &lt;broadcast name='blue_all'/&gt;
        &lt;/input&gt;

        &lt;!-- ==================================================== --&gt;
        &lt;!--  on windows, use COMn, e.g. COM6  --&gt;
        &lt;!--  on raspberry, use /dev/ttyn, e.g. /dev/ttyAMA0  --&gt;
         
        &lt;!--  &lt;parameter name='serial.device' value='/dev/ttyUSB0' /&gt;
         --&gt;
        
        &lt;parameter name='led.length' value='144' /&gt;
        
        &lt;!-- shadow keeps a duplicate of led values in memory and only sends set-led if values
             have changed. This reduces communication effort to arduino and improves
             speed.  --&gt;
        &lt;parameter name='led.shadow' value='true' /&gt;
        
        &lt;parameter name='serial.device' value='COM19' /&gt;
        &lt;parameter name='serial.baud' value='115200' /&gt;

        &lt;!-- ==================================================== --&gt;
        

    &lt;/adapter&gt;
        </pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.openweathermapAdapter.Openweathermap_Adapter"></a>10.36.&nbsp;Openweathermap_Adapter</h2>
</div>
</div>
</div>
<a name="N12345" class="indexterm"></a>
<p>Reading openweathermap data. </p>
<p>Read openweathermap data. Needs credentials from http://openweathermap.org to work.</p>
<p>Needs installation of  'pyowm'. </p>
<h4>
<a name="N12350"></a>Class</h4>
<p>adapter.openweathermapAdapter.Openweathermap_Adapter</p>
<h4>
<a name="N12355"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">location</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Location name to get weather for. 
        </p>

</td>
</tr>
<tr>
<td valign="top">openweather.api_key</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Get these from openweathermap for your account
        </p>

</td>
</tr>
<tr>
<td valign="top">pollrate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
            pollrate in seconds.
             The api allows pollrate depending on license status. 
             The free API allows pollrates of 10min == 600
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N123A5"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.openweathermapAdapter.Openweathermap_Adapter' name='openweathermap'&gt;
        &lt;description&gt;Retrieve openweathermap data&lt;/description&gt;

        
        &lt;output_value name='location'&gt;
            &lt;sensor name='owm.location' /&gt;
        &lt;/output_value&gt;
        
       &lt;output_value name='clouds'&gt;
            &lt;sensor name='owm.clouds' /&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='rainfall'&gt;
            &lt;sensor name='owm.rainfall' /&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='snowfall'&gt;
            &lt;sensor name='owm.snowfall' /&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='temperature'&gt;
            &lt;sensor name='owm.temperature' /&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='humidity'&gt;
            &lt;sensor name='owm.humidity' /&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='pressure'&gt;
            &lt;sensor name='owm.pressure' /&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='wind_speed'&gt;
            &lt;sensor name='owm.wind_speed' /&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='wind_direction'&gt;
            &lt;sensor name='owm.wind_direction' /&gt;
        &lt;/output_value&gt;

        &lt;parameter name='openweather.api_key' value='b0d1...' /&gt;
        
        &lt;!--  pollrate in seconds
             The api allows pollrate depending on license status. 
             The free API allows pollrates of 10min == 600  --&gt;
             
        &lt;parameter name='pollrate' value='600' /&gt;
        
        &lt;parameter name='location' value='Leinfelden-Echterdingen' /&gt;
        
    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.Cap1188Adapter.PianoHat_CAP1188_Adapter"></a>10.37.&nbsp;PianoHat_CAP1188_Adapter</h2>
</div>
</div>
</div>
<a name="N123B1" class="indexterm"></a>
<p>PianoHat Adapter.</p>
<p>Installation procedures for pianohat required.</p>
<p>Supports button presses and releases. </p>
<h4>
<a name="N123BC"></a>Class</h4>
<p>adapter.Cap1188Adapter.PianoHat_CAP1188_Adapter</p>
<h4>
<a name="N123C1"></a>Output Event</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">broadcast_00_off</td><td valign="top">

<p>button 00, C</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_00_on</td><td valign="top">

<p>button 00, C</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_01_off</td><td valign="top">

<p>button 01, C#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_01_on</td><td valign="top">

<p>button 01, C#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_02_off</td><td valign="top">

<p>button 02, D</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_02_on</td><td valign="top">

<p>button 02, D</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_03_off</td><td valign="top">

<p>button 03, D#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_03_on</td><td valign="top">

<p>button 03, D#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_04_off</td><td valign="top">

<p>button 04, E</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_04_on</td><td valign="top">

<p>button 04, E</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_05_off</td><td valign="top">

<p>button 05, F</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_05_on</td><td valign="top">

<p>button 05, F</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_06_off</td><td valign="top">

<p>button 06, F#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_06_on</td><td valign="top">

<p>button 06, F#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_07_off</td><td valign="top">

<p>button 07, G</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_07_on</td><td valign="top">

<p>button 07, G</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_08_off</td><td valign="top">

<p>button 08, G#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_08_on</td><td valign="top">

<p>button 08, G#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_09_off</td><td valign="top">

<p>button 09, A</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_09_on</td><td valign="top">

<p>button 09, A</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_10_off</td><td valign="top">

<p>button 10, A#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_10_on</td><td valign="top">

<p>button 10, A#</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_11_off</td><td valign="top">

<p>button 11, B</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_11_on</td><td valign="top">

<p>button 11, B</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_12_off</td><td valign="top">

<p>button 12, c</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_12_on</td><td valign="top">

<p>button 12, c</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_13_off</td><td valign="top">

<p>button 13, octave down</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_13_on</td><td valign="top">

<p>button 13, octave down</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_14_off</td><td valign="top">

<p>button 14, octave up</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_14_on</td><td valign="top">

<p>button 14, octave up</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_15_off</td><td valign="top">

<p>button 15, instrument</p>

</td>
</tr>
<tr>
<td valign="top">broadcast_15_on</td><td valign="top">

<p>button 15, instrument</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12511"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">auto_leds</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
            Controls the autoled behaviour.
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12539"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.Cap1188Adapter.PianoHat_CAP1188_Adapter' name='piano_adapter'&gt;
        
        &lt;description&gt;pimoroni piano hat&lt;/description&gt;

        &lt;output name='broadcast_00_on'&gt;&lt;broadcast name='button_00'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_01_on'&gt;&lt;broadcast name='button_01'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_02_on'&gt;&lt;broadcast name='button_02'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_03_on'&gt;&lt;broadcast name='button_03'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_04_on'&gt;&lt;broadcast name='button_04'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_05_on'&gt;&lt;broadcast name='button_05'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_06_on'&gt;&lt;broadcast name='button_06'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_07_on'&gt;&lt;broadcast name='button_07'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_08_on'&gt;&lt;broadcast name='button_08'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_09_on'&gt;&lt;broadcast name='button_09'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_10_on'&gt;&lt;broadcast name='button_10'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_11_on'&gt;&lt;broadcast name='button_11'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_12_on'&gt;&lt;broadcast name='button_12'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_13_on'&gt;&lt;broadcast name='button_13'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_14_on'&gt;&lt;broadcast name='button_14'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_15_on'&gt;&lt;broadcast name='button_15'/&gt;&lt;/output&gt;

        &lt;output name='broadcast_00_off'&gt;&lt;broadcast name='button_00_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_01_off'&gt;&lt;broadcast name='button_01_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_02_off'&gt;&lt;broadcast name='button_02_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_03_off'&gt;&lt;broadcast name='button_03_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_04_off'&gt;&lt;broadcast name='button_04_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_05_off'&gt;&lt;broadcast name='button_05_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_06_off'&gt;&lt;broadcast name='button_06_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_07_off'&gt;&lt;broadcast name='button_07_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_08_off'&gt;&lt;broadcast name='button_08_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_09_off'&gt;&lt;broadcast name='button_09_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_10_off'&gt;&lt;broadcast name='button_10_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_11_off'&gt;&lt;broadcast name='button_11_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_12_off'&gt;&lt;broadcast name='button_12_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_13_off'&gt;&lt;broadcast name='button_13_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_14_off'&gt;&lt;broadcast name='button_14_off'/&gt;&lt;/output&gt;
        &lt;output name='broadcast_15_off'&gt;&lt;broadcast name='button_15_off'/&gt;&lt;/output&gt;

        &lt;parameter name="auto_leds" value="true"  /&gt;

    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.textToSpeech.Pico2Wave_Adapter"></a>10.38.&nbsp;Pico2Wave_Adapter</h2>
</div>
</div>
</div>
<a name="N12545" class="indexterm"></a>
<p>Interface to 'pico2wave'</p>
<p>pico2wave is a text to speech package. It allows to dynamically 'speak out' text. </p>
<p>Install: sudo apt-get install libttspico-utils </p>
<p>Validate: <code class="code">pico2wave -w lookdave.wav "Look Dave, I can see you're really upset about this." &amp;&amp; aplay lookdave.wav </code>

</p>
<h4>
<a name="N12555"></a>Class</h4>
<p>adapter.textToSpeech.Pico2Wave_Adapter</p>
<h4>
<a name="N1255A"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">value</td><td valign="top">

<p>

<a class="link" href="#adapter.type.restrictedStringType">restrictedStringType</a>

</p>

</td><td valign="top">

<p>value contains the text for the conversion. For stability reasons, some characters which could mess up the
            system are removed
            ['|$\/&lt;&gt;&amp;~*]</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12582"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">queue.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Commands are queued up when triggers arrive faster than scripts terminate.
        </p>

</td>
</tr>
<tr>
<td valign="top">tts.lang</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>Language 'en-US', 'en-GB', 'de-DE', 'es-ES', 'fr-FR', 'it-IT'.
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N125BE"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.textToSpeech.Pico2Wave_Adapter'  name='pico2wave'&gt;
        &lt;description&gt;text output&lt;/description&gt;

        &lt;input_value name='speech'&gt;
            &lt;variable name='speak'/&gt;
        &lt;/input_value&gt;
        
        &lt;parameter name="queue.max" value="5"  /&gt;
        &lt;parameter name="tts.lang" value="de-DE"  /&gt;

    &lt;/adapter&gt;
        </pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.serialAdapter.PicoBoard_Adapter"></a>10.39.&nbsp;PicoBoard_Adapter</h2>
</div>
</div>
</div>
<a name="N125CA" class="indexterm"></a>
<p>Interface to PicoBoard by USB-connection</p>
<p>PicoBoard is an USB-connected interface board, serial style. It provides a slider, button, sound sensor, light sensor and resistor-measuring inputs.
			</p>
<p>This board is fairly well supported by scratch directly. Use this adapter, if you need two of them, or need to have a look to raw values.</p>
<h4>
<a name="N125D5"></a>Class</h4>
<p>adapter.serialAdapter.PicoBoard_Adapter</p>
<h4>
<a name="N125DA"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">button</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>button value, in raw, 0 when pressed, 1023 else. "true" when pressed, "false" else.</p>

</td>
</tr>
<tr>
<td valign="top">light</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>light value, in raw 0..1023 (bright to dark), else 100..0 (bright to dark).</p>

</td>
</tr>
<tr>
<td valign="top">sensorA</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>sensorA value, in raw 0..1023, else 0..100.</p>

</td>
</tr>
<tr>
<td valign="top">sensorB</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>sensorB value, in raw 0..1023, else 0..100.</p>

</td>
</tr>
<tr>
<td valign="top">sensorC</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>sensorC value, in raw 0..1023, else 0..100.</p>

</td>
</tr>
<tr>
<td valign="top">sensorD</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>sensorD value, in raw 0..1023, else 0..100.</p>

</td>
</tr>
<tr>
<td valign="top">slider</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>slider value, in raw 0..1023, else 0..100.</p>

</td>
</tr>
<tr>
<td valign="top">sound</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>sound value, in raw 0..1023 (quiet to loud), else 0..100.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1268E"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">picoBoard.raw</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>If true, the values are transmitted to scratch as send by the board. If false, the values are scaled as for
			the ScratchBoard.</p>

</td>
</tr>
<tr>
<td valign="top">serial.baud</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Default is 38400. This value is used in firmware.</p>

</td>
</tr>
<tr>
<td valign="top">serial.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
			
</p>

<p>on windows, use COMn, e.g. COM6 </p>

<p>on raspberry, use /dev/ttyn, e.g. /dev/ttyUSB0</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N126E4"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.serialAdapter.PicoBoard_Adapter'  name='picoboard'&gt;
        &lt;description&gt;Send receive text messages&lt;/description&gt;
        
        &lt;output_value name='slider'&gt;
            &lt;sensor name='slider'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='light'&gt;
            &lt;sensor name='light'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='sound'&gt;
            &lt;sensor name='sound'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='button'&gt;
            &lt;sensor name='button'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='sensorA'&gt;
            &lt;sensor name='resistance-A'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='sensorB'&gt;
            &lt;sensor name='resistance-B'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='sensorC'&gt;
            &lt;sensor name='resistance-C'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='sensorD'&gt;
            &lt;sensor name='resistance-D'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='serial.device' value='/dev/ttyUSB0' /&gt;
        &lt;parameter name='serial.baud' value='38400' /&gt;

        &lt;parameter name='picoBoard.raw' value='false' /&gt;
       
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.i2cAdapter.Pressure_BMP085_Input"></a>10.40.&nbsp;Pressure_BMP085_Input</h2>
</div>
</div>
</div>
<a name="N126F0" class="indexterm"></a>
<p>Interface for air pressure sensor BMP085</p>
<p>Environmental sensor air pressure and temperature</p>
<h4>
<a name="N126F9"></a>Class</h4>
<p>adapter.i2cAdapter.Pressure_BMP085_Input</p>
<h4>
<a name="N126FE"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">pressure</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			pressure in pa
		</p>

</td>
</tr>
<tr>
<td valign="top">temperature</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
			temperature in &deg;C
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1273A"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">i2c.address</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>Depending on address select, the bus address is
			'0x77' for BMP085

		</p>

</td>
</tr>
<tr>
<td valign="top">i2c.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>bus is '1' for RPi Release 2
		</p>

</td>
</tr>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>poll interval in secs, e.g. 0.05
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1278A"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.i2cAdapter.Pressure_BMP085_Input'  name='pressure'&gt;
        &lt;description&gt;Pressure-Value from BMP085
        Connected to I2C-Bus.
        &lt;/description&gt;
        
        &lt;output_value name='pressure'&gt;
            &lt;sensor name='pressure'/&gt;
        &lt;/output_value&gt;

        &lt;output_value name='temperature'&gt;
            &lt;sensor name='temperature'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='poll.interval' value='2.5' /&gt;
       
        &lt;!-- bus is '1' for RPi Release 2 --&gt;
        &lt;parameter name='i2c.bus' value='1' /&gt;
        
        &lt;!-- Depending on address select, the bus address is '0x77' for BMP085 --&gt;
        &lt;parameter name='i2c.address' value='0x77' /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.i2cAdapter.PWM_PCA9685"></a>10.41.&nbsp;PWM_PCA9685</h2>
</div>
</div>
</div>
<a name="N12796" class="indexterm"></a>
<p>Interface for Luminosity sensor BH1750</p>
<p>16-channel, 12-bit PWM Fm+ I2C-bus LED controller</p>
<p></p>
<h4>
<a name="N127A0"></a>Class</h4>
<p>adapter.i2cAdapter.PWM_PCA9685</p>
<h4>
<a name="N127A5"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">channel_0</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_1</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_10</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_11</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100        </p>

</td>
</tr>
<tr>
<td valign="top">channel_12</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100        </p>

</td>
</tr>
<tr>
<td valign="top">channel_13</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100        </p>

</td>
</tr>
<tr>
<td valign="top">channel_14</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100        </p>

</td>
</tr>
<tr>
<td valign="top">channel_15</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100        </p>

</td>
</tr>
<tr>
<td valign="top">channel_2</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_3</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_4</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_5</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_6</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_7</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_8</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">channel_9</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_0</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_1</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_10</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_11</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz</p>

</td>
</tr>
<tr>
<td valign="top">servo_12</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz</p>

</td>
</tr>
<tr>
<td valign="top">servo_13</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz</p>

</td>
</tr>
<tr>
<td valign="top">servo_14</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz</p>

</td>
</tr>
<tr>
<td valign="top">servo_15</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz</p>

</td>
</tr>
<tr>
<td valign="top">servo_2</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_3</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_4</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_5</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_6</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_7</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_8</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
<tr>
<td valign="top">servo_9</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>
			input from scratch to adapter, value = 0..100,1 to 2ms pulse with at 50Hz
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12A39"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">frequency</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>frequency in Hz, 50Hz for Servo are recommended
		</p>

</td>
</tr>
<tr>
<td valign="top">i2c.address</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>Depending on address select, the bus address is
			'0x40' for device
		</p>

</td>
</tr>
<tr>
<td valign="top">i2c.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>bus is '1' for RPi Release 2
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12A89"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.i2cAdapter.PWM_PCA9685' name='16-channel PWM'&gt;
        &lt;description&gt;DEMO for the PCA adapter.&lt;/description&gt;


        &lt;!-- the scratch variable names are simply the method names here. Could be more useful... --&gt;
        &lt;input_value name='channel_0'&gt;
            &lt;variable name='channel_0' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_1'&gt;
            &lt;variable name='channel_1' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_2'&gt;
            &lt;variable name='channel_2' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_3'&gt;
            &lt;variable name='channel_3' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_4'&gt;
            &lt;variable name='channel_4' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_5'&gt;
            &lt;variable name='channel_5' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_6'&gt;
            &lt;variable name='channel_6' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_7'&gt;
            &lt;variable name='channel_7' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_8'&gt;
            &lt;variable name='channel_8' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_9'&gt;
            &lt;variable name='channel_9' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='channel_10'&gt;
            &lt;variable name='channel_10' /&gt;
        &lt;/input_value&gt;
        
 
        &lt;input_value name='servo_0'&gt;
            &lt;variable name='servo_0' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_1'&gt;
            &lt;variable name='servo_1' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_2'&gt;
            &lt;variable name='servo_2' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_3'&gt;
            &lt;variable name='servo_3' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_4'&gt;
            &lt;variable name='servo_4' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_5'&gt;
            &lt;variable name='servo_5' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_6'&gt;
            &lt;variable name='servo_6' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_7'&gt;
            &lt;variable name='servo_7' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_8'&gt;
            &lt;variable name='servo_8' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_9'&gt;
            &lt;variable name='servo_9' /&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='servo_10'&gt;
            &lt;variable name='servo_10' /&gt;
        &lt;/input_value&gt;
        
 
        &lt;!-- frequency 50Hz is used for servo  --&gt;
        &lt;!-- frequency in range 1526 Hz to 24 Hz  --&gt;
        
        &lt;parameter name='frequency' value='50' /&gt;
        
        &lt;!-- bus is '1' for RPi Release 2 --&gt;
        &lt;parameter name='i2c.bus' value='1' /&gt;
        
        &lt;!-- Depending on address select, the bus address is 
             '0x40' for all address lines low. 
             --&gt;
        &lt;parameter name='i2c.address' value='0x40' /&gt;
        
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.i2cAdapter.PWM_SN3218"></a>10.42.&nbsp;PWM_SN3218</h2>
</div>
</div>
</div>
<a name="N12A95" class="indexterm"></a>
<p>18 channel, 8-bit PWM I2C-bus LED controller</p>
<p>18 channel, 8-bit PWM I2C-bus LED controller
				PIGLOW board from pimoroni
			</p>
<h4>
<a name="N12A9E"></a>Class</h4>
<p>adapter.i2cAdapter.PWM_SN3218</p>
<h4>
<a name="N12AA3"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">channel_00</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_01</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_02</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_03</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_04</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_05</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_06</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_07</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_08</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_09</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_0A</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_0B</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_0C</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_0D</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_0E</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_0F</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_10</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
<tr>
<td valign="top">channel_11</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p> input from scratch to adapter, value = 0..100 </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12C1F"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">i2c.address</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>fixed '0x54' for device
		</p>

</td>
</tr>
<tr>
<td valign="top">i2c.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intOrHexType">intOrHexType</a>

</p>

</td><td valign="top">

<p>bus is '1' for RPi Release 2
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12C5B"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.i2cAdapter.PWM_SN3218' name='18-channel PWM'&gt;
        &lt;description&gt;DEMO for the SN3218 adapter. This is the device used by the piglow-board&lt;/description&gt;


        &lt;input_value name='channel_00'&gt;
            &lt;variable name='channel_00' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_0' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_01'&gt;
            &lt;variable name='channel_01' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_0' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_02'&gt;
            &lt;variable name='channel_02' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_0' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_03'&gt;
            &lt;variable name='channel_03' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_0' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_04'&gt;
            &lt;variable name='channel_04' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_1' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_05'&gt;
            &lt;variable name='channel_05' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_1' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_06'&gt;
            &lt;variable name='channel_06' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_1' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_07'&gt;
            &lt;variable name='channel_07' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_1' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_08'&gt;
            &lt;variable name='channel_08' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_1' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_09'&gt;
            &lt;variable name='channel_09' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_1' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_0A'&gt;
            &lt;variable name='channel_0A' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_2' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_0B'&gt;
            &lt;variable name='channel_0B' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_2' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_0C'&gt;
            &lt;variable name='channel_0C' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_0' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_0D'&gt;
            &lt;variable name='channel_0D' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_2' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_0E'&gt;
            &lt;variable name='channel_0E' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_0' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_0F'&gt;
            &lt;variable name='channel_0F' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_2' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_10'&gt;
            &lt;variable name='channel_10' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_2' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='channel_11'&gt;
            &lt;variable name='channel_11' /&gt;
            &lt;variable name='all' /&gt;
            &lt;variable name='branch_2' /&gt;
        &lt;/input_value&gt;

        &lt;!-- bus is '1' for RPi Release 2 --&gt;
        &lt;parameter name='i2c.bus' value='1' /&gt;

        &lt;!-- address is fixed for this device --&gt;
        &lt;parameter name='i2c.address' value='0x54' /&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.serialAdapter.RFID_Reader_Adapter"></a>10.43.&nbsp;RFID_Reader_Adapter</h2>
</div>
</div>
</div>
<a name="N12C67" class="indexterm"></a>
<p>Interface to Innovation ID-2LA, ID-12LA, ID-20LA, by Raspberry serial-connection</p>
<p>Set protocol to ASCII !</p>
<p>Power the device by 3.3V, and use Rx-Input of RaspberryPi</p>
<p>After data have been send, an event is send by the adapter.</p>
<h4>
<a name="N12C74"></a>Class</h4>
<p>adapter.serialAdapter.RFID_Reader_Adapter</p>
<h4>
<a name="N12C79"></a>Output Event</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">data_event</td><td valign="top">

<p>when a read event has been performed.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12C93"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">data</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>10 chars.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12CBB"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">serial.baud</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Use 9600.</p>

</td>
</tr>
<tr>
<td valign="top">serial.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
			
</p>

<p>on raspberry, use /dev/ttyAMA0</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12CFA"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">        &lt;adapter class='adapter.serialAdapter.RFID_Reader_Adapter'  name='rfidReader'&gt;
        &lt;description&gt;Read a tag from INNOVATIONS ID-12LA or alike&lt;/description&gt;
        
        &lt;output_value name='data'&gt;
            &lt;sensor name='rfid'/&gt;
        &lt;/output_value&gt;
        &lt;output name='data_event'&gt;
            &lt;broadcast name='rfid_available'/&gt;
        &lt;/output&gt;
         
        &lt;parameter name='serial.device' value='/dev/ttyAMA0' /&gt;
        &lt;parameter name='serial.baud' value='9600' /&gt;

    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.broadcast.ScratchStartclickedAdapter"></a>10.44.&nbsp;ScratchStartclickedAdapter</h2>
</div>
</div>
</div>
<a name="N12D06" class="indexterm"></a>
<p>Send start broadcast event at connection start.</p>
<p>Send start broadcast event at connection start</p>
<p>Can be configured to send arbitrary events on connection start.</p>
<h4>
<a name="N12D11"></a>Class</h4>
<p>adapter.broadcast.ScratchStartclickedAdapter</p>
<h4>
<a name="N12D16"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.broadcast.ScratchStartclickedAdapter'  name='startClick'&gt;
        &lt;output name='command'&gt;
            &lt;broadcast name='scratch-startclicked'/&gt;
        &lt;/output&gt;
        &lt;description&gt;Send startclicked&lt;/description&gt;
    &lt;/adapter&gt;

		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.senseHat_adapter.SenseHat_Adapter"></a>10.45.&nbsp;SenseHat_Adapter</h2>
</div>
</div>
</div>
<a name="N12D22" class="indexterm"></a>
<p>Sense-Hat Adapter.</p>
<p>Installation procedures for senseHat required.</p>
<p>Supports LED, sensors and orientation. </p>
<p>setPixel_xy: depends on setting x_pos, y_pos and color values.</p>
<p>clearPixel_xy: depends on setting x_pos, y_pos. </p>
<h4>
<a name="N12D31"></a>Class</h4>
<p>adapter.senseHat_adapter.SenseHat_Adapter</p>
<h4>
<a name="N12D36"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">clear</td><td valign="top">

<p>
            calls sense.clear(); clears the LED matrix
        </p>

</td>
</tr>
<tr>
<td valign="top">clearPixel_xy</td><td valign="top">

<p>
           shuts off LED pixel on x,y position.
        </p>

</td>
</tr>
<tr>
<td valign="top">setPixel_xy</td><td valign="top">

<p>
            sets pixel on x,y position to color. Depends on setting x_pos, y_pos and color first.
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12D64"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">color</td><td valign="top">

<p>

<a class="link" href="#adapter.type.colorType">colorType</a>

</p>

</td><td valign="top">

<p>color for pixel to set.</p>

</td>
</tr>
<tr>
<td valign="top">x_pos</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>x-pos to address the LED-matrix, [0..7].</p>

</td>
</tr>
<tr>
<td valign="top">y_pos</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>y-pos to address the LED-matrix, [0..7].</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12DB4"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">humidity</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>humidity, rounded to one decimal digit.</p>

</td>
</tr>
<tr>
<td valign="top">orientation_pitch</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>orientation_pitch, rounded to one decimal digit.</p>

</td>
</tr>
<tr>
<td valign="top">orientation_roll</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>orientation_roll, rounded to one decimal digit.</p>

</td>
</tr>
<tr>
<td valign="top">orientation_yaw</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>orientation_yaw, rounded to one decimal digit.</p>

</td>
</tr>
<tr>
<td valign="top">pressure</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>pressure, rounded to one decimal digit.</p>

</td>
</tr>
<tr>
<td valign="top">temperature</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>temperature, rounded to one decimal digit.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12E40"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>
            poll rate in seconds, default 0.1 sec.
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12E68"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.senseHat_adapter.SenseHat_Adapter' name='astro-pi'&gt;
        
        &lt;!-- --&gt;
        
        &lt;description&gt;SenseHat. LED environmental sensors, orientation&lt;/description&gt;

        &lt;input name= 'clear'&gt;
            &lt;broadcast name='sense_led_clear'/&gt;
        &lt;/input&gt;
        
        &lt;input name= 'setPixel_xy'&gt;
            &lt;broadcast name='sense_led_xy_on'/&gt;
        &lt;/input&gt;
        
        &lt;input name= 'clearPixel_xy'&gt;
            &lt;broadcast name='sense_led_xy_off'/&gt;
            &lt;!--  there is a flaw in the sample scratch code which
                  has partial misspelling of one event, so add this wrong name too --&gt;
            &lt;broadcast name='semse_led_xy_off'/&gt;
        &lt;/input&gt;
 
        &lt;!--  variables for setting pixels --&gt;
        
        &lt;input_value name='pixelX'&gt;
            &lt;variable name='x_pos'/&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='pixelY'&gt;
            &lt;variable name='y_pos'/&gt;
        &lt;/input_value&gt;
        
         &lt;input_value name='color'&gt;
            &lt;variable name='color'/&gt;
        &lt;/input_value&gt;
 
        &lt;!--  environmental sensors from adapter to scratch --&gt;
        
        &lt;output_value name='temperature'&gt;
            &lt;sensor name='temperature'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='pressure'&gt;
            &lt;sensor name='pressure'/&gt;
        &lt;/output_value&gt;
        
         &lt;output_value name='humidity'&gt;
            &lt;sensor name='humidity' /&gt;
        &lt;/output_value&gt;
        
        &lt;!--  IMU sensors from adapter to scratch --&gt;
        
         &lt;output_value name='orientation_pitch'&gt;
            &lt;sensor name='orientation_pitch' /&gt;
          &lt;/output_value&gt;
        
         &lt;output_value name='orientation_roll'&gt;
            &lt;sensor name='orientation_roll' /&gt;
        &lt;/output_value&gt;
        
         &lt;output_value name='orientation_yaw'&gt;
            &lt;sensor name='orientation_yaw' /&gt;
        &lt;/output_value&gt;
        
        
        &lt;!-- polling time for external device --&gt;
        &lt;parameter name='poll.interval' value='0.1' /&gt;
        
        
    &lt;/adapter&gt;
</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.servoblaster.ServoBlaster"></a>10.46.&nbsp;ServoBlaster</h2>
</div>
</div>
</div>
<a name="N12E74" class="indexterm"></a>
<p>ServoBlaster driver</p>
<p>Servoblaster runs as daemon servod in the background and needs to be started manually.</p>
<p>See servoblaster doku for
				assignment of channel index numbers to GPIO pins.
			</p>
<h4>
<a name="N12E7F"></a>Class</h4>
<p>adapter.servoblaster.ServoBlaster</p>
<h4>
<a name="N12E84"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">servo_0</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>values 0..100</p>

</td>
</tr>
<tr>
<td valign="top">servo_1</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>values 0..100</p>

</td>
</tr>
<tr>
<td valign="top">servo_2</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>values 0..100</p>

</td>
</tr>
<tr>
<td valign="top">servo_3</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>values 0..100</p>

</td>
</tr>
<tr>
<td valign="top">servo_4</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>values 0..100</p>

</td>
</tr>
<tr>
<td valign="top">servo_5</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>values 0..100</p>

</td>
</tr>
<tr>
<td valign="top">servo_6</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>values 0..100</p>

</td>
</tr>
<tr>
<td valign="top">servo_7</td><td valign="top">

<p>

<a class="link" href="#adapter.type.float100Type">float100Type</a>

</p>

</td><td valign="top">

<p>values 0..100</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N12F38"></a>Parameter (optional)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">millisecond.0.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 2 [ms]. Optional max value in range 1.1..2.5 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.0.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 1 [ms]. Optional min value in range 0.5..1.9 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.1.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 2 [ms]. Optional max value in range 1.1..2.5 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.1.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 1 [ms]. Optional min value in range 0.5..1.9 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.2.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 2 [ms]. Optional max value in range 1.1..2.5 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.2.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 1 [ms]. Optional min value in range 0.5..1.9 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.3.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 2 [ms]. Optional max value in range 1.1..2.5 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.3.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 1 [ms]. Optional min value in range 0.5..1.9 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.4.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 2 [ms]. Optional max value in range 1.1..2.5 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.4.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 1 [ms]. Optional min value in range 0.5..1.9 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.5.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 2 [ms]. Optional max value in range 1.1..2.5 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.5.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 1 [ms]. Optional min value in range 0.5..1.9 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.6.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 2 [ms]. Optional max value in range 1.1..2.5 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.6.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 1 [ms]. Optional min value in range 0.5..1.9 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.7.max</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 2 [ms]. Optional max value in range 1.1..2.5 [ms] </p>

</td>
</tr>
<tr>
<td valign="top">millisecond.7.min</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>default 1 [ms]. Optional min value in range 0.5..1.9 [ms] </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1308C"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.servoblaster.ServoBlaster'  name='servoblaster'&gt;
        &lt;description&gt;servoblaster for 8 channels. See servoblaster doku for 
        assignment of channel index numbers to GPIO pins.&lt;/description&gt;

        
        &lt;!--  looks strange, but could do some renaming for scratch variables here  --&gt;
        &lt;input_value name= 'servo_0'&gt;
            &lt;variable name='servo_0'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name= 'servo_1'&gt;
            &lt;variable name='servo_1'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name= 'servo_2'&gt;
            &lt;variable name='servo_2'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name= 'servo_3'&gt;
            &lt;variable name='servo_3'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name= 'servo_4'&gt;
            &lt;variable name='servo_4'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name= 'servo_5'&gt;
            &lt;variable name='servo_5'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name= 'servo_6'&gt;
            &lt;variable name='servo_6'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name= 'servo_7'&gt;
            &lt;variable name='servo_7'/&gt;
        &lt;/input_value&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.broadcast.TimeAdapter"></a>10.47.&nbsp;TimeAdapter</h2>
</div>
</div>
</div>
<a name="N13098" class="indexterm"></a>
<p>Send current system time values (second, minute, hour, day, month, year) to scratch.</p>
<p>System time is not available in scratch 1.4. The adapter provides current system time.</p>
<h4>
<a name="N130A1"></a>Class</h4>
<p>adapter.broadcast.TimeAdapter</p>
<h4>
<a name="N130A6"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.broadcast.TimeAdapter' name='currentSystemTime'&gt;
        
        &lt;description&gt;System time for Scratch 1.4&lt;/description&gt;
        
        &lt;output_value name='second'&gt;
            &lt;sensor name='time.second'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='minute'&gt;
            &lt;sensor name='time.minute'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='hour'&gt;
            &lt;sensor name='time.hour'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='day'&gt;
            &lt;sensor name='time.day'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='month'&gt;
            &lt;sensor name='time.month'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='year'&gt;
            &lt;sensor name='time.year'/&gt;
        &lt;/output_value&gt;

        &lt;parameter name='poll.interval' value='0.2' /&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.twitterAdapter.Twitter_Adapter"></a>10.48.&nbsp;Twitter_Adapter</h2>
</div>
</div>
</div>
<a name="N130B2" class="indexterm"></a>
<p>Reading twitter messages by 'term' or 'hashname'. </p>
<p>Read twitter messages by hashtag name 'term'. Needs credentials from twitter to work.</p>
<p>Needs installation of  'python-twitter'. </p>
<h4>
<a name="N130BD"></a>Class</h4>
<p>adapter.twitterAdapter.Twitter_Adapter</p>
<h4>
<a name="N130C2"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">textAcknowledge</td><td valign="top">

<p>when a text variable is processed, send acknowledge to receive next text.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N130DC"></a>Output Event</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">textAvailable</td><td valign="top">

<p>A text variable is available in scratch and can be processed.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N130F6"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">status</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>Status information from adapter.</p>

</td>
</tr>
<tr>
<td valign="top">text</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>A message from twitter.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N13132"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">scratch.timeout</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
            timeout for messages which are aquired by adapter, but not read by scratch.
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.access_token_key</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Get these from twitter for your account
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.access_token_secret</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Get these from twitter for your account
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.consumer_key</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Get these from twitter for your account
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.consumer_secret</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Get these from twitter for your account
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.datafile</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Write a data file with last message Id. Path needs to be relative. Example 'data/twitter_data.json'
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.pollrate</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>
            twitter account has limits on polling rate:  
              15 requests per 15 minutes are allowed. See twitter.com for details. 
              if you see messages 'Rate limit exceeded', then increase this parameter.
              60 sec are a good starting point.
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.read.direct</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
            Read direct messages. One of 'direct' or 'term' needs to be specified.
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.read.term</td><td valign="top">

<p>

<a class="link" href="#adapter.type.booleanType">booleanType</a>

</p>

</td><td valign="top">

<p>
            Read search messages with 'term'. One of 'direct' or 'term' needs to be specified.
        </p>

</td>
</tr>
<tr>
<td valign="top">twitter.term</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            Get messages with 'term' from twitter. Example '#raspberrytweet'
        </p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1320E"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.twitterAdapter.Twitter_Adapter' name='twitter'&gt;
        &lt;description&gt;text output from twitter messages&lt;/description&gt;

        &lt;input name='textAcknowledge'&gt;
            &lt;broadcast name='ack' /&gt;
        &lt;/input&gt;

        &lt;output name='textAvailable'&gt;
            &lt;broadcast name='listen' /&gt;
        &lt;/output&gt;

        &lt;output_value name='text'&gt;
            &lt;sensor name='text' /&gt;
        &lt;/output_value&gt;

        &lt;output_value name='status'&gt;
            &lt;sensor name='status' /&gt;
        &lt;/output_value&gt;

        &lt;parameter name='twitter.consumer_key' value='' /&gt;
        &lt;parameter name='twitter.consumer_secret' value='' /&gt;
        &lt;parameter name='twitter.access_token_key' value='' /&gt;
        &lt;parameter name='twitter.access_token_secret' value='' /&gt;

        &lt;parameter name='twitter.term' value = '#raspberrytweet' /&gt;
        &lt;parameter name='twitter.datafile' value= 'data/twitter_data.json' /&gt;
        
        &lt;!--  twitter account has limits on polling rate 
              15 requests per 15 minutes are allowed. See twitter.com for details. 
              if you see messages 'Rate limit exceeded', then increase this parameter --&gt;
        &lt;parameter name='twitter.pollrate' value= '60' /&gt;
        
        &lt;parameter name='twitter.read.direct' value= 'true' /&gt;
        &lt;parameter name='twitter.read.term' value= 'true' /&gt;
        
        &lt;!-- scratch will ignore those messages received earlier than 'scratch.timeout' --&gt;
        &lt;parameter name='scratch.timeout' value= '60' /&gt;

    &lt;/adapter&gt;</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.stepper.UnipolarStepperModule"></a>10.49.&nbsp;UnipolarStepperModule</h2>
</div>
</div>
</div>
<a name="N1321A" class="indexterm"></a>
<p>Drives an unipolar stepper motor.</p>
<p>The adapter does all the low level step pattern management and receives target position and speed values from scratch. This achieves faster steps than
				controlling single step events from scratch.
			</p>
<p>When a position is reached, a 'stopped' signal is issued.
            </p>
<h4>
<a name="N13225"></a>Class</h4>
<p>adapter.stepper.UnipolarStepperModule</p>
<h4>
<a name="N1322A"></a>Input Events</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">reset_4</td><td valign="top">

<p>resets position; sets the drive pattern to a '4 step pattern', fast, less smooth</p>

</td>
</tr>
<tr>
<td valign="top">reset_8</td><td valign="top">

<p>resets position; sets the drive pattern to a '8 step pattern', slow, smooth</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1324E"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">speed</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>float values, time between steps.</p>

</td>
</tr>
<tr>
<td valign="top">target</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>Absolute values. integer values, positive or negative.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1328A"></a>Output Event</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">complete</td><td valign="top">

<p>position reached</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N132A4"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.stepper.UnipolarStepperModule' name='stepper'&gt;

        &lt;description&gt;stepper control for unipolar stepper
        &lt;/description&gt;

        &lt;gpio port='GPIO25' alias='br0.0'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO24' alias='br0.1'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' /&gt;
        &lt;/gpio&gt;

        &lt;gpio port='GPIO23' alias='br1.0'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' /&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO18' alias='br1.1'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF' /&gt;
        &lt;/gpio&gt;
        
        &lt;input name='reset_8'&gt;
            &lt;broadcast name='reset_8' /&gt;
        &lt;/input&gt;

        &lt;input name='reset_4'&gt;
            &lt;broadcast name='reset_4' /&gt;
        &lt;/input&gt;
        &lt;input_value name='speed'&gt;
            &lt;variable name='speed' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='target'&gt;
            &lt;variable name='target' /&gt;
        &lt;/input_value&gt;
        
        &lt;!-- signal added 2016-05-08 --&gt;
        &lt;output name='complete'&gt;
            &lt;broadcast name='position_reached'/&gt;
        &lt;/output&gt;
        
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.stepper.UnipolarStepperStep"></a>10.50.&nbsp;UnipolarStepperStep</h2>
</div>
</div>
</div>
<a name="N132B0" class="indexterm"></a>
<p>Drives an unipolar stepper motor.</p>
<p>Driver for an unipolar stepper, where drive patterns are controlled by scratch. This is quite slow, but allows for teaching the basics.</p>
<h4>
<a name="N132B9"></a>Class</h4>
<p>adapter.stepper.UnipolarStepperStep</p>
<h4>
<a name="N132BE"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">binaryPattern</td><td valign="top">

<p>

<a class="link" href="#adapter.type.binary4Type">binary4Type</a>

</p>

</td><td valign="top">

<p>Binary pattern for all four outputs. Syntax is like "b0000". The digits adress br0.0, br0.1, br1.0,
			br1.1</p>

</td>
</tr>
<tr>
<td valign="top">br0_0</td><td valign="top">

<p>

<a class="link" href="#adapter.type.binaryType">binaryType</a>

</p>

</td><td valign="top">

<p>Value '0', '1', switches output br0.0</p>

</td>
</tr>
<tr>
<td valign="top">br0_1</td><td valign="top">

<p>

<a class="link" href="#adapter.type.binaryType">binaryType</a>

</p>

</td><td valign="top">

<p>Value '0', '1', switches output br0.1</p>

</td>
</tr>
<tr>
<td valign="top">br1_0</td><td valign="top">

<p>

<a class="link" href="#adapter.type.binaryType">binaryType</a>

</p>

</td><td valign="top">

<p>Value '0', '1', switches output br1.0</p>

</td>
</tr>
<tr>
<td valign="top">br1_1</td><td valign="top">

<p>

<a class="link" href="#adapter.type.binaryType">binaryType</a>

</p>

</td><td valign="top">

<p>Value '0', '1', switches output br1.1</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N13336"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.stepper.UnipolarStepperStep' name='stepper'&gt;
        
        &lt;description&gt;stepper control for unipolar stepper
        Allows for discrete switch signals br0.0, br0.1, br1.0, br1.1
        or binary inputs 'pattern', e.g b0001, b0011, ...
        &lt;/description&gt;
        
        &lt;gpio port='GPIO25' alias='br0.0'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low'  /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO24' alias='br0.1'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;
        
        &lt;gpio port='GPIO23' alias='br1.0'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;
        &lt;gpio port='GPIO18' alias='br1.1'&gt;
            &lt;default dir='OUT' pull='PUD_OFF' default='low' /&gt;
            &lt;active dir='OUT' pull='PUD_OFF'/&gt;
        &lt;/gpio&gt;

        &lt;input_value name='br0_0'&gt;
            &lt;variable name='br0.0'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='br0_1'&gt;
            &lt;variable name='br0.1'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='br1_0'&gt;
            &lt;variable name='br1.0'/&gt;
        &lt;/input_value&gt;
        &lt;input_value name='br1_1'&gt;
            &lt;variable name='br1.1'/&gt;
        &lt;/input_value&gt;
        
        &lt;input_value name='binaryPattern'&gt;
            &lt;variable name='pattern'/&gt;
        &lt;/input_value&gt;
        
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.arduino.UNO_Adapter"></a>10.51.&nbsp;UNO_Adapter</h2>
</div>
</div>
</div>
<a name="N13342" class="indexterm"></a>
<p>Interface to ArduinoUNO by USB-connection</p>
<p>Inputs and outputs depend on configuration. See comments in sample configuration.</p>
<h4>
<a name="N1334B"></a>Class</h4>
<p>adapter.arduino.UNO_Adapter</p>
<h4>
<a name="N13350"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">serial.baud</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Default is 115200. This value is used in firmware.</p>

</td>
</tr>
<tr>
<td valign="top">serial.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
			
</p>

<p>on windows, use COMn, e.g. COM6 </p>

<p>on raspberry, use /dev/ttyn, e.g. /dev/ttyAMA0</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N13392"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.arduino.UNO_Adapter' name='UNO'&gt;
        
        &lt;!-- input and output methods in python are dynamically generated like 
             - inputD4  for io@dir=out   [0..1]
             - servoD6  for io@dir=servo [0..180]
             - pwmD6    for io@dir=pwm   [0..255]
             - outputD3 for io@dir=in    [0..1]
        --&gt;
         &lt;!-- digital input values are inputs for the adapter (but outputs for arduino) --&gt;
        
        &lt;input_value name='inputD4'&gt;
            &lt;variable name='redLED' /&gt;
        &lt;/input_value&gt;

        &lt;input_value name='inputD5'&gt;
            &lt;variable name='greenLED' /&gt;
        &lt;/input_value&gt;

        &lt;output_value name='outputD3'&gt;
            &lt;sensor name='button' /&gt;
        &lt;/output_value&gt;

        &lt;!-- output_value methods in python are dynamically generated like outputADA0 for analog@dir=in --&gt;
        &lt;!-- AD-Values are outputs for the adapter (but inputs for arduino) --&gt;
        
        &lt;output_value name='outputADA0'&gt;
            &lt;sensor name='potentiometer_0' /&gt;
        &lt;/output_value&gt;

        &lt;!--  on windows, use COMn, e.g. COM6  --&gt;
        &lt;!--  on raspberry, use /dev/ttyn, e.g. /dev/ttyAMA0  --&gt;
        
        &lt;parameter name='serial.device' value='COM6' /&gt;
        &lt;parameter name='serial.baud' value='115200' /&gt;

        &lt;!-- this is the setup for an UNO arduino --&gt;
        
        &lt;!-- do not use D0, D1 (serial  lines)  --&gt;
        &lt;!-- @dir = void, pwm, in, out, servo --&gt; 
        &lt;io id='D0' dir='void' /&gt;
        &lt;io id='D1' dir='void' /&gt;
        
        &lt;!--  3,5,6,10,11 may be pwm --&gt;
        &lt;io id='D2' dir='out' /&gt;
        &lt;io id='D3' dir='in' pullup='on' /&gt;

        &lt;io id='D4' dir='out' /&gt;
        &lt;io id='D5' dir='pwm' /&gt;
        
        &lt;io id='D6' dir='out' /&gt;
        &lt;io id='D7' dir='out' /&gt;

        &lt;io id='D8' dir='in' pullup='on' /&gt;
        &lt;io id='D9' dir='in' pullup='on' /&gt;
        &lt;io id='D10' dir='in' pullup='on' /&gt;
        &lt;io id='D11' dir='in' pullup='on' /&gt;

        &lt;io id='D12' dir='in' pullup='on' /&gt;
        
        &lt;!--  do not use D13 (onboard LED)  --&gt;
        
        &lt;io id='D13' dir='void' /&gt;
        
        &lt;analog id='A0' dir='in'  /&gt;
        &lt;analog id='A1' dir='void'  /&gt;
        &lt;analog id='A2' dir='void'  /&gt;
        &lt;analog id='A3' dir='void'  /&gt;
        &lt;analog id='A4' dir='void'  /&gt;
        &lt;analog id='A5' dir='void'  /&gt;
        &lt;!-- on NANO, A6 and A7 are available for analog input --&gt;
        &lt;analog id='A6' dir='void'  /&gt;
        &lt;analog id='A7' dir='void'  /&gt;

    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.arduino.UNO_POWERFUNCTIONS_Adapter"></a>10.52.&nbsp;UNO_POWERFUNCTIONS_Adapter</h2>
</div>
</div>
</div>
<a name="N1339E" class="indexterm"></a>
<p>Interface to ArduinoUNO by USB-connection</p>
<p></p>
<p>Controls LEGO Powerfunctions sending by IR transmitter.</p>
<p>Needs sketch 'arduino/power_functions' on arduino. An infrared LED needs to be connected from PIN12 by a current limiting diode to 5V. When arduino is not on 5V, look for documentation.</p>
<p>The command choosen for powertools have timeout enabled; refresh is handled in adapter.</p>
<p>Values sent are -7 to 7; BRAKE is a special command.</p>
<h4>
<a name="N133AE"></a>Class</h4>
<p>adapter.arduino.UNO_POWERFUNCTIONS_Adapter</p>
<h4>
<a name="N133B3"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">CHANNEL_1_A</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>-7 .. 7, BRAKE</p>

</td>
</tr>
<tr>
<td valign="top">CHANNEL_1_B</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>-7 .. 7, BRAKE</p>

</td>
</tr>
<tr>
<td valign="top">CHANNEL_2_A</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>-7 .. 7, BRAKE</p>

</td>
</tr>
<tr>
<td valign="top">CHANNEL_2_B</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>-7 .. 7, BRAKE</p>

</td>
</tr>
<tr>
<td valign="top">CHANNEL_3_A</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>-7 .. 7, BRAKE</p>

</td>
</tr>
<tr>
<td valign="top">CHANNEL_3_B</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>-7 .. 7, BRAKE</p>

</td>
</tr>
<tr>
<td valign="top">CHANNEL_4_A</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>-7 .. 7, BRAKE</p>

</td>
</tr>
<tr>
<td valign="top">CHANNEL_4_B</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>-7 .. 7, BRAKE</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N13467"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">serial.baud</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Default is 115200. This value is used in firmware.</p>

</td>
</tr>
<tr>
<td valign="top">serial.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>
            
</p>

<p>on windows, use COMn, e.g. COM6 </p>

<p>on raspberry, use /dev/ttyn, e.g. /dev/ttyAMA0</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N134A9"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">   &lt;adapter class='adapter.arduino.UNO_POWERFUNCTIONS_Adapter' name='UNO'&gt;
        &lt;!--  Sample arduino communication. Needs arduino sketch programmed in arduino. --&gt;

       
        &lt;input_value name='CHANNEL_1_A'&gt;
            &lt;variable name='c_1_A' /&gt;
        &lt;/input_value&gt;
       &lt;input_value name='CHANNEL_1_B'&gt;
            &lt;variable name='c_1_B' /&gt;
        &lt;/input_value&gt;
       &lt;input_value name='CHANNEL_2_A'&gt;
            &lt;variable name='c_2_A' /&gt;
        &lt;/input_value&gt;
       &lt;input_value name='CHANNEL_2_B'&gt;
            &lt;variable name='c_2_B' /&gt;
        &lt;/input_value&gt;
       &lt;input_value name='CHANNEL_3_A'&gt;
            &lt;variable name='c_3_A' /&gt;
        &lt;/input_value&gt;
       &lt;input_value name='CHANNEL_3_B'&gt;
            &lt;variable name='c_3_B' /&gt;
        &lt;/input_value&gt;
       &lt;input_value name='CHANNEL_4_A'&gt;
            &lt;variable name='c_4_A' /&gt;
        &lt;/input_value&gt;
       &lt;input_value name='CHANNEL_4_B'&gt;
            &lt;variable name='c_4_B' /&gt;
        &lt;/input_value&gt;
        
        
        &lt;!-- ==================================================== --&gt;
        &lt;!--  on windows, use COMn, e.g. COM6  --&gt;
        &lt;!--  on raspberry, use /dev/ttyn, e.g. /dev/ttyAMA0  --&gt;
        
        &lt;!-- 
            &lt;parameter name='serial.device' value='/dev/ttyUSB0' /&gt;
        --&gt;
             &lt;parameter name='serial.device' value='COM6' /&gt;
         
        &lt;parameter name='serial.baud' value='115200' /&gt;


    &lt;/adapter&gt;

        </pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.w1_gpio.W1_DS1820"></a>10.53.&nbsp;W1_DS1820</h2>
</div>
</div>
</div>
<a name="N134B5" class="indexterm"></a>
<p>DS1820 and related devices, using w1-gpio driver</p>
<p>Needs w1-gpio driver. </p>
<h4>
<a name="N134BE"></a>Class</h4>
<p>adapter.w1_gpio.W1_DS1820</p>
<h4>
<a name="N134C3"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">temperature</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>value is temperature in &deg;C</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N134EB"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>Poll interval in seconds, 0.5 or slower is good.
		</p>

</td>
</tr>
<tr>
<td valign="top">w1.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.stringType">stringType</a>

</p>

</td><td valign="top">

<p>the id on the w1-bus.
		</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N13527"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.w1_gpio.W1_DS1820'  name='temp_DS1820'&gt;
        &lt;description&gt;Temp values from DS1820&lt;/description&gt;
        
        &lt;output_value name='temperature'&gt;
            &lt;sensor name='ds18b20'/&gt;
        &lt;/output_value&gt;
        
        &lt;parameter name='poll.interval' value='1.0' /&gt;
        
        &lt;!-- start kernel driver g1-gpio 
             base dir /sys/bus/w1/devices 
        --&gt;
        &lt;parameter name='w1.device' value='10-0008023b57b9' /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.websocket.WebsocketXY_Adapter"></a>10.54.&nbsp;WebsocketXY_Adapter</h2>
</div>
</div>
</div>
<a name="N13533" class="indexterm"></a>
<p>X, Y-Values from an orientation sensor</p>
<p>X, Y-Values from an orientation sensor on a smartphone, sent through some javascript, websocket to RPI. There is the need of a web page providing the
				javascript too.
			</p>
<h4>
<a name="N1353C"></a>Class</h4>
<p>adapter.websocket.WebsocketXY_Adapter</p>
<h4>
<a name="N13541"></a>Output Event</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="240px" class="col2">
</colgroup>
<tbody>
<tr>
<td valign="top">click</td><td valign="top">

<p>The javascript code sends click-events. These are propagated to scratch.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1355B"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">cntValue</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p></p>

</td>
</tr>
<tr>
<td valign="top">xValue</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>x-angle</p>

</td>
</tr>
<tr>
<td valign="top">yValue</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>y-angle</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N135AA"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">&lt;adapter class='adapter.websocket.WebsocketXY_Adapter'  name='XY'&gt;
        &lt;description&gt;X, Y-Values from an orientation sensor&lt;/description&gt;
        
        &lt;output_value name='xValue'&gt;
            &lt;sensor name='goto_X'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='yValue'&gt;
            &lt;sensor name='goto_Y'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='cntValue'&gt;
            &lt;sensor name='counter'/&gt;
        &lt;/output_value&gt;
        
        &lt;output name='click'&gt;
            &lt;broadcast name='click_event'/&gt;
        &lt;/output&gt;
        
        &lt;webserver&gt;
            &lt;!-- implement a web socket link 'route'  --&gt;
            &lt;route name='pendel' route='/adapter/pendel' /&gt;
            
            &lt;!--  implement a link on start page of web server --&gt;
            &lt;html name='pendel' path='websocket/pendel.html' comment='positional sensor from a smartphone' /&gt;
        &lt;/webserver&gt;
        
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.wire_gpio.Wire_SHTx"></a>10.55.&nbsp;Wire_SHTx</h2>
</div>
</div>
</div>
<a name="N135B6" class="indexterm"></a>
<p>SHT15 or alike humidity sensors</p>
<p>Provides scan results from a barcode scanner.</p>
<h4>
<a name="N135BF"></a>Class</h4>
<p>adapter.wire_gpio.Wire_SHTx</p>
<h4>
<a name="N135C4"></a>Output Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">humidity</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>relative humidity</p>

</td>
</tr>
<tr>
<td valign="top">temperature</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>temperature in &deg;C</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N13600"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">poll.interval</td><td valign="top">

<p>

<a class="link" href="#adapter.type.floatType">floatType</a>

</p>

</td><td valign="top">

<p>polling interval in seconds, min 2 sec.</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N13628"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.wire_gpio.Wire_SHTx'  name='Humidity'&gt;
        &lt;description&gt;Humidity-Value from SHT15&lt;/description&gt;

        &lt;gpio port='GPIO23' alias='clock'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'   /&gt;
        &lt;/gpio&gt;
        
        &lt;gpio port='GPIO24' alias='data'&gt;
            &lt;default dir='IN' pull='PUD_UP'  /&gt;
            &lt;active dir='IN' pull='PUD_UP'   /&gt;
        &lt;/gpio&gt;
        
        &lt;output_value name='humidity'&gt;
            &lt;sensor name='humidity'/&gt;
        &lt;/output_value&gt;
        
        &lt;output_value name='temperature'&gt;
            &lt;sensor name='temperature'/&gt;
        &lt;/output_value&gt;
        
        &lt;!--  poll time min 1 sec (self heating permits max 1 measurement per sec) --&gt;
        &lt;parameter name='poll.interval' value='2' /&gt;
       
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="adapter.detail.adapter.spiAdapter.WS2801_Adapter"></a>10.56.&nbsp;WS2801_Adapter</h2>
</div>
</div>
</div>
<a name="N13634" class="indexterm"></a>
<p>WS2801-LED chain driver</p>
<p>Streaming out Bytes to a WS2801-Device.
				To keep it simple, the input variable is a concatenated list of
				color names 'red', 'darkred', 'green', 'blue',
				yellow', 'pink'.

				Could also be #rrggbb-hex values, but not implemented for simplicity.
				Separators are blank.
			</p>
<h4>
<a name="N1363D"></a>Class</h4>
<p>adapter.spiAdapter.WS2801_Adapter</p>
<h4>
<a name="N13642"></a>Input Values</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">led</td><td valign="top">

<p>

<a class="link" href="#adapter.type.colorType">colorType</a>

</p>

</td><td valign="top">

<p>blank-separated color names</p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N1366A"></a>Parameter (mandatory)</h4>
<div class="clean">
<table border="1">
<colgroup>
<col width="70px" class="col1">
<col width="75px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">led.length</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p>Length of LED chain, e.g. 50 </p>

</td>
</tr>
<tr>
<td valign="top">spi.bus</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p></p>

</td>
</tr>
<tr>
<td valign="top">spi.device</td><td valign="top">

<p>

<a class="link" href="#adapter.type.intType">intType</a>

</p>

</td><td valign="top">

<p></p>

</td>
</tr>
</tbody>
</table>
</div>
<h4>
<a name="N136B8"></a>Sample configuration</h4>
<p>

</p>
<pre class="screen">    &lt;adapter class='adapter.spiAdapter.WS2801_Adapter'  name='led_stripe'&gt;
        
        &lt;description&gt;LED Stripe of 50 &lt;/description&gt;
        
        &lt;input_value name='led'&gt;
            &lt;variable name='led'/&gt;
        &lt;/input_value&gt;
        
        &lt;parameter name='led.length' value='50' /&gt;
        
        &lt;parameter name='spi.bus' value='0' /&gt;
        &lt;parameter name='spi.device' value='0' /&gt;
    &lt;/adapter&gt;
		</pre>
<p>

</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="N136C0"></a>10.57.&nbsp;Adapter Data Types</h2>
</div>
</div>
</div>
<div class="clean">
<table border="1">
<colgroup>
<col width="75px" class="col1">
<col width="120px" class="col2">
<col width="240px" class="col3">
</colgroup>
<tbody>
<tr>
<td valign="top">

<p>
<a name="adapter.type.anyType"></a>anyType</p>

</td><td valign="top">

<p>[.]</p>

</td><td valign="top">

<p>scratch will accept any type for variable/sensor input.</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.binary4Type"></a>binary4Type</p>

</td><td valign="top">

<p>b[01]{4}</p>

</td><td valign="top">

<p>binary 4 bits, sample is "b0100"</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.binaryType"></a>binaryType</p>

</td><td valign="top">

<p>[01]</p>

</td><td valign="top">

<p></p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.booleanType"></a>booleanType</p>

</td><td valign="top">

<p>(1|TRUE|YES|Y|HIGH)|(0|FALSE|NO|N|LOW)</p>

</td><td valign="top">

<p>case insensitive</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.char7segmentType"></a>char7segmentType</p>

</td><td valign="top">

<p>[0-9AbCcdEFr-]</p>

</td><td valign="top">

<p>case sensitive</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.colorType"></a>colorType</p>

</td><td valign="top">

<p>[.]</p>

</td><td valign="top">

<p>Colors in plain text format ('red', 'green', 'blue', 'darkred', 'darkgreen', 'darkblue', 'yellow', 'pink', 'magenta', 'off', 'white') or hex format r,g,b (e.g. 'ee23a0' or '#ee23a0')</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.digitType"></a>digitType</p>

</td><td valign="top">

<p>[0-9]</p>

</td><td valign="top">

<p>0..9</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.float100Type"></a>float100Type</p>

</td><td valign="top">

<p>[0-9]+([.][0-9]*)?</p>

</td><td valign="top">

<p>0..100</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.floatType"></a>floatType</p>

</td><td valign="top">

<p>[0-9]+([.][0-9]*)?</p>

</td><td valign="top">

<p>0..</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.intOrHexType"></a>intOrHexType</p>

</td><td valign="top">

<p>([0-9]+)|(0x[0-9A-Fa-f]+)</p>

</td><td valign="top">

<p>integer or hex values</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.intType"></a>intType</p>

</td><td valign="top">

<p>[0-9]+</p>

</td><td valign="top">

<p>0..</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.restrictedStringType"></a>restrictedStringType</p>

</td><td valign="top">

<p>[.]</p>

</td><td valign="top">

<p>String, except ['|$\/&lt;&gt;&amp;~*]</p>

</td>
</tr>
<tr>
<td valign="top">

<p>
<a name="adapter.type.stringType"></a>stringType</p>

</td><td valign="top">

<p>[.]</p>

</td><td valign="top">

<p>String</p>

</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratchClient.index"></a>Chapter&nbsp;11.&nbsp;Index</h1>
</div>
</div>
</div>
<div class="index">
<div class="titlepage">
<div>
<div>
<h2 class="title">
<a name="N137DB"></a>Index</h2>
</div>
</div>
</div>
<div class="index">
<div class="indexdiv">
<h3>A</h3>
<dl>
<dt>adapter</dt>
<dd>
<dl>
<dt>adapter.adapters.Gpio7segment, <a class="indexterm" href="#adapter.detail.adapter.adapters.Gpio7segment">Gpio7segment</a>
</dt>
<dt>adapter.adc_zone.ADC_MCP3008_10_Input, <a class="indexterm" href="#adapter.detail.adapter.adc_zone.ADC_MCP3008_10_Input">ADC_MCP3008_10_Input</a>
</dt>
<dt>adapter.adc_zone.ADC_MCP3202_10_Zone_Input, <a class="indexterm" href="#adapter.detail.adapter.adc_zone.ADC_MCP3202_10_Zone_Input">ADC_MCP3202_10_Zone_Input</a>
</dt>
<dt>adapter.adc.ADC_MCP3202_10_Input, <a class="indexterm" href="#adapter.detail.adapter.adc.ADC_MCP3202_10_Input">ADC_MCP3202_10_Input</a>
</dt>
<dt>adapter.adc.ADC_MCP3202_12_Input, <a class="indexterm" href="#adapter.detail.adapter.adc.ADC_MCP3202_12_Input">ADC_MCP3202_12_Input</a>
</dt>
<dt>adapter.adc.IRDistanceInput, <a class="indexterm" href="#adapter.detail.adapter.adc.IRDistanceInput">IRDistanceInput</a>
</dt>
<dt>adapter.arduino.NEOPIXEL_Adapter, <a class="indexterm" href="#adapter.detail.adapter.arduino.NEOPIXEL_Adapter">NEOPIXEL_Adapter</a>
</dt>
<dt>adapter.arduino.UNO_Adapter, <a class="indexterm" href="#adapter.detail.adapter.arduino.UNO_Adapter">UNO_Adapter</a>
</dt>
<dt>adapter.arduino.UNO_POWERFUNCTIONS_Adapter, <a class="indexterm" href="#adapter.detail.adapter.arduino.UNO_POWERFUNCTIONS_Adapter">UNO_POWERFUNCTIONS_Adapter</a>
</dt>
<dt>adapter.broadcast.ScratchStartclickedAdapter, <a class="indexterm" href="#adapter.detail.adapter.broadcast.ScratchStartclickedAdapter">ScratchStartclickedAdapter</a>
</dt>
<dt>adapter.broadcast.TimeAdapter, <a class="indexterm" href="#adapter.detail.adapter.broadcast.TimeAdapter">TimeAdapter</a>
</dt>
<dt>adapter.Cap1188Adapter.PianoHat_CAP1188_Adapter, <a class="indexterm" href="#adapter.detail.adapter.Cap1188Adapter.PianoHat_CAP1188_Adapter">PianoHat_CAP1188_Adapter</a>
</dt>
<dt>adapter.dma_pwm.DMA_PWM, <a class="indexterm" href="#adapter.detail.adapter.dma_pwm.DMA_PWM">DMA_PWM</a>
</dt>
<dt>adapter.dma_pwm.DMA_PWM_ON_OFF, <a class="indexterm" href="#adapter.detail.adapter.dma_pwm.DMA_PWM_ON_OFF">DMA_PWM_ON_OFF</a>
</dt>
<dt>adapter.dma_pwm.DMA_PWMServo, <a class="indexterm" href="#adapter.detail.adapter.dma_pwm.DMA_PWMServo">DMA_PWMServo</a>
</dt>
<dt>adapter.encoder.GPIODialPlateEncoder, <a class="indexterm" href="#adapter.detail.adapter.encoder.GPIODialPlateEncoder">GPIODialPlateEncoder</a>
</dt>
<dt>adapter.encoder.GPIOEncoder, <a class="indexterm" href="#adapter.detail.adapter.encoder.GPIOEncoder">GPIOEncoder</a>
</dt>
<dt>adapter.gpio.GpioButtonInput, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioButtonInput">GpioButtonInput</a>
</dt>
<dt>adapter.gpio.GpioEventInput, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioEventInput">GpioEventInput</a>
</dt>
<dt>adapter.gpio.GpioInput, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioInput">GpioInput</a>
</dt>
<dt>adapter.gpio.GpioOutput, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioOutput">GpioOutput</a>
</dt>
<dt>adapter.gpio.GpioOutputPWM, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioOutputPWM">GpioOutputPWM</a>
</dt>
<dt>adapter.gpio.GpioOutputPWM_ON_OFF, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioOutputPWM_ON_OFF">GpioOutputPWM_ON_OFF</a>
</dt>
<dt>adapter.gpio.GpioOutputPWMServo, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioOutputPWMServo">GpioOutputPWMServo</a>
</dt>
<dt>adapter.gpio.GpioStateOutput, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioStateOutput">GpioStateOutput</a>
</dt>
<dt>adapter.gpio.GpioValueInput, <a class="indexterm" href="#adapter.detail.adapter.gpio.GpioValueInput">GpioValueInput</a>
</dt>
<dt>adapter.i2cAdapter.ADC_ADS1015_Input, <a class="indexterm" href="#adapter.detail.adapter.i2cAdapter.ADC_ADS1015_Input">ADC_ADS1015_Input</a>
</dt>
<dt>adapter.i2cAdapter.Luminosity_BH1750_Input, <a class="indexterm" href="#adapter.detail.adapter.i2cAdapter.Luminosity_BH1750_Input">Luminosity_BH1750_Input</a>
</dt>
<dt>adapter.i2cAdapter.Pressure_BMP085_Input, <a class="indexterm" href="#adapter.detail.adapter.i2cAdapter.Pressure_BMP085_Input">Pressure_BMP085_Input</a>
</dt>
<dt>adapter.i2cAdapter.PWM_PCA9685, <a class="indexterm" href="#adapter.detail.adapter.i2cAdapter.PWM_PCA9685">PWM_PCA9685</a>
</dt>
<dt>adapter.i2cAdapter.PWM_SN3218, <a class="indexterm" href="#adapter.detail.adapter.i2cAdapter.PWM_SN3218">PWM_SN3218</a>
</dt>
<dt>adapter.linux.Linux_Adapter, <a class="indexterm" href="#adapter.detail.adapter.linux.Linux_Adapter">Linux_Adapter</a>
</dt>
<dt>adapter.linux.Linux_APLAY_Adapter, <a class="indexterm" href="#adapter.detail.adapter.linux.Linux_APLAY_Adapter">Linux_APLAY_Adapter</a>
</dt>
<dt>adapter.linux.Linux_ARECORD_Adapter, <a class="indexterm" href="#adapter.detail.adapter.linux.Linux_ARECORD_Adapter">Linux_ARECORD_Adapter</a>
</dt>
<dt>adapter.linux.Linux_ASR_Adapter, <a class="indexterm" href="#adapter.detail.adapter.linux.Linux_ASR_Adapter">Linux_ASR_Adapter</a>
</dt>
<dt>adapter.mcp23s17.MCP23S17_Adapter, <a class="indexterm" href="#adapter.detail.adapter.mcp23s17.MCP23S17_Adapter">MCP23S17_Adapter</a>
</dt>
<dt>adapter.openweathermapAdapter.Openweathermap_Adapter, <a class="indexterm" href="#adapter.detail.adapter.openweathermapAdapter.Openweathermap_Adapter">Openweathermap_Adapter</a>
</dt>
<dt>adapter.pigpiod.HC_SR04_Adapter, <a class="indexterm" href="#adapter.detail.adapter.pigpiod.HC_SR04_Adapter">HC_SR04_Adapter</a>
</dt>
<dt>adapter.remote.CommunicationAdapter, <a class="indexterm" href="#adapter.detail.adapter.remote.CommunicationAdapter">CommunicationAdapter</a>
</dt>
<dt>adapter.senseHat_adapter.SenseHat_Adapter, <a class="indexterm" href="#adapter.detail.adapter.senseHat_adapter.SenseHat_Adapter">SenseHat_Adapter</a>
</dt>
<dt>adapter.serialAdapter.PicoBoard_Adapter, <a class="indexterm" href="#adapter.detail.adapter.serialAdapter.PicoBoard_Adapter">PicoBoard_Adapter</a>
</dt>
<dt>adapter.serialAdapter.RFID_Reader_Adapter, <a class="indexterm" href="#adapter.detail.adapter.serialAdapter.RFID_Reader_Adapter">RFID_Reader_Adapter</a>
</dt>
<dt>adapter.servoblaster.ServoBlaster, <a class="indexterm" href="#adapter.detail.adapter.servoblaster.ServoBlaster">ServoBlaster</a>
</dt>
<dt>adapter.spiAdapter.MAX31855_Adapter, <a class="indexterm" href="#adapter.detail.adapter.spiAdapter.MAX31855_Adapter">MAX31855_Adapter</a>
</dt>
<dt>adapter.spiAdapter.WS2801_Adapter, <a class="indexterm" href="#adapter.detail.adapter.spiAdapter.WS2801_Adapter">WS2801_Adapter</a>
</dt>
<dt>adapter.stepper.BipolarStepper, <a class="indexterm" href="#adapter.detail.adapter.stepper.BipolarStepper">BipolarStepper</a>
</dt>
<dt>adapter.stepper.UnipolarStepperModule, <a class="indexterm" href="#adapter.detail.adapter.stepper.UnipolarStepperModule">UnipolarStepperModule</a>
</dt>
<dt>adapter.stepper.UnipolarStepperStep, <a class="indexterm" href="#adapter.detail.adapter.stepper.UnipolarStepperStep">UnipolarStepperStep</a>
</dt>
<dt>adapter.textToSpeech.Festival_Adapter, <a class="indexterm" href="#adapter.detail.adapter.textToSpeech.Festival_Adapter">Festival_Adapter</a>
</dt>
<dt>adapter.textToSpeech.Pico2Wave_Adapter, <a class="indexterm" href="#adapter.detail.adapter.textToSpeech.Pico2Wave_Adapter">Pico2Wave_Adapter</a>
</dt>
<dt>adapter.twitterAdapter.Twitter_Adapter, <a class="indexterm" href="#adapter.detail.adapter.twitterAdapter.Twitter_Adapter">Twitter_Adapter</a>
</dt>
<dt>adapter.usbAdapter.Blink_Adapter, <a class="indexterm" href="#adapter.detail.adapter.usbAdapter.Blink_Adapter">Blink_Adapter</a>
</dt>
<dt>adapter.usbAdapter.HIDScanner_Adapter, <a class="indexterm" href="#adapter.detail.adapter.usbAdapter.HIDScanner_Adapter">HIDScanner_Adapter</a>
</dt>
<dt>adapter.w1_gpio.W1_DS1820, <a class="indexterm" href="#adapter.detail.adapter.w1_gpio.W1_DS1820">W1_DS1820</a>
</dt>
<dt>adapter.websocket.WebsocketXY_Adapter, <a class="indexterm" href="#adapter.detail.adapter.websocket.WebsocketXY_Adapter">WebsocketXY_Adapter</a>
</dt>
<dt>adapter.wire_gpio.Wire_SHTx, <a class="indexterm" href="#adapter.detail.adapter.wire_gpio.Wire_SHTx">Wire_SHTx</a>
</dt>
<dt>state display, <a class="indexterm" href="#adapter.GPIO.complex.various">GPIO Adapter, various</a>
</dt>
</dl>
</dd>
<dt>ADC</dt>
<dd>
<dl>
<dt>ADS1015, <a class="indexterm" href="#N104CC"> ADS1015 ADC Converter</a>
</dt>
<dt>atmel atmega328, <a class="indexterm" href="#special.328.adc">Atmel atmega328 with custom firmware as ADC</a>
</dt>
<dt>MCP3008, <a class="indexterm" href="#N1043C">ADC MCP3008</a>
</dt>
<dt>MCP3202, <a class="indexterm" href="#N10425">ADC MCP3202</a>
</dt>
</dl>
</dd>
<dt>arduino UNO, <a class="indexterm" href="#arduinoUNO">Arduino UNO Adapter</a>, <a class="indexterm" href="#arduinoNeopixel">Arduino UNO Adapter for Neopixel</a>
</dt>
<dt>arduino UNO, LEGO POWERFUNCTIONS, <a class="indexterm" href="#arduinoUNO_POWERFUNCTIONS">Arduino UNO_POWERFUNCTIONS_Adapter</a>
</dt>
</dl>
</div>
<div class="indexdiv">
<h3>B</h3>
<dl>
<dt>barcode scanner, <a class="indexterm" href="#scratchClient.adapter.special.usbBarcodeScanner">USB barcode scanner</a>
</dt>
<dt>barometric pressure sensor</dt>
<dd>
<dl>
<dt>BMP085, <a class="indexterm" href="#N104EE"> BMP085 barometric pressure sensor</a>
</dt>
</dl>
</dd>
<dt>blink(1), <a class="indexterm" href="#scratchClient.adapter.special.usbBlink">USB blink(1)</a>
</dt>
<dt>broadcast events</dt>
<dd>
<dl>
<dt>scratch-startclicked, <a class="indexterm" href="#broadcast_adapter">Broadcast Adapter</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>D</h3>
<dl>
<dt>devices</dt>
<dd>
<dl>
<dt>ADS1015, <a class="indexterm" href="#N104CC"> ADS1015 ADC Converter</a>
</dt>
<dt>arduino UNO, <a class="indexterm" href="#arduinoUNO">Arduino UNO Adapter</a>
</dt>
<dt>atmel atmega328, <a class="indexterm" href="#special.328.adc">Atmel atmega328 with custom firmware as ADC</a>
</dt>
<dt>barcode scanner, <a class="indexterm" href="#scratchClient.adapter.special.usbBarcodeScanner">USB barcode scanner</a>
</dt>
<dt>BH1750, <a class="indexterm" href="#N104DD"> BH1750 Luminosity Sensor</a>
</dt>
<dt>bipolar stepper motor, <a class="indexterm" href="#adapter.GPIO.output.stepper">GPIO Adapter, output for Stepper motors</a>
</dt>
<dt>blink(1), <a class="indexterm" href="#scratchClient.adapter.special.usbBlink">USB blink(1)</a>
</dt>
<dt>BMP085, <a class="indexterm" href="#N104EE"> BMP085 barometric pressure sensor</a>
</dt>
<dt>DS1820, <a class="indexterm" href="#w1-gpio">GPIO Wire adapter, w1-gpio, DS1820</a>
</dt>
<dt>DS18B20, <a class="indexterm" href="#w1-gpio">GPIO Wire adapter, w1-gpio, DS1820</a>
</dt>
<dt>gpio, <a class="indexterm" href="#adapter.GPIO.input">GPIO Adapter, input</a>
</dt>
<dt>HC-SR04, <a class="indexterm" href="#scratch.client.pigpiod.hcsr04_Adapter">Ultrasonic Distance Sensor HC-SR04 by pigpiod-Daemon</a>
</dt>
<dt>L293 motor, <a class="indexterm" href="#adapter.GPIO.output.motor">GPIO Adapter, output for PWM controlled Motor</a>
</dt>
<dt>LEGO POWERFUNCTIONS, <a class="indexterm" href="#arduinoUNO_POWERFUNCTIONS">Arduino UNO_POWERFUNCTIONS_Adapter</a>
</dt>
<dt>LEGO WeDo 2.0 Adapter, <a class="indexterm" href="#legowedo2_Adapter">LEGO WeDo 2.0 Adapter</a>
</dt>
<dt>linux aplay, <a class="indexterm" href="#command_line_aplay">Linux 'aplay' adapter</a>
</dt>
<dt>linux arecord, <a class="indexterm" href="#command_line_arecord">Linux 'arecord' adapter</a>
</dt>
<dt>linux speechrecognition, <a class="indexterm" href="#command_line_speechrecognition">Linux speech recognition adapter</a>
</dt>
<dt>MAX31855, <a class="indexterm" href="#N10452">MAX31855 Thermocouple</a>
</dt>
<dt>MCP23S17, <a class="indexterm" href="#N10476">MCP23S17 16-Bit IO Expander; PIFACE board</a>
</dt>
<dt>MCP3008, <a class="indexterm" href="#N1043C">ADC MCP3008</a>
</dt>
<dt>MCP3202, <a class="indexterm" href="#N10425">ADC MCP3202</a>
</dt>
<dt>Neopixel, <a class="indexterm" href="#arduinoNeopixel">Arduino UNO Adapter for Neopixel</a>
</dt>
<dt>Openweathermap_Adapter, <a class="indexterm" href="#Openweathermap_Adapter">Openweathermap_Adapter</a>
</dt>
<dt>os-command, <a class="indexterm" href="#command_line">Operating system commands</a>
</dt>
<dt>PCA9685, <a class="indexterm" href="#N104FF"> PCA9685 16-channel, 12-bit PWM LED controller</a>
</dt>
<dt>PIFACE, <a class="indexterm" href="#N10476">MCP23S17 16-Bit IO Expander; PIFACE board</a>
</dt>
<dt>piGlow, <a class="indexterm" href="#N10516"> SN3218 LED controller, piGlow board</a>
</dt>
<dt>remote communications, <a class="indexterm" href="#remote_communication">Remote Communications Adapter</a>
</dt>
<dt>rotary encoder, <a class="indexterm" href="#adapter.GPIO.complex.various">GPIO Adapter, various</a>
</dt>
<dt>servo, <a class="indexterm" href="#adapter.GPIO.output.servo">GPIO Adapter, output for Servo motors</a>, <a class="indexterm" href="#scratchClient.adapter.special.servoblaster">Servoblaster</a>
</dt>
<dt>servoblaster, <a class="indexterm" href="#scratchClient.adapter.special.servoblaster">Servoblaster</a>
</dt>
<dt>seven segment display, <a class="indexterm" href="#adapter.GPIO.complex.various">GPIO Adapter, various</a>
</dt>
<dt>SHT015, <a class="indexterm" href="#adapter.GPIO.complex.various">GPIO Adapter, various</a>
</dt>
<dt>sim800, <a class="indexterm" href="#special.serial.sim800">Adapter for SIM800 GSM Modem, SMS support</a>
</dt>
<dt>SN3218, <a class="indexterm" href="#N10516"> SN3218 LED controller, piGlow board</a>
</dt>
<dt>telephone dial plate, <a class="indexterm" href="#complex">Telephone Dial Plate Adapter</a>
</dt>
<dt>text to speech, <a class="indexterm" href="#tts">Text To Speech Adapter</a>
</dt>
<dt>Twitter_Adapter, <a class="indexterm" href="#Twitter_Adapter">Twitter_Adapter</a>
</dt>
<dt>unipolar stepper motor, <a class="indexterm" href="#adapter.GPIO.output.stepper">GPIO Adapter, output for Stepper motors</a>
</dt>
<dt>usb, <a class="indexterm" href="#scratchClient.adapter.special.usbBarcodeScanner">USB barcode scanner</a>, <a class="indexterm" href="#scratchClient.adapter.special.usbBlink">USB blink(1)</a>
</dt>
<dt>WS2801 LED Stripe, <a class="indexterm" href="#N103ED">WS2801 LED Stripe</a>
</dt>
<dt>WS2812, <a class="indexterm" href="#arduinoNeopixel">Arduino UNO Adapter for Neopixel</a>
</dt>
</dl>
</dd>
<dt>DHT11 temperature, humidity</dt>
<dd>
<dl>
<dt>atmel atmega328, <a class="indexterm" href="#special.328.dht22">Atmel atmega328 with custom firmware for DHT22, DHT11</a>
</dt>
</dl>
</dd>
<dt>DHT22 temperature, humidity</dt>
<dd>
<dl>
<dt>atmel atmega328, <a class="indexterm" href="#special.328.dht22">Atmel atmega328 with custom firmware for DHT22, DHT11</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>F</h3>
<dl>
<dt>frequency counter</dt>
<dd>
<dl>
<dt>atmel atmega328, <a class="indexterm" href="#special.328.frequency">Atmel atmega328 with custom firmware as frequency counter</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>G</h3>
<dl>
<dt>gpio</dt>
<dd>
<dl>
<dt>bipolar stepper motor, <a class="indexterm" href="#adapter.GPIO.output.stepper">GPIO Adapter, output for Stepper motors</a>
</dt>
<dt>button input, <a class="indexterm" href="#adapter.GPIO.input">GPIO Adapter, input</a>
</dt>
<dt>hbridge motor, <a class="indexterm" href="#adapter.GPIO.output.motor">GPIO Adapter, output for PWM controlled Motor</a>
</dt>
<dt>input, <a class="indexterm" href="#adapter.GPIO.input">GPIO Adapter, input</a>
</dt>
<dt>marshmallow button input, <a class="indexterm" href="#adapter.GPIO.input">GPIO Adapter, input</a>
</dt>
<dt>output, <a class="indexterm" href="#adapter.GPIO.output">GPIO Adapter, output</a>
</dt>
<dt>pwm output, <a class="indexterm" href="#adapter.GPIO.output">GPIO Adapter, output</a>
</dt>
<dt>seven segment display, <a class="indexterm" href="#adapter.GPIO.complex.various">GPIO Adapter, various</a>
</dt>
<dt>unipolar stepper motor, <a class="indexterm" href="#adapter.GPIO.output.stepper">GPIO Adapter, output for Stepper motors</a>
</dt>
</dl>
</dd>
<dt>gsm modem</dt>
<dd>
<dl>
<dt>sim800, <a class="indexterm" href="#special.serial.sim800">Adapter for SIM800 GSM Modem, SMS support</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>H</h3>
<dl>
<dt>HC-SR04, <a class="indexterm" href="#scratch.client.pigpiod.hcsr04_Adapter">Ultrasonic Distance Sensor HC-SR04 by pigpiod-Daemon</a>
</dt>
<dt>humidity sensor</dt>
<dd>
<dl>
<dt>SHT015, <a class="indexterm" href="#adapter.GPIO.complex.various">GPIO Adapter, various</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>I</h3>
<dl>
<dt>ID-12LA, <a class="indexterm" href="#rfid">RFID Adapter</a>
</dt>
<dt>ID-20LA, <a class="indexterm" href="#rfid">RFID Adapter</a>
</dt>
<dt>ID-2LA, <a class="indexterm" href="#rfid">RFID Adapter</a>
</dt>
</dl>
</div>
<div class="indexdiv">
<h3>L</h3>
<dl>
<dt>LED</dt>
<dd>
<dl>
<dt>WS2801 LED Stripe, <a class="indexterm" href="#N103ED">WS2801 LED Stripe</a>
</dt>
</dl>
</dd>
<dt>LEGO POWERFUNCTIONS, <a class="indexterm" href="#arduinoUNO_POWERFUNCTIONS">Arduino UNO_POWERFUNCTIONS_Adapter</a>
</dt>
<dt>LEGO WeDo 2.0 Adapter, <a class="indexterm" href="#legowedo2_Adapter">LEGO WeDo 2.0 Adapter</a>
</dt>
<dt>linux aplay, <a class="indexterm" href="#command_line_aplay">Linux 'aplay' adapter</a>
</dt>
<dt>linux arecord, <a class="indexterm" href="#command_line_arecord">Linux 'arecord' adapter</a>
</dt>
<dt>linux speechrecognition, <a class="indexterm" href="#command_line_speechrecognition">Linux speech recognition adapter</a>
</dt>
<dt>luminosity sensor</dt>
<dd>
<dl>
<dt>BH1750, <a class="indexterm" href="#N104DD"> BH1750 Luminosity Sensor</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>M</h3>
<dl>
<dt>monitoring</dt>
<dd>
<dl>
<dt>gui, <a class="indexterm" href="#scratchClient.monitoring"> GUI, Web Interface for Monitoring</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>N</h3>
<dl>
<dt>network</dt>
<dd>
<dl>
<dt>remote communications, <a class="indexterm" href="#remote_communication">Remote Communications Adapter</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>O</h3>
<dl>
<dt>Openweathermap_Adapter, <a class="indexterm" href="#Openweathermap_Adapter">Openweathermap_Adapter</a>
</dt>
<dt>os</dt>
<dd>
<dl>
<dt>system time, <a class="indexterm" href="#time_adapter">System Time Adapter</a>
</dt>
</dl>
</dd>
<dt>os-command, <a class="indexterm" href="#command_line">Operating system commands</a>
</dt>
</dl>
</div>
<div class="indexdiv">
<h3>P</h3>
<dl>
<dt>picoBoard, <a class="indexterm" href="#picoBoard">ScratchBoard, PicoBoard Adapter</a>
</dt>
<dt>pocketsphinx, <a class="indexterm" href="#command_line_speechrecognition">Linux speech recognition adapter</a>
</dt>
<dt>port expander</dt>
<dd>
<dl>
<dt>MCP23S17, <a class="indexterm" href="#N10476">MCP23S17 16-Bit IO Expander; PIFACE board</a>
</dt>
</dl>
</dd>
<dt>PWM</dt>
<dd>
<dl>
<dt>PCA9685, <a class="indexterm" href="#N104FF"> PCA9685 16-channel, 12-bit PWM LED controller</a>
</dt>
<dt>SN3218, <a class="indexterm" href="#N10516"> SN3218 LED controller, piGlow board</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>R</h3>
<dl>
<dt>RFID, <a class="indexterm" href="#rfid">RFID Adapter</a>
</dt>
<dt>rotary encoder, <a class="indexterm" href="#adapter.GPIO.complex.various">GPIO Adapter, various</a>
</dt>
</dl>
</div>
<div class="indexdiv">
<h3>S</h3>
<dl>
<dt>ScratchBoard, <a class="indexterm" href="#picoBoard">ScratchBoard, PicoBoard Adapter</a>
</dt>
<dt>servo, <a class="indexterm" href="#adapter.GPIO.output.servo">GPIO Adapter, output for Servo motors</a>
</dt>
<dt>servoblaster, <a class="indexterm" href="#scratchClient.adapter.special.servoblaster">Servoblaster</a>
</dt>
<dt>smartphone positional sensor</dt>
<dd>
<dl>
<dt>websocket, <a class="indexterm" href="#scratchClient.adapter.special.websocket.positionalsensor">Smartphone positional sensor for scratch</a>
</dt>
</dl>
</dd>
<dt>stepper motor</dt>
<dd>
<dl>
<dt>bipolar, <a class="indexterm" href="#adapter.GPIO.output.stepper">GPIO Adapter, output for Stepper motors</a>
</dt>
<dt>unipolar, <a class="indexterm" href="#adapter.GPIO.output.stepper">GPIO Adapter, output for Stepper motors</a>
</dt>
</dl>
</dd>
</dl>
</div>
<div class="indexdiv">
<h3>T</h3>
<dl>
<dt>telephone dial plate, <a class="indexterm" href="#complex">Telephone Dial Plate Adapter</a>
</dt>
<dt>text to speech, <a class="indexterm" href="#tts">Text To Speech Adapter</a>
</dt>
<dt>thermocouple</dt>
<dd>
<dl>
<dt>MAX31855, <a class="indexterm" href="#N10452">MAX31855 Thermocouple</a>
</dt>
</dl>
</dd>
<dt>thermometer</dt>
<dd>
<dl>
<dt>DS1820, <a class="indexterm" href="#w1-gpio">GPIO Wire adapter, w1-gpio, DS1820</a>
</dt>
<dt>DS18B20, <a class="indexterm" href="#w1-gpio">GPIO Wire adapter, w1-gpio, DS1820</a>
</dt>
<dt>MAX31855, <a class="indexterm" href="#N10452">MAX31855 Thermocouple</a>
</dt>
</dl>
</dd>
<dt>Twitter_Adapter, <a class="indexterm" href="#Twitter_Adapter">Twitter_Adapter</a>
</dt>
</dl>
</div>
</div>
</div>
<p></p>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title">
<a name="scratchClient.references"></a>Chapter&nbsp;12.&nbsp;References</h1>
</div>
</div>
</div>
<p>/rsp/ &nbsp; see <a class="ulink" href="http://wiki.scratch.mit.edu/wiki/Remote_Sensors_Protocol" target="_top">http://wiki.scratch.mit.edu/wiki/Remote_Sensors_Protocol</a>

</p>
<p></p>
<p>/simon/ &nbsp;see <a class="ulink" href="http://cymplecy.wordpress.com/2013/04/22/scratch-gpio-version-2-introduction-for-beginners/" target="_top">http://cymplecy.wordpress.com/2013/04/22/scratch-gpio-version-2-introduction-for-beginners/</a>

</p>
<p></p>
<p>/silent/ &nbsp; &nbsp; &nbsp; &nbsp;&bdquo;SILENT: un&rsquo;interfaccia tra Scratch e LEGO NXT&ldquo;, Luca Zenatti</p>
</div>
</div>
</body>
</html>
